2021-05-14T20:12:41.1629796+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:12:45.0185090+07:00  [INF] Executed DbCommand ("214"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:12:45.4456769+07:00  [INF] Executed DbCommand ("322"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:12:45.4558117+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:12:45.4569707+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:12:45.5216436+07:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-05-14T20:12:45.5893594+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-05-14T20:12:46.8925668+07:00  [INF] Executed DbCommand ("106"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-05-14T20:12:46.9845804+07:00  [INF] User profile is available. Using '"C:\Users\NguyenKhanh\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-05-14T20:12:49.7435504+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-05-14T20:12:49.7438346+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-05-14T20:12:49.7443232+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-05-14T20:12:49.7443964+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-05-14T20:12:49.7444522+07:00  [INF] Content root path: "C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api" (b5d60022)
2021-05-14T20:12:57.6427065+07:00 0HM8MR7URNFR8:00000001 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=khanhnguyen&Container=Inbox - - (ca22a1cb)
2021-05-14T20:12:57.9165215+07:00 0HM8MR7URNFR8:00000001 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:12:57.9608076+07:00 0HM8MR7URNFR8:00000001 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=khanhnguyen&Container=Inbox - - - 204 - - 341.1217ms (791a596a)
2021-05-14T20:12:57.9653950+07:00 0HM8MR7URNFR8:00000003 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=khanhnguyen&Container=Inbox - - (ca22a1cb)
2021-05-14T20:12:57.9663500+07:00 0HM8MR7URNFR8:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:12:58.6291614+07:00 0HM8MR7URNFR8:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:12:58.6750100+07:00 0HM8MR7URNFR8:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:12:58.8223817+07:00 0HM8MR7URNFR8:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:12:59.5340305+07:00 0HM8MR7URNFR9:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/khanhnguyen - - (ca22a1cb)
2021-05-14T20:12:59.5470954+07:00 0HM8MR7URNFR9:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:12:59.5519044+07:00 0HM8MR7URNFR9:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/khanhnguyen - - - 204 - - 17.8861ms (791a596a)
2021-05-14T20:12:59.5881324+07:00 0HM8MR7URNFR9:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/khanhnguyen - - (ca22a1cb)
2021-05-14T20:12:59.5967589+07:00 0HM8MR7URNFR9:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:12:59.5992732+07:00 0HM8MR7URNFR9:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:12:59.6229496+07:00 0HM8MR7URNFR9:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:12:59.6260057+07:00 0HM8MR7URNFR9:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T20:12:59.6314520+07:00 0HM8MR7URNFR9:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:12:59.6638490+07:00 0HM8MR7URNFR8:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:12:59.7154247+07:00 0HM8MR7URNFR9:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:13:00.5438946+07:00 0HM8MR7URNFR8:00000003 [INF] Executed DbCommand ("313"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:13:00.5438981+07:00 0HM8MR7URNFR9:00000003 [INF] Executed DbCommand ("199"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:13:00.6429823+07:00 0HM8MR7URNFR8:00000003 [INF] Executed DbCommand ("34"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:13:00.7545297+07:00 0HM8MR7URNFR8:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:13:00.8124116+07:00 0HM8MR7URNFR9:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T20:13:00.8334388+07:00 0HM8MR7URNFR8:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 2004.1682ms (afa2e885)
2021-05-14T20:13:00.8334289+07:00 0HM8MR7URNFR9:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 1195.113ms (afa2e885)
2021-05-14T20:13:00.8340973+07:00 0HM8MR7URNFR9:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T20:13:00.8341266+07:00 0HM8MR7URNFR8:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:13:00.8415818+07:00 0HM8MR7URNFR8:00000003 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=khanhnguyen&Container=Inbox - - - 200 - application/json;+charset=utf-8 2876.2166ms (791a596a)
2021-05-14T20:13:00.8415817+07:00 0HM8MR7URNFR9:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/khanhnguyen - - - 200 - application/json;+charset=utf-8 1253.5020ms (791a596a)
2021-05-14T20:13:12.6343291+07:00 0HM8MR7URNFR8:00000005 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=khanhnguyen&Container=Inbox - - (ca22a1cb)
2021-05-14T20:13:12.6344889+07:00 0HM8MR7URNFR8:00000005 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:13:12.6348496+07:00 0HM8MR7URNFR8:00000005 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=khanhnguyen&Container=Inbox - - - 204 - - 0.5096ms (791a596a)
2021-05-14T20:13:12.6398911+07:00 0HM8MR7URNFR8:00000007 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=khanhnguyen&Container=Inbox - - (ca22a1cb)
2021-05-14T20:13:12.6400397+07:00 0HM8MR7URNFR8:00000007 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:13:12.6613523+07:00 0HM8MR7URNFR8:00000007 [INF] Successfully validated the token. (60169667)
2021-05-14T20:13:12.6615296+07:00 0HM8MR7URNFR8:00000007 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:13:12.6617532+07:00 0HM8MR7URNFR8:00000007 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:13:12.6653895+07:00 0HM8MR7URNFR8:00000007 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:13:12.6717737+07:00 0HM8MR7URNFR8:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:13:12.7021945+07:00 0HM8MR7URNFR8:00000007 [INF] Executed DbCommand ("30"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:13:12.7033681+07:00 0HM8MR7URNFR8:00000007 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:13:12.7043208+07:00 0HM8MR7URNFR8:00000007 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 42.453ms (afa2e885)
2021-05-14T20:13:12.7043994+07:00 0HM8MR7URNFR8:00000007 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:13:12.7048620+07:00 0HM8MR7URNFR8:00000007 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=khanhnguyen&Container=Inbox - - - 200 - application/json;+charset=utf-8 64.9059ms (791a596a)
2021-05-14T20:15:40.5162585+07:00 0HM8MR7URNFRA:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/account/login - - (ca22a1cb)
2021-05-14T20:15:40.5166166+07:00 0HM8MR7URNFRA:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:15:40.5171518+07:00 0HM8MR7URNFRA:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/account/login - - - 204 - - 1.0564ms (791a596a)
2021-05-14T20:15:40.6659644+07:00 0HM8MR7URNFRA:00000003 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json;charset=UTF-8 44 (ca22a1cb)
2021-05-14T20:15:40.6712360+07:00 0HM8MR7URNFRA:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:15:40.6716538+07:00 0HM8MR7URNFRA:00000003 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-05-14T20:15:40.6864446+07:00 0HM8MR7URNFRA:00000003 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-05-14T20:15:41.1191980+07:00 0HM8MR7URNFRA:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:15:41.1651950+07:00 0HM8MR7URNFRA:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:15:42.1166231+07:00 0HM8MR7URNFRA:00000003 [INF] Executed DbCommand ("87"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-05-14T20:15:42.2901439+07:00 0HM8MR7URNFRA:00000003 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-05-14T20:15:42.2943168+07:00 0HM8MR7URNFRA:00000003 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 1607.7248ms (afa2e885)
2021-05-14T20:15:42.2944382+07:00 0HM8MR7URNFRA:00000003 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-05-14T20:15:42.2973131+07:00 0HM8MR7URNFRA:00000003 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json;charset=UTF-8 44 - 200 - application/json;+charset=utf-8 1631.4065ms (791a596a)
2021-05-14T20:15:43.0902276+07:00 0HM8MR7URNFRB:00000001 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:15:43.0904707+07:00 0HM8MR7URNFRB:00000001 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:15:43.0907651+07:00 0HM8MR7URNFRB:00000001 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 0.5830ms (791a596a)
2021-05-14T20:15:43.1062792+07:00 0HM8MR7URNFRB:00000003 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:15:43.1063708+07:00 0HM8MR7URNFRB:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:15:43.1066319+07:00 0HM8MR7URNFRB:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:15:43.1067018+07:00 0HM8MR7URNFRB:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:15:43.1068165+07:00 0HM8MR7URNFRB:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:15:43.1083416+07:00 0HM8MR7URNFRB:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:15:43.1176023+07:00 0HM8MR7URNFRB:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:15:43.1274117+07:00 0HM8MR7URNFRB:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:15:43.1279506+07:00 0HM8MR7URNFRB:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:15:43.1283170+07:00 0HM8MR7URNFRB:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 21.4535ms (afa2e885)
2021-05-14T20:15:43.1284041+07:00 0HM8MR7URNFRB:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:15:43.1285721+07:00 0HM8MR7URNFRB:00000003 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 22.2472ms (791a596a)
2021-05-14T20:15:49.4486212+07:00 0HM8MR7URNFRB:00000005 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - (ca22a1cb)
2021-05-14T20:15:49.4487500+07:00 0HM8MR7URNFRB:00000005 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:15:49.4489359+07:00 0HM8MR7URNFRB:00000005 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - - 204 - - 0.5078ms (791a596a)
2021-05-14T20:15:49.4518740+07:00 0HM8MR7URNFRB:00000007 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - (ca22a1cb)
2021-05-14T20:15:49.4519574+07:00 0HM8MR7URNFRB:00000007 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:15:49.4522652+07:00 0HM8MR7URNFRB:00000007 [INF] Successfully validated the token. (60169667)
2021-05-14T20:15:49.4523358+07:00 0HM8MR7URNFRB:00000007 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:15:49.4524472+07:00 0HM8MR7URNFRB:00000007 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:15:49.4532198+07:00 0HM8MR7URNFRB:00000007 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:15:49.4691456+07:00 0HM8MR7URNFRB:00000007 [INF] Executed DbCommand ("8"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:15:49.4894194+07:00 0HM8MR7URNFRB:00000007 [INF] Executed DbCommand ("11"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([t].[Id0] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([a0].[Id] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[RecipientId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:15:49.4900798+07:00 0HM8MR7URNFRB:00000007 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:15:49.4903674+07:00 0HM8MR7URNFRB:00000007 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 37.8786ms (afa2e885)
2021-05-14T20:15:49.4904413+07:00 0HM8MR7URNFRB:00000007 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:15:49.4905833+07:00 0HM8MR7URNFRB:00000007 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - - 200 - application/json;+charset=utf-8 38.7156ms (791a596a)
2021-05-14T20:15:51.1022803+07:00 0HM8MR7URNFRB:00000009 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:15:51.1023936+07:00 0HM8MR7URNFRB:00000009 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:15:51.1025799+07:00 0HM8MR7URNFRB:00000009 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.3097ms (791a596a)
2021-05-14T20:15:51.1048270+07:00 0HM8MR7URNFRB:0000000B [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:15:52.2634184+07:00 0HM8MR7URNFRB:0000000B [ERR] The request matched multiple endpoints. Matches: 

api.Controllers.UsersController.GetAllUsers (api)
api.Controllers.UsersController.GetUsers (api) (7e1941a7)
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

api.Controllers.UsersController.GetAllUsers (api)
api.Controllers.UsersController.GetUsers (api)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api\Middleware\ExceptionMiddleware.cs:line 29
2021-05-14T20:15:52.2801978+07:00 0HM8MR7URNFRB:0000000B [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 500 - application/json 1175.3148ms (791a596a)
2021-05-14T20:18:26.2035127+07:00 0HM8MR7URNFRD:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users application/json 147 (ca22a1cb)
2021-05-14T20:18:26.2048390+07:00 0HM8MR7URNFRD:00000002 [ERR] The request matched multiple endpoints. Matches: 

api.Controllers.UsersController.GetAllUsers (api)
api.Controllers.UsersController.GetUsers (api) (7e1941a7)
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

api.Controllers.UsersController.GetAllUsers (api)
api.Controllers.UsersController.GetUsers (api)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api\Middleware\ExceptionMiddleware.cs:line 29
2021-05-14T20:18:26.2065292+07:00 0HM8MR7URNFRD:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users application/json 147 - 500 - application/json 3.0256ms (791a596a)
2021-05-14T20:19:34.8614178+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:19:35.8120297+07:00  [INF] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:19:35.8616509+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:19:35.8678776+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:19:35.8691875+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:19:35.8859610+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-05-14T20:19:35.9145619+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-05-14T20:19:36.1787866+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-05-14T20:19:36.2028685+07:00  [INF] User profile is available. Using '"C:\Users\NguyenKhanh\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-05-14T20:19:36.4908040+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-05-14T20:19:36.4909440+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-05-14T20:19:36.4911082+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-05-14T20:19:36.4911472+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-05-14T20:19:36.4912034+07:00  [INF] Content root path: "C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api" (b5d60022)
2021-05-14T20:19:43.3650165+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:19:44.1153712+07:00  [INF] Executed DbCommand ("95"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:19:44.1938376+07:00  [INF] Executed DbCommand ("42"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:19:44.1999043+07:00  [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:19:44.2009782+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:19:44.2201262+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-05-14T20:19:44.2441713+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-05-14T20:19:44.5489424+07:00  [INF] Executed DbCommand ("34"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-05-14T20:19:44.5876637+07:00  [INF] User profile is available. Using '"C:\Users\NguyenKhanh\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-05-14T20:19:44.8047031+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-05-14T20:19:44.8048697+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-05-14T20:19:44.8050600+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-05-14T20:19:44.8051083+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-05-14T20:19:44.8051636+07:00  [INF] Content root path: "C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api" (b5d60022)
2021-05-14T20:19:49.8684350+07:00 0HM8MRBPS00GB:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users application/json 147 (ca22a1cb)
2021-05-14T20:19:50.3074980+07:00 0HM8MRBPS00GB:00000002 [INF] Successfully validated the token. (60169667)
2021-05-14T20:19:50.3201388+07:00 0HM8MRBPS00GB:00000002 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:19:50.3215750+07:00 0HM8MRBPS00GB:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:19:50.3654522+07:00 0HM8MRBPS00GB:00000002 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:19:50.7378040+07:00 0HM8MRBPS00GB:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:19:51.1192625+07:00 0HM8MRBPS00GB:00000002 [INF] Executed DbCommand ("69"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:19:51.4788190+07:00 0HM8MRBPS00GB:00000002 [INF] Executed DbCommand ("53"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:19:51.5240475+07:00 0HM8MRBPS00GB:00000002 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:19:51.6329636+07:00 0HM8MRBPS00GB:00000002 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 1251.92ms (afa2e885)
2021-05-14T20:19:51.6346136+07:00 0HM8MRBPS00GB:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:19:51.6530522+07:00 0HM8MRBPS00GB:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users application/json 147 - 200 - application/json;+charset=utf-8 1788.8592ms (791a596a)
2021-05-14T20:20:00.4444209+07:00 0HM8MRBPS00GC:00000001 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:20:00.4517174+07:00 0HM8MRBPS00GC:00000001 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:00.4581550+07:00 0HM8MRBPS00GC:00000001 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 13.7878ms (791a596a)
2021-05-14T20:20:00.4780316+07:00 0HM8MRBPS00GC:00000003 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:20:00.4786905+07:00 0HM8MRBPS00GC:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:00.4801536+07:00 0HM8MRBPS00GC:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:00.4804378+07:00 0HM8MRBPS00GC:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:20:00.5158402+07:00 0HM8MRBPS00GC:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:00.7175532+07:00 0HM8MRBPS00GC:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:00.8194332+07:00 0HM8MRBPS00GC:00000003 [INF] Executed DbCommand ("57"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:20:00.8822316+07:00 0HM8MRBPS00GC:00000003 [INF] Executed DbCommand ("35"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:20:00.8941286+07:00 0HM8MRBPS00GC:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:00.9027685+07:00 0HM8MRBPS00GC:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 386.4899ms (afa2e885)
2021-05-14T20:20:00.9031337+07:00 0HM8MRBPS00GC:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:20:00.9036968+07:00 0HM8MRBPS00GC:00000003 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 425.6463ms (791a596a)
2021-05-14T20:20:01.7046765+07:00 0HM8MRBPS00GC:00000005 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:20:01.7053318+07:00 0HM8MRBPS00GC:00000005 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:01.7057855+07:00 0HM8MRBPS00GC:00000005 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 1.0947ms (791a596a)
2021-05-14T20:20:01.7202355+07:00 0HM8MRBPS00GC:00000007 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:20:01.7203963+07:00 0HM8MRBPS00GC:00000007 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:01.7233548+07:00 0HM8MRBPS00GC:00000007 [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:01.7244274+07:00 0HM8MRBPS00GC:00000007 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:20:01.7245907+07:00 0HM8MRBPS00GC:00000007 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:20:01.7248161+07:00 0HM8MRBPS00GC:00000007 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:20:01.7274383+07:00 0HM8MRBPS00GC:00000007 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:01.7372465+07:00 0HM8MRBPS00GC:00000007 [INF] Executed DbCommand ("7"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:20:01.7477115+07:00 0HM8MRBPS00GC:00000007 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:20:01.7505407+07:00 0HM8MRBPS00GC:00000007 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:01.7606236+07:00 0HM8MRBPS00GC:00000007 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 35.7191ms (afa2e885)
2021-05-14T20:20:01.7607279+07:00 0HM8MRBPS00GC:00000007 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:20:01.7609898+07:00 0HM8MRBPS00GC:00000007 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 40.7219ms (791a596a)
2021-05-14T20:20:09.4082900+07:00 0HM8MRBPS00GC:00000009 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:20:09.4351665+07:00 0HM8MRBPS00GC:00000009 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:09.4356086+07:00 0HM8MRBPS00GC:00000009 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - - 204 - - 27.2593ms (791a596a)
2021-05-14T20:20:09.4389963+07:00 0HM8MRBPS00GC:0000000B [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:20:09.4392906+07:00 0HM8MRBPS00GC:0000000B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:09.4396656+07:00 0HM8MRBPS00GC:0000000B [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:09.4397770+07:00 0HM8MRBPS00GC:0000000B [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:20:09.4450599+07:00 0HM8MRBPS00GC:0000000B [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:09.4521391+07:00 0HM8MRBPS00GC:0000000B [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:09.5468299+07:00 0HM8MRBPS00GC:0000000B [INF] Executed DbCommand ("48"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:20:09.5729034+07:00 0HM8MRBPS00GC:0000000B [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:09.5733325+07:00 0HM8MRBPS00GC:0000000B [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 128.2128ms (afa2e885)
2021-05-14T20:20:09.5734125+07:00 0HM8MRBPS00GC:0000000B [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:20:09.5736160+07:00 0HM8MRBPS00GC:0000000B [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - - 200 - application/json;+charset=utf-8 134.6155ms (791a596a)
2021-05-14T20:20:14.7797485+07:00 0HM8MRBPS00GC:0000000D [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages - - (ca22a1cb)
2021-05-14T20:20:14.7798537+07:00 0HM8MRBPS00GC:0000000D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:14.7801278+07:00 0HM8MRBPS00GC:0000000D [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages - - - 204 - - 0.3790ms (791a596a)
2021-05-14T20:20:14.7821481+07:00 0HM8MRBPS00GC:0000000F [INF] Request starting HTTP/2 POST https://localhost:5001/api/messages application/json;charset=UTF-8 46 (ca22a1cb)
2021-05-14T20:20:14.7822417+07:00 0HM8MRBPS00GC:0000000F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:14.7824349+07:00 0HM8MRBPS00GC:0000000F [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:14.7824933+07:00 0HM8MRBPS00GC:0000000F [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-05-14T20:20:14.7863424+07:00 0HM8MRBPS00GC:0000000F [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:14.7963810+07:00 0HM8MRBPS00GC:0000000F [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:14.9135712+07:00 0HM8MRBPS00GC:0000000F [INF] Executed DbCommand ("50"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:20:14.9176077+07:00 0HM8MRBPS00GC:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:20:15.6643616+07:00 0HM8MRBPS00GC:0000000F [INF] Executed DbCommand ("312"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-05-14T20:20:15.7457809+07:00 0HM8MRBPS00GC:0000000F [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MessageDto"'. (605b4265)
2021-05-14T20:20:15.7493026+07:00 0HM8MRBPS00GC:0000000F [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 962.8958ms (afa2e885)
2021-05-14T20:20:15.7493774+07:00 0HM8MRBPS00GC:0000000F [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-05-14T20:20:15.7495266+07:00 0HM8MRBPS00GC:0000000F [INF] Request finished HTTP/2 POST https://localhost:5001/api/messages application/json;charset=UTF-8 46 - 200 - application/json;+charset=utf-8 967.3724ms (791a596a)
2021-05-14T20:20:15.7645632+07:00 0HM8MRBPS00GC:00000011 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:20:15.7646645+07:00 0HM8MRBPS00GC:00000011 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:15.7648408+07:00 0HM8MRBPS00GC:00000011 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - - 204 - - 0.2421ms (791a596a)
2021-05-14T20:20:15.7672874+07:00 0HM8MRBPS00GC:00000013 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:20:15.7673835+07:00 0HM8MRBPS00GC:00000013 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:15.7676713+07:00 0HM8MRBPS00GC:00000013 [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:15.7677277+07:00 0HM8MRBPS00GC:00000013 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:20:15.7679460+07:00 0HM8MRBPS00GC:00000013 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:15.7685978+07:00 0HM8MRBPS00GC:00000013 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:15.9309052+07:00 0HM8MRBPS00GC:00000013 [INF] Executed DbCommand ("162"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:20:15.9357992+07:00 0HM8MRBPS00GC:00000013 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:15.9360603+07:00 0HM8MRBPS00GC:00000013 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 168.0515ms (afa2e885)
2021-05-14T20:20:15.9361352+07:00 0HM8MRBPS00GC:00000013 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:20:15.9363379+07:00 0HM8MRBPS00GC:00000013 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - - 200 - application/json;+charset=utf-8 169.0203ms (791a596a)
2021-05-14T20:20:23.9623326+07:00 0HM8MRBPS00GC:00000015 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - (ca22a1cb)
2021-05-14T20:20:23.9625653+07:00 0HM8MRBPS00GC:00000015 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:23.9627674+07:00 0HM8MRBPS00GC:00000015 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - - 204 - - 0.5257ms (791a596a)
2021-05-14T20:20:23.9653007+07:00 0HM8MRBPS00GC:00000017 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - (ca22a1cb)
2021-05-14T20:20:23.9653865+07:00 0HM8MRBPS00GC:00000017 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:23.9656330+07:00 0HM8MRBPS00GC:00000017 [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:23.9657350+07:00 0HM8MRBPS00GC:00000017 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:20:23.9658289+07:00 0HM8MRBPS00GC:00000017 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:23.9666722+07:00 0HM8MRBPS00GC:00000017 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:23.9766165+07:00 0HM8MRBPS00GC:00000017 [INF] Executed DbCommand ("4"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:20:23.9951816+07:00 0HM8MRBPS00GC:00000017 [INF] Executed DbCommand ("13"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([t].[Id0] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([a0].[Id] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[RecipientId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:20:23.9956295+07:00 0HM8MRBPS00GC:00000017 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:23.9958505+07:00 0HM8MRBPS00GC:00000017 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 29.9785ms (afa2e885)
2021-05-14T20:20:23.9959203+07:00 0HM8MRBPS00GC:00000017 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:20:23.9961475+07:00 0HM8MRBPS00GC:00000017 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - - 200 - application/json;+charset=utf-8 30.8047ms (791a596a)
2021-05-14T20:20:28.0833895+07:00 0HM8MRBPS00GC:00000019 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:20:28.0837478+07:00 0HM8MRBPS00GC:00000019 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:28.0845314+07:00 0HM8MRBPS00GC:00000019 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 0.7671ms (791a596a)
2021-05-14T20:20:28.0866993+07:00 0HM8MRBPS00GC:0000001B [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:20:28.0867874+07:00 0HM8MRBPS00GC:0000001B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:28.0872463+07:00 0HM8MRBPS00GC:0000001B [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:28.0873392+07:00 0HM8MRBPS00GC:0000001B [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:20:28.0874692+07:00 0HM8MRBPS00GC:0000001B [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:28.0883325+07:00 0HM8MRBPS00GC:0000001B [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:28.0938681+07:00 0HM8MRBPS00GC:0000001B [INF] Executed DbCommand ("5"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:20:28.1034142+07:00 0HM8MRBPS00GC:0000001B [INF] Executed DbCommand ("9"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:20:28.1037791+07:00 0HM8MRBPS00GC:0000001B [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:28.1043826+07:00 0HM8MRBPS00GC:0000001B [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 16.8634ms (afa2e885)
2021-05-14T20:20:28.1044353+07:00 0HM8MRBPS00GC:0000001B [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:20:28.1045911+07:00 0HM8MRBPS00GC:0000001B [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 17.8776ms (791a596a)
2021-05-14T20:20:36.1763842+07:00 0HM8MRBPS00GC:0000001D [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - (ca22a1cb)
2021-05-14T20:20:36.1766407+07:00 0HM8MRBPS00GC:0000001D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:36.1772057+07:00 0HM8MRBPS00GC:0000001D [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - - 204 - - 0.8129ms (791a596a)
2021-05-14T20:20:36.1795154+07:00 0HM8MRBPS00GC:0000001F [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - (ca22a1cb)
2021-05-14T20:20:36.1796215+07:00 0HM8MRBPS00GC:0000001F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:36.1806692+07:00 0HM8MRBPS00GC:0000001F [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:36.1808613+07:00 0HM8MRBPS00GC:0000001F [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:20:36.1812053+07:00 0HM8MRBPS00GC:0000001F [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:36.1826834+07:00 0HM8MRBPS00GC:0000001F [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:36.1847167+07:00 0HM8MRBPS00GC:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:20:36.1865943+07:00 0HM8MRBPS00GC:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([t].[Id0] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([a0].[Id] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[RecipientId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:20:36.1872186+07:00 0HM8MRBPS00GC:0000001F [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:36.1895255+07:00 0HM8MRBPS00GC:0000001F [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.9844ms (afa2e885)
2021-05-14T20:20:36.1896058+07:00 0HM8MRBPS00GC:0000001F [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:20:36.1902635+07:00 0HM8MRBPS00GC:0000001F [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - - 200 - application/json;+charset=utf-8 10.7159ms (791a596a)
2021-05-14T20:20:40.3303061+07:00 0HM8MRBPS00GC:00000021 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:20:40.3305207+07:00 0HM8MRBPS00GC:00000021 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:40.3308543+07:00 0HM8MRBPS00GC:00000021 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 0.4675ms (791a596a)
2021-05-14T20:20:40.3331711+07:00 0HM8MRBPS00GC:00000023 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:20:40.3332811+07:00 0HM8MRBPS00GC:00000023 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:40.3335358+07:00 0HM8MRBPS00GC:00000023 [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:40.3336063+07:00 0HM8MRBPS00GC:00000023 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:20:40.3337151+07:00 0HM8MRBPS00GC:00000023 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:40.3342194+07:00 0HM8MRBPS00GC:00000023 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:40.3354161+07:00 0HM8MRBPS00GC:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:20:40.3366762+07:00 0HM8MRBPS00GC:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:20:40.3371175+07:00 0HM8MRBPS00GC:00000023 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:40.3372894+07:00 0HM8MRBPS00GC:00000023 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 3.534ms (afa2e885)
2021-05-14T20:20:40.3373493+07:00 0HM8MRBPS00GC:00000023 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:20:40.3375199+07:00 0HM8MRBPS00GC:00000023 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 4.3244ms (791a596a)
2021-05-14T20:20:41.0725449+07:00 0HM8MRBPS00GC:00000025 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - (ca22a1cb)
2021-05-14T20:20:41.0726613+07:00 0HM8MRBPS00GC:00000025 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:20:41.0729535+07:00 0HM8MRBPS00GC:00000025 [INF] Successfully validated the token. (60169667)
2021-05-14T20:20:41.0730109+07:00 0HM8MRBPS00GC:00000025 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:20:41.0731062+07:00 0HM8MRBPS00GC:00000025 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:20:41.0737432+07:00 0HM8MRBPS00GC:00000025 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:20:41.0750417+07:00 0HM8MRBPS00GC:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:20:41.0763281+07:00 0HM8MRBPS00GC:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([t].[Id0] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([a0].[Id] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[RecipientId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:20:41.0765531+07:00 0HM8MRBPS00GC:00000025 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:20:41.0767034+07:00 0HM8MRBPS00GC:00000025 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 3.5614ms (afa2e885)
2021-05-14T20:20:41.0767414+07:00 0HM8MRBPS00GC:00000025 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:20:41.0768758+07:00 0HM8MRBPS00GC:00000025 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Outbox - - - 200 - application/json;+charset=utf-8 4.3306ms (791a596a)
2021-05-14T20:22:33.0638028+07:00 0HM8MRBPS00GC:00000027 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:22:33.0640136+07:00 0HM8MRBPS00GC:00000027 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:33.0642188+07:00 0HM8MRBPS00GC:00000027 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 0.4331ms (791a596a)
2021-05-14T20:22:33.1234474+07:00 0HM8MRBPS00GC:00000029 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:22:33.1235288+07:00 0HM8MRBPS00GC:00000029 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:33.1243538+07:00 0HM8MRBPS00GC:00000029 [INF] Successfully validated the token. (60169667)
2021-05-14T20:22:33.1244671+07:00 0HM8MRBPS00GC:00000029 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:22:33.1246342+07:00 0HM8MRBPS00GC:00000029 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:22:33.1259356+07:00 0HM8MRBPS00GC:00000029 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:22:33.1471441+07:00 0HM8MRBPS00GC:00000029 [INF] Executed DbCommand ("20"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:22:33.1711168+07:00 0HM8MRBPS00GC:00000029 [INF] Executed DbCommand ("23"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:22:33.1716073+07:00 0HM8MRBPS00GC:00000029 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:22:33.1717970+07:00 0HM8MRBPS00GC:00000029 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 47.1232ms (afa2e885)
2021-05-14T20:22:33.1718745+07:00 0HM8MRBPS00GC:00000029 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:22:33.1723406+07:00 0HM8MRBPS00GC:00000029 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 48.6904ms (791a596a)
2021-05-14T20:22:35.2636906+07:00 0HM8MRBPS00GC:0000002B [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:22:35.2639524+07:00 0HM8MRBPS00GC:0000002B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:35.2641096+07:00 0HM8MRBPS00GC:0000002B [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.4167ms (791a596a)
2021-05-14T20:22:35.2680676+07:00 0HM8MRBPS00GC:0000002D [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:22:35.2681578+07:00 0HM8MRBPS00GC:0000002D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:35.2684824+07:00 0HM8MRBPS00GC:0000002D [INF] Successfully validated the token. (60169667)
2021-05-14T20:22:35.2692362+07:00 0HM8MRBPS00GC:0000002D [INF] Authorization was successful. (0d575a54)
2021-05-14T20:22:35.2694208+07:00 0HM8MRBPS00GC:0000002D [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:22:35.2694975+07:00 0HM8MRBPS00GC:0000002D [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:22:35.2704368+07:00 0HM8MRBPS00GC:0000002D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:22:35.2757429+07:00 0HM8MRBPS00GC:0000002D [INF] Executed DbCommand ("5"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:22:35.2827752+07:00 0HM8MRBPS00GC:0000002D [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:22:35.2844883+07:00 0HM8MRBPS00GC:0000002D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:22:35.2848752+07:00 0HM8MRBPS00GC:0000002D [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 15.3409ms (afa2e885)
2021-05-14T20:22:35.2849324+07:00 0HM8MRBPS00GC:0000002D [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:22:35.2851073+07:00 0HM8MRBPS00GC:0000002D [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 17.0386ms (791a596a)
2021-05-14T20:22:41.9870173+07:00 0HM8MRBPS00GC:0000002F [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:22:41.9872251+07:00 0HM8MRBPS00GC:0000002F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:41.9873585+07:00 0HM8MRBPS00GC:0000002F [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.3459ms (791a596a)
2021-05-14T20:22:41.9911860+07:00 0HM8MRBPS00GC:00000031 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:22:41.9913254+07:00 0HM8MRBPS00GC:00000031 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:41.9915754+07:00 0HM8MRBPS00GC:00000031 [INF] Successfully validated the token. (60169667)
2021-05-14T20:22:41.9916731+07:00 0HM8MRBPS00GC:00000031 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:22:41.9917072+07:00 0HM8MRBPS00GC:00000031 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:22:41.9918210+07:00 0HM8MRBPS00GC:00000031 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:22:41.9923176+07:00 0HM8MRBPS00GC:00000031 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:22:41.9934953+07:00 0HM8MRBPS00GC:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:22:41.9952447+07:00 0HM8MRBPS00GC:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:22:41.9969177+07:00 0HM8MRBPS00GC:00000031 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:22:41.9972987+07:00 0HM8MRBPS00GC:00000031 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 5.4374ms (afa2e885)
2021-05-14T20:22:41.9973449+07:00 0HM8MRBPS00GC:00000031 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:22:41.9974433+07:00 0HM8MRBPS00GC:00000031 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 6.2601ms (791a596a)
2021-05-14T20:22:44.6030258+07:00 0HM8MRBPS00GC:00000033 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:22:44.6031395+07:00 0HM8MRBPS00GC:00000033 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:44.6032879+07:00 0HM8MRBPS00GC:00000033 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - - 204 - - 0.3539ms (791a596a)
2021-05-14T20:22:44.9723932+07:00 0HM8MRBPS00GC:00000035 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:22:44.9726282+07:00 0HM8MRBPS00GC:00000035 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:44.9730868+07:00 0HM8MRBPS00GC:00000035 [INF] Successfully validated the token. (60169667)
2021-05-14T20:22:44.9731845+07:00 0HM8MRBPS00GC:00000035 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:22:44.9733243+07:00 0HM8MRBPS00GC:00000035 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:22:44.9745187+07:00 0HM8MRBPS00GC:00000035 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:22:45.0077121+07:00 0HM8MRBPS00GC:00000035 [INF] Executed DbCommand ("32"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:22:45.0089492+07:00 0HM8MRBPS00GC:00000035 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:22:45.0092183+07:00 0HM8MRBPS00GC:00000035 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 35.845ms (afa2e885)
2021-05-14T20:22:45.0092734+07:00 0HM8MRBPS00GC:00000035 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:22:45.0095191+07:00 0HM8MRBPS00GC:00000035 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - - 200 - application/json;+charset=utf-8 37.0869ms (791a596a)
2021-05-14T20:22:49.3109705+07:00 0HM8MRBPS00GC:00000037 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:22:49.3110682+07:00 0HM8MRBPS00GC:00000037 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:49.3112048+07:00 0HM8MRBPS00GC:00000037 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.2531ms (791a596a)
2021-05-14T20:22:49.3138487+07:00 0HM8MRBPS00GC:00000039 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:22:49.3139442+07:00 0HM8MRBPS00GC:00000039 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:22:49.3143157+07:00 0HM8MRBPS00GC:00000039 [INF] Successfully validated the token. (60169667)
2021-05-14T20:22:49.3144369+07:00 0HM8MRBPS00GC:00000039 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:22:49.3144722+07:00 0HM8MRBPS00GC:00000039 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:22:49.3146291+07:00 0HM8MRBPS00GC:00000039 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:22:49.3150360+07:00 0HM8MRBPS00GC:00000039 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:22:49.3161202+07:00 0HM8MRBPS00GC:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:22:49.3172060+07:00 0HM8MRBPS00GC:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:22:49.3185988+07:00 0HM8MRBPS00GC:00000039 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:22:49.3188676+07:00 0HM8MRBPS00GC:00000039 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 4.1996ms (afa2e885)
2021-05-14T20:22:49.3189255+07:00 0HM8MRBPS00GC:00000039 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:22:49.3190795+07:00 0HM8MRBPS00GC:00000039 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 5.2011ms (791a596a)
2021-05-14T20:23:03.5622590+07:00 0HM8MRBPS00GC:0000003B [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:23:03.5623544+07:00 0HM8MRBPS00GC:0000003B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:03.5624925+07:00 0HM8MRBPS00GC:0000003B [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - - 204 - - 0.2572ms (791a596a)
2021-05-14T20:23:03.5685315+07:00 0HM8MRBPS00GC:0000003D [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:23:03.5686125+07:00 0HM8MRBPS00GC:0000003D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:03.5688414+07:00 0HM8MRBPS00GC:0000003D [INF] Successfully validated the token. (60169667)
2021-05-14T20:23:03.5688904+07:00 0HM8MRBPS00GC:0000003D [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:23:03.5689848+07:00 0HM8MRBPS00GC:0000003D [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:23:03.5694201+07:00 0HM8MRBPS00GC:0000003D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:23:03.5721782+07:00 0HM8MRBPS00GC:0000003D [INF] Executed DbCommand ("2"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:23:03.5730761+07:00 0HM8MRBPS00GC:0000003D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:23:03.5732455+07:00 0HM8MRBPS00GC:0000003D [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 4.2314ms (afa2e885)
2021-05-14T20:23:03.5732761+07:00 0HM8MRBPS00GC:0000003D [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:23:03.5733627+07:00 0HM8MRBPS00GC:0000003D [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - - 200 - application/json;+charset=utf-8 4.8349ms (791a596a)
2021-05-14T20:23:05.2896975+07:00 0HM8MRBPS00GC:0000003F [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:23:05.2897703+07:00 0HM8MRBPS00GC:0000003F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:05.2898859+07:00 0HM8MRBPS00GC:0000003F [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.1967ms (791a596a)
2021-05-14T20:23:05.2931791+07:00 0HM8MRBPS00GC:00000041 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:23:05.2932420+07:00 0HM8MRBPS00GC:00000041 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:05.2934865+07:00 0HM8MRBPS00GC:00000041 [INF] Successfully validated the token. (60169667)
2021-05-14T20:23:05.2936934+07:00 0HM8MRBPS00GC:00000041 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:23:05.2937209+07:00 0HM8MRBPS00GC:00000041 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:23:05.2938015+07:00 0HM8MRBPS00GC:00000041 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:23:05.2941857+07:00 0HM8MRBPS00GC:00000041 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:23:05.3019991+07:00 0HM8MRBPS00GC:00000041 [INF] Executed DbCommand ("7"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:23:05.3038567+07:00 0HM8MRBPS00GC:00000041 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:23:05.3059567+07:00 0HM8MRBPS00GC:00000041 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:23:05.3062605+07:00 0HM8MRBPS00GC:00000041 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 12.4233ms (afa2e885)
2021-05-14T20:23:05.3062867+07:00 0HM8MRBPS00GC:00000041 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:23:05.3063547+07:00 0HM8MRBPS00GC:00000041 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 13.1842ms (791a596a)
2021-05-14T20:23:06.1739856+07:00 0HM8MRBPS00GC:00000043 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/darcy - - (ca22a1cb)
2021-05-14T20:23:06.1740548+07:00 0HM8MRBPS00GC:00000043 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:06.1741588+07:00 0HM8MRBPS00GC:00000043 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/darcy - - - 204 - - 0.2042ms (791a596a)
2021-05-14T20:23:06.1809095+07:00 0HM8MRBPS00GC:00000045 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/darcy - - (ca22a1cb)
2021-05-14T20:23:06.1809820+07:00 0HM8MRBPS00GC:00000045 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:06.1811921+07:00 0HM8MRBPS00GC:00000045 [INF] Successfully validated the token. (60169667)
2021-05-14T20:23:06.1812467+07:00 0HM8MRBPS00GC:00000045 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:23:06.1813685+07:00 0HM8MRBPS00GC:00000045 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:23:06.1819495+07:00 0HM8MRBPS00GC:00000045 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:23:06.1835028+07:00 0HM8MRBPS00GC:00000045 [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:23:06.1837417+07:00 0HM8MRBPS00GC:00000045 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:23:06.1838813+07:00 0HM8MRBPS00GC:00000045 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 2.4418ms (afa2e885)
2021-05-14T20:23:06.1839097+07:00 0HM8MRBPS00GC:00000045 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:23:06.1839859+07:00 0HM8MRBPS00GC:00000045 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/darcy - - - 200 - application/json;+charset=utf-8 3.0881ms (791a596a)
2021-05-14T20:23:07.5190510+07:00 0HM8MRBPS00GC:00000047 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:23:07.5193231+07:00 0HM8MRBPS00GC:00000047 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:07.5194399+07:00 0HM8MRBPS00GC:00000047 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.4016ms (791a596a)
2021-05-14T20:23:07.5231190+07:00 0HM8MRBPS00GC:00000049 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:23:07.5233294+07:00 0HM8MRBPS00GC:00000049 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:07.5237092+07:00 0HM8MRBPS00GC:00000049 [INF] Successfully validated the token. (60169667)
2021-05-14T20:23:07.5238136+07:00 0HM8MRBPS00GC:00000049 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:23:07.5238409+07:00 0HM8MRBPS00GC:00000049 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:23:07.5239275+07:00 0HM8MRBPS00GC:00000049 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:23:07.5242645+07:00 0HM8MRBPS00GC:00000049 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:23:07.5262967+07:00 0HM8MRBPS00GC:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:23:07.5278166+07:00 0HM8MRBPS00GC:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:23:07.5305566+07:00 0HM8MRBPS00GC:00000049 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:23:07.5309001+07:00 0HM8MRBPS00GC:00000049 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 6.9357ms (afa2e885)
2021-05-14T20:23:07.5309374+07:00 0HM8MRBPS00GC:00000049 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:23:07.5310231+07:00 0HM8MRBPS00GC:00000049 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 7.9066ms (791a596a)
2021-05-14T20:23:08.9685255+07:00 0HM8MRBPS00GC:0000004B [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/darcy - - (ca22a1cb)
2021-05-14T20:23:08.9687871+07:00 0HM8MRBPS00GC:0000004B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:08.9689396+07:00 0HM8MRBPS00GC:0000004B [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/darcy - - - 204 - - 0.4790ms (791a596a)
2021-05-14T20:23:08.9729982+07:00 0HM8MRBPS00GC:0000004D [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/darcy - - (ca22a1cb)
2021-05-14T20:23:08.9730663+07:00 0HM8MRBPS00GC:0000004D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:23:08.9732958+07:00 0HM8MRBPS00GC:0000004D [INF] Successfully validated the token. (60169667)
2021-05-14T20:23:08.9733502+07:00 0HM8MRBPS00GC:0000004D [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:23:08.9734462+07:00 0HM8MRBPS00GC:0000004D [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:23:08.9739423+07:00 0HM8MRBPS00GC:0000004D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:23:08.9753234+07:00 0HM8MRBPS00GC:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:23:08.9756159+07:00 0HM8MRBPS00GC:0000004D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:23:08.9757479+07:00 0HM8MRBPS00GC:0000004D [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 2.2634ms (afa2e885)
2021-05-14T20:23:08.9757770+07:00 0HM8MRBPS00GC:0000004D [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:23:08.9758566+07:00 0HM8MRBPS00GC:0000004D [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/darcy - - - 200 - application/json;+charset=utf-8 2.8612ms (791a596a)
2021-05-14T20:24:12.2002203+07:00 0HM8MRBPS00GC:0000004F [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:12.2004363+07:00 0HM8MRBPS00GC:0000004F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:12.2006682+07:00 0HM8MRBPS00GC:0000004F [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.5117ms (791a596a)
2021-05-14T20:24:12.2041564+07:00 0HM8MRBPS00GC:00000051 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:12.2043054+07:00 0HM8MRBPS00GC:00000051 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:12.2046551+07:00 0HM8MRBPS00GC:00000051 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:12.2047797+07:00 0HM8MRBPS00GC:00000051 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:24:12.2048224+07:00 0HM8MRBPS00GC:00000051 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:24:12.2050015+07:00 0HM8MRBPS00GC:00000051 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:24:12.2056835+07:00 0HM8MRBPS00GC:00000051 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:12.2136461+07:00 0HM8MRBPS00GC:00000051 [INF] Executed DbCommand ("7"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:24:12.2191412+07:00 0HM8MRBPS00GC:00000051 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:12.2211758+07:00 0HM8MRBPS00GC:00000051 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:12.2220747+07:00 0HM8MRBPS00GC:00000051 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 17.0097ms (afa2e885)
2021-05-14T20:24:12.2221153+07:00 0HM8MRBPS00GC:00000051 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:24:12.2222050+07:00 0HM8MRBPS00GC:00000051 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 18.0495ms (791a596a)
2021-05-14T20:24:17.0743694+07:00 0HM8MRBPS00GC:00000053 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/addie - - (ca22a1cb)
2021-05-14T20:24:17.0745879+07:00 0HM8MRBPS00GC:00000053 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:17.0748125+07:00 0HM8MRBPS00GC:00000053 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/addie - - - 204 - - 0.4435ms (791a596a)
2021-05-14T20:24:17.0788376+07:00 0HM8MRBPS00GC:00000055 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/addie - - (ca22a1cb)
2021-05-14T20:24:17.0789337+07:00 0HM8MRBPS00GC:00000055 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:17.0791966+07:00 0HM8MRBPS00GC:00000055 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:17.0792648+07:00 0HM8MRBPS00GC:00000055 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:24:17.0793586+07:00 0HM8MRBPS00GC:00000055 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:17.0799242+07:00 0HM8MRBPS00GC:00000055 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:17.0982102+07:00 0HM8MRBPS00GC:00000055 [INF] Executed DbCommand ("18"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:17.0984268+07:00 0HM8MRBPS00GC:00000055 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:17.0986751+07:00 0HM8MRBPS00GC:00000055 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 19.2692ms (afa2e885)
2021-05-14T20:24:17.0987093+07:00 0HM8MRBPS00GC:00000055 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:24:17.0988055+07:00 0HM8MRBPS00GC:00000055 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/addie - - - 200 - application/json;+charset=utf-8 20.0112ms (791a596a)
2021-05-14T20:24:18.1256798+07:00 0HM8MRBPS00GC:00000057 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:18.1257809+07:00 0HM8MRBPS00GC:00000057 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:18.1258844+07:00 0HM8MRBPS00GC:00000057 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.2170ms (791a596a)
2021-05-14T20:24:18.1333233+07:00 0HM8MRBPS00GC:00000059 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:18.1333907+07:00 0HM8MRBPS00GC:00000059 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:18.1335928+07:00 0HM8MRBPS00GC:00000059 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:18.1336711+07:00 0HM8MRBPS00GC:00000059 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:24:18.1336992+07:00 0HM8MRBPS00GC:00000059 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:24:18.1338463+07:00 0HM8MRBPS00GC:00000059 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:24:18.1343696+07:00 0HM8MRBPS00GC:00000059 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:18.1369376+07:00 0HM8MRBPS00GC:00000059 [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:24:18.1401625+07:00 0HM8MRBPS00GC:00000059 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:18.1421179+07:00 0HM8MRBPS00GC:00000059 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:18.1424651+07:00 0HM8MRBPS00GC:00000059 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 8.5745ms (afa2e885)
2021-05-14T20:24:18.1424931+07:00 0HM8MRBPS00GC:00000059 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:24:18.1425745+07:00 0HM8MRBPS00GC:00000059 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 9.2484ms (791a596a)
2021-05-14T20:24:18.9945860+07:00 0HM8MRBPS00GC:0000005B [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:24:18.9948163+07:00 0HM8MRBPS00GC:0000005B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:18.9952646+07:00 0HM8MRBPS00GC:0000005B [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - - 204 - - 0.6686ms (791a596a)
2021-05-14T20:24:18.9994710+07:00 0HM8MRBPS00GC:0000005D [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:24:18.9997800+07:00 0HM8MRBPS00GC:0000005D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:19.0007875+07:00 0HM8MRBPS00GC:0000005D [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:19.0011797+07:00 0HM8MRBPS00GC:0000005D [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:24:19.0013681+07:00 0HM8MRBPS00GC:0000005D [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:19.0022255+07:00 0HM8MRBPS00GC:0000005D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:19.0051609+07:00 0HM8MRBPS00GC:0000005D [INF] Executed DbCommand ("2"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:19.0058364+07:00 0HM8MRBPS00GC:0000005D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:19.0059934+07:00 0HM8MRBPS00GC:0000005D [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 4.5596ms (afa2e885)
2021-05-14T20:24:19.0060240+07:00 0HM8MRBPS00GC:0000005D [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:24:19.0060999+07:00 0HM8MRBPS00GC:0000005D [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - - 200 - application/json;+charset=utf-8 6.7013ms (791a596a)
2021-05-14T20:24:20.6312202+07:00 0HM8MRBPS00GC:0000005F [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:20.6313137+07:00 0HM8MRBPS00GC:0000005F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:20.6314383+07:00 0HM8MRBPS00GC:0000005F [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.2488ms (791a596a)
2021-05-14T20:24:20.6343554+07:00 0HM8MRBPS00GC:00000061 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:20.6344347+07:00 0HM8MRBPS00GC:00000061 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:20.6346976+07:00 0HM8MRBPS00GC:00000061 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:20.6348157+07:00 0HM8MRBPS00GC:00000061 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:24:20.6348449+07:00 0HM8MRBPS00GC:00000061 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:24:20.6349746+07:00 0HM8MRBPS00GC:00000061 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:24:20.6353928+07:00 0HM8MRBPS00GC:00000061 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:20.6363915+07:00 0HM8MRBPS00GC:00000061 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:24:20.6399164+07:00 0HM8MRBPS00GC:00000061 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:20.6426401+07:00 0HM8MRBPS00GC:00000061 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:20.6430132+07:00 0HM8MRBPS00GC:00000061 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 7.9994ms (afa2e885)
2021-05-14T20:24:20.6435002+07:00 0HM8MRBPS00GC:00000061 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:24:20.6437530+07:00 0HM8MRBPS00GC:00000061 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 9.3832ms (791a596a)
2021-05-14T20:24:21.5044035+07:00 0HM8MRBPS00GC:00000063 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/tia - - (ca22a1cb)
2021-05-14T20:24:21.5060826+07:00 0HM8MRBPS00GC:00000063 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:21.5062237+07:00 0HM8MRBPS00GC:00000063 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/tia - - - 204 - - 1.8198ms (791a596a)
2021-05-14T20:24:21.5129509+07:00 0HM8MRBPS00GC:00000065 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/tia - - (ca22a1cb)
2021-05-14T20:24:21.5136317+07:00 0HM8MRBPS00GC:00000065 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:21.5140012+07:00 0HM8MRBPS00GC:00000065 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:21.5140679+07:00 0HM8MRBPS00GC:00000065 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:24:21.5141663+07:00 0HM8MRBPS00GC:00000065 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:21.5149224+07:00 0HM8MRBPS00GC:00000065 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:21.5164626+07:00 0HM8MRBPS00GC:00000065 [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:21.5166683+07:00 0HM8MRBPS00GC:00000065 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:21.5168107+07:00 0HM8MRBPS00GC:00000065 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 2.6092ms (afa2e885)
2021-05-14T20:24:21.5168375+07:00 0HM8MRBPS00GC:00000065 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:24:21.5169338+07:00 0HM8MRBPS00GC:00000065 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/tia - - - 200 - application/json;+charset=utf-8 4.0373ms (791a596a)
2021-05-14T20:24:22.4706963+07:00 0HM8MRBPS00GC:00000067 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:22.4707690+07:00 0HM8MRBPS00GC:00000067 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:22.4708685+07:00 0HM8MRBPS00GC:00000067 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.1862ms (791a596a)
2021-05-14T20:24:22.4738980+07:00 0HM8MRBPS00GC:00000069 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:22.4740866+07:00 0HM8MRBPS00GC:00000069 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:22.4743075+07:00 0HM8MRBPS00GC:00000069 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:22.4744165+07:00 0HM8MRBPS00GC:00000069 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:24:22.4744420+07:00 0HM8MRBPS00GC:00000069 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:24:22.4745255+07:00 0HM8MRBPS00GC:00000069 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:24:22.4748565+07:00 0HM8MRBPS00GC:00000069 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:22.4882978+07:00 0HM8MRBPS00GC:00000069 [INF] Executed DbCommand ("13"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:24:22.4958009+07:00 0HM8MRBPS00GC:00000069 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:22.4972616+07:00 0HM8MRBPS00GC:00000069 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:22.4975556+07:00 0HM8MRBPS00GC:00000069 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 22.9924ms (afa2e885)
2021-05-14T20:24:22.4976710+07:00 0HM8MRBPS00GC:00000069 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:24:22.4977557+07:00 0HM8MRBPS00GC:00000069 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 23.8583ms (791a596a)
2021-05-14T20:24:23.1734634+07:00 0HM8MRBPS00GC:0000006B [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/darcy - - (ca22a1cb)
2021-05-14T20:24:23.1736467+07:00 0HM8MRBPS00GC:0000006B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:23.1738679+07:00 0HM8MRBPS00GC:0000006B [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/darcy - - - 204 - - 0.4049ms (791a596a)
2021-05-14T20:24:23.1798542+07:00 0HM8MRBPS00GC:0000006D [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/darcy - - (ca22a1cb)
2021-05-14T20:24:23.1799216+07:00 0HM8MRBPS00GC:0000006D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:23.1801424+07:00 0HM8MRBPS00GC:0000006D [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:23.1802817+07:00 0HM8MRBPS00GC:0000006D [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:24:23.1804539+07:00 0HM8MRBPS00GC:0000006D [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:23.1811950+07:00 0HM8MRBPS00GC:0000006D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:23.2206027+07:00 0HM8MRBPS00GC:0000006D [INF] Executed DbCommand ("38"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:23.2210118+07:00 0HM8MRBPS00GC:0000006D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:23.2212008+07:00 0HM8MRBPS00GC:0000006D [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 40.7017ms (afa2e885)
2021-05-14T20:24:23.2212466+07:00 0HM8MRBPS00GC:0000006D [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:24:23.2213563+07:00 0HM8MRBPS00GC:0000006D [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/darcy - - - 200 - application/json;+charset=utf-8 41.4902ms (791a596a)
2021-05-14T20:24:26.1697222+07:00 0HM8MRBPS00GC:0000006F [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:24:26.1697961+07:00 0HM8MRBPS00GC:0000006F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:26.1698859+07:00 0HM8MRBPS00GC:0000006F [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 0.1707ms (791a596a)
2021-05-14T20:24:26.1731795+07:00 0HM8MRBPS00GC:00000071 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:24:26.1732679+07:00 0HM8MRBPS00GC:00000071 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:26.1735854+07:00 0HM8MRBPS00GC:00000071 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:26.1736554+07:00 0HM8MRBPS00GC:00000071 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:24:26.1737623+07:00 0HM8MRBPS00GC:00000071 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:26.1750129+07:00 0HM8MRBPS00GC:00000071 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:26.2001260+07:00 0HM8MRBPS00GC:00000071 [INF] Executed DbCommand ("24"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:24:26.2207818+07:00 0HM8MRBPS00GC:00000071 [INF] Executed DbCommand ("20"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:24:26.2210577+07:00 0HM8MRBPS00GC:00000071 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:26.2217437+07:00 0HM8MRBPS00GC:00000071 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 47.8426ms (afa2e885)
2021-05-14T20:24:26.2217946+07:00 0HM8MRBPS00GC:00000071 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:24:26.2219544+07:00 0HM8MRBPS00GC:00000071 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 48.7787ms (791a596a)
2021-05-14T20:24:27.0112323+07:00 0HM8MRBPS00GC:00000073 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:27.0116257+07:00 0HM8MRBPS00GC:00000073 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:27.0117906+07:00 0HM8MRBPS00GC:00000073 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.6674ms (791a596a)
2021-05-14T20:24:27.0167115+07:00 0HM8MRBPS00GC:00000075 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:27.0168786+07:00 0HM8MRBPS00GC:00000075 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:27.0171063+07:00 0HM8MRBPS00GC:00000075 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:27.0172621+07:00 0HM8MRBPS00GC:00000075 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:24:27.0172930+07:00 0HM8MRBPS00GC:00000075 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:24:27.0173830+07:00 0HM8MRBPS00GC:00000075 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:24:27.0178771+07:00 0HM8MRBPS00GC:00000075 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:27.0259460+07:00 0HM8MRBPS00GC:00000075 [INF] Executed DbCommand ("8"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:24:27.0385831+07:00 0HM8MRBPS00GC:00000075 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:27.0402740+07:00 0HM8MRBPS00GC:00000075 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:27.0405875+07:00 0HM8MRBPS00GC:00000075 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 23.1659ms (afa2e885)
2021-05-14T20:24:27.0406376+07:00 0HM8MRBPS00GC:00000075 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:24:27.0407314+07:00 0HM8MRBPS00GC:00000075 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 24.0237ms (791a596a)
2021-05-14T20:24:29.2956162+07:00 0HM8MRBPS00GC:00000077 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/tia - - (ca22a1cb)
2021-05-14T20:24:29.2957454+07:00 0HM8MRBPS00GC:00000077 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:29.2958786+07:00 0HM8MRBPS00GC:00000077 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/tia - - - 204 - - 0.2820ms (791a596a)
2021-05-14T20:24:29.2991135+07:00 0HM8MRBPS00GC:00000079 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/tia - - (ca22a1cb)
2021-05-14T20:24:29.2992611+07:00 0HM8MRBPS00GC:00000079 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:29.2994647+07:00 0HM8MRBPS00GC:00000079 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:29.2995278+07:00 0HM8MRBPS00GC:00000079 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:24:29.2996068+07:00 0HM8MRBPS00GC:00000079 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:29.3008855+07:00 0HM8MRBPS00GC:00000079 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:29.3190798+07:00 0HM8MRBPS00GC:00000079 [INF] Executed DbCommand ("17"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:29.3193247+07:00 0HM8MRBPS00GC:00000079 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:29.3194480+07:00 0HM8MRBPS00GC:00000079 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 19.8062ms (afa2e885)
2021-05-14T20:24:29.3195015+07:00 0HM8MRBPS00GC:00000079 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:24:29.3195877+07:00 0HM8MRBPS00GC:00000079 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/tia - - - 200 - application/json;+charset=utf-8 20.5112ms (791a596a)
2021-05-14T20:24:30.2278591+07:00 0HM8MRBPS00GC:0000007B [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:30.2280312+07:00 0HM8MRBPS00GC:0000007B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:30.2281388+07:00 0HM8MRBPS00GC:0000007B [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.2872ms (791a596a)
2021-05-14T20:24:30.2313641+07:00 0HM8MRBPS00GC:0000007D [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:30.2314635+07:00 0HM8MRBPS00GC:0000007D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:30.2316585+07:00 0HM8MRBPS00GC:0000007D [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:30.2317468+07:00 0HM8MRBPS00GC:0000007D [INF] Authorization was successful. (0d575a54)
2021-05-14T20:24:30.2317729+07:00 0HM8MRBPS00GC:0000007D [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:24:30.2318459+07:00 0HM8MRBPS00GC:0000007D [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:24:30.2321690+07:00 0HM8MRBPS00GC:0000007D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:30.2331294+07:00 0HM8MRBPS00GC:0000007D [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:24:30.2340870+07:00 0HM8MRBPS00GC:0000007D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:30.2359414+07:00 0HM8MRBPS00GC:0000007D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:30.2362518+07:00 0HM8MRBPS00GC:0000007D [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 4.3757ms (afa2e885)
2021-05-14T20:24:30.2363111+07:00 0HM8MRBPS00GC:0000007D [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:24:30.2363975+07:00 0HM8MRBPS00GC:0000007D [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 5.0674ms (791a596a)
2021-05-14T20:24:32.6127315+07:00 0HM8MRBPS00GC:0000007F [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:24:32.6128299+07:00 0HM8MRBPS00GC:0000007F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:32.6130053+07:00 0HM8MRBPS00GC:0000007F [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - - 204 - - 0.3512ms (791a596a)
2021-05-14T20:24:32.6175971+07:00 0HM8MRBPS00GC:00000081 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:24:32.6177032+07:00 0HM8MRBPS00GC:00000081 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:32.6178955+07:00 0HM8MRBPS00GC:00000081 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:32.6179326+07:00 0HM8MRBPS00GC:00000081 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:24:32.6180151+07:00 0HM8MRBPS00GC:00000081 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:32.6185513+07:00 0HM8MRBPS00GC:00000081 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:32.6583914+07:00 0HM8MRBPS00GC:00000081 [INF] Executed DbCommand ("39"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:32.6592088+07:00 0HM8MRBPS00GC:00000081 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:32.6593770+07:00 0HM8MRBPS00GC:00000081 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 41.3046ms (afa2e885)
2021-05-14T20:24:32.6594590+07:00 0HM8MRBPS00GC:00000081 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:24:32.6595867+07:00 0HM8MRBPS00GC:00000081 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - - 200 - application/json;+charset=utf-8 41.9833ms (791a596a)
2021-05-14T20:24:43.9284583+07:00 0HM8MRBPS00GC:00000083 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:24:43.9285631+07:00 0HM8MRBPS00GC:00000083 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:43.9286902+07:00 0HM8MRBPS00GC:00000083 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 0.2633ms (791a596a)
2021-05-14T20:24:43.9331941+07:00 0HM8MRBPS00GC:00000085 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:24:43.9333222+07:00 0HM8MRBPS00GC:00000085 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:43.9335253+07:00 0HM8MRBPS00GC:00000085 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:43.9335706+07:00 0HM8MRBPS00GC:00000085 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:24:43.9336658+07:00 0HM8MRBPS00GC:00000085 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:43.9343406+07:00 0HM8MRBPS00GC:00000085 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:43.9790720+07:00 0HM8MRBPS00GC:00000085 [INF] Executed DbCommand ("41"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:24:44.0016561+07:00 0HM8MRBPS00GC:00000085 [INF] Executed DbCommand ("22"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:24:44.0023477+07:00 0HM8MRBPS00GC:00000085 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:44.0024877+07:00 0HM8MRBPS00GC:00000085 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 68.7905ms (afa2e885)
2021-05-14T20:24:44.0025254+07:00 0HM8MRBPS00GC:00000085 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:24:44.0025949+07:00 0HM8MRBPS00GC:00000085 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 69.4144ms (791a596a)
2021-05-14T20:24:44.8278869+07:00 0HM8MRBPS00GC:00000087 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:44.8281295+07:00 0HM8MRBPS00GC:00000087 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:44.8294907+07:00 0HM8MRBPS00GC:00000087 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.3846ms (791a596a)
2021-05-14T20:24:44.8336204+07:00 0HM8MRBPS00GC:00000089 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:44.8337057+07:00 0HM8MRBPS00GC:00000089 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:44.8338823+07:00 0HM8MRBPS00GC:00000089 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:44.8339688+07:00 0HM8MRBPS00GC:00000089 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:24:44.8339873+07:00 0HM8MRBPS00GC:00000089 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:24:44.8340351+07:00 0HM8MRBPS00GC:00000089 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:24:44.8343023+07:00 0HM8MRBPS00GC:00000089 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:44.8352183+07:00 0HM8MRBPS00GC:00000089 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:24:44.8365865+07:00 0HM8MRBPS00GC:00000089 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:44.8379880+07:00 0HM8MRBPS00GC:00000089 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:44.8382774+07:00 0HM8MRBPS00GC:00000089 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 4.2152ms (afa2e885)
2021-05-14T20:24:44.8383145+07:00 0HM8MRBPS00GC:00000089 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:24:44.8384111+07:00 0HM8MRBPS00GC:00000089 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 4.7870ms (791a596a)
2021-05-14T20:24:47.6758613+07:00 0HM8MRBPS00GC:0000008B [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:24:47.6759544+07:00 0HM8MRBPS00GC:0000008B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:47.6760708+07:00 0HM8MRBPS00GC:0000008B [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - - 204 - - 0.2412ms (791a596a)
2021-05-14T20:24:47.6789706+07:00 0HM8MRBPS00GC:0000008D [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:24:47.6791072+07:00 0HM8MRBPS00GC:0000008D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:47.6793050+07:00 0HM8MRBPS00GC:0000008D [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:47.6793470+07:00 0HM8MRBPS00GC:0000008D [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:24:47.6794101+07:00 0HM8MRBPS00GC:0000008D [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:47.6798372+07:00 0HM8MRBPS00GC:0000008D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:47.6938733+07:00 0HM8MRBPS00GC:0000008D [INF] Executed DbCommand ("12"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:47.6945017+07:00 0HM8MRBPS00GC:0000008D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:47.6946356+07:00 0HM8MRBPS00GC:0000008D [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 15.1934ms (afa2e885)
2021-05-14T20:24:47.6946648+07:00 0HM8MRBPS00GC:0000008D [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:24:47.6947386+07:00 0HM8MRBPS00GC:0000008D [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - - 200 - application/json;+charset=utf-8 15.7803ms (791a596a)
2021-05-14T20:24:52.6352298+07:00 0HM8MRBPS00GC:0000008F [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:24:52.6352982+07:00 0HM8MRBPS00GC:0000008F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:52.6354137+07:00 0HM8MRBPS00GC:0000008F [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 0.1912ms (791a596a)
2021-05-14T20:24:52.6387923+07:00 0HM8MRBPS00GC:00000091 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:24:52.6388662+07:00 0HM8MRBPS00GC:00000091 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:52.6390440+07:00 0HM8MRBPS00GC:00000091 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:52.6390856+07:00 0HM8MRBPS00GC:00000091 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:24:52.6391639+07:00 0HM8MRBPS00GC:00000091 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:52.6397167+07:00 0HM8MRBPS00GC:00000091 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:52.6410882+07:00 0HM8MRBPS00GC:00000091 [INF] Executed DbCommand ("1"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:24:52.6429302+07:00 0HM8MRBPS00GC:00000091 [INF] Executed DbCommand ("1"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:24:52.6431406+07:00 0HM8MRBPS00GC:00000091 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:52.6432612+07:00 0HM8MRBPS00GC:00000091 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 4.0619ms (afa2e885)
2021-05-14T20:24:52.6432939+07:00 0HM8MRBPS00GC:00000091 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:24:52.6433687+07:00 0HM8MRBPS00GC:00000091 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 4.6356ms (791a596a)
2021-05-14T20:24:53.5596045+07:00 0HM8MRBPS00GC:00000093 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:53.5598859+07:00 0HM8MRBPS00GC:00000093 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:53.5600800+07:00 0HM8MRBPS00GC:00000093 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.4727ms (791a596a)
2021-05-14T20:24:53.5635830+07:00 0HM8MRBPS00GC:00000095 [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:24:53.5636639+07:00 0HM8MRBPS00GC:00000095 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:53.5638719+07:00 0HM8MRBPS00GC:00000095 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:53.5639658+07:00 0HM8MRBPS00GC:00000095 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:24:53.5639938+07:00 0HM8MRBPS00GC:00000095 [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:24:53.5640591+07:00 0HM8MRBPS00GC:00000095 [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:24:53.5643987+07:00 0HM8MRBPS00GC:00000095 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:53.5652784+07:00 0HM8MRBPS00GC:00000095 [INF] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:24:53.5662928+07:00 0HM8MRBPS00GC:00000095 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:53.5678962+07:00 0HM8MRBPS00GC:00000095 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:53.5681312+07:00 0HM8MRBPS00GC:00000095 [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 4.0414ms (afa2e885)
2021-05-14T20:24:53.5681803+07:00 0HM8MRBPS00GC:00000095 [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:24:53.5682664+07:00 0HM8MRBPS00GC:00000095 [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 4.6903ms (791a596a)
2021-05-14T20:24:55.5711966+07:00 0HM8MRBPS00GC:00000097 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:24:55.5713234+07:00 0HM8MRBPS00GC:00000097 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:55.5714631+07:00 0HM8MRBPS00GC:00000097 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages/thread/joan - - - 204 - - 0.2702ms (791a596a)
2021-05-14T20:24:55.5744014+07:00 0HM8MRBPS00GC:00000099 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - (ca22a1cb)
2021-05-14T20:24:55.5745445+07:00 0HM8MRBPS00GC:00000099 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:24:55.5747579+07:00 0HM8MRBPS00GC:00000099 [INF] Successfully validated the token. (60169667)
2021-05-14T20:24:55.5753083+07:00 0HM8MRBPS00GC:00000099 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-05-14T20:24:55.5754048+07:00 0HM8MRBPS00GC:00000099 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:24:55.5758811+07:00 0HM8MRBPS00GC:00000099 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:24:55.5779804+07:00 0HM8MRBPS00GC:00000099 [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:24:55.5794807+07:00 0HM8MRBPS00GC:00000099 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:24:55.5796453+07:00 0HM8MRBPS00GC:00000099 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 4.193ms (afa2e885)
2021-05-14T20:24:55.5796774+07:00 0HM8MRBPS00GC:00000099 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-05-14T20:24:55.5797733+07:00 0HM8MRBPS00GC:00000099 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages/thread/joan - - - 200 - application/json;+charset=utf-8 5.3735ms (791a596a)
2021-05-14T20:25:01.3827639+07:00 0HM8MRBPS00GC:0000009B [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:25:01.3828947+07:00 0HM8MRBPS00GC:0000009B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:25:01.3830096+07:00 0HM8MRBPS00GC:0000009B [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/users - - - 204 - - 0.2543ms (791a596a)
2021-05-14T20:25:01.3862567+07:00 0HM8MRBPS00GC:0000009D [INF] Request starting HTTP/2 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-05-14T20:25:01.3865100+07:00 0HM8MRBPS00GC:0000009D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:25:01.3867166+07:00 0HM8MRBPS00GC:0000009D [INF] Successfully validated the token. (60169667)
2021-05-14T20:25:01.3868381+07:00 0HM8MRBPS00GC:0000009D [INF] Authorization was successful. (0d575a54)
2021-05-14T20:25:01.3868881+07:00 0HM8MRBPS00GC:0000009D [INF] Executing endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (500cc934)
2021-05-14T20:25:01.3869651+07:00 0HM8MRBPS00GC:0000009D [INF] Route matched with "{action = \"GetAllUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetAllUsers()" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:25:01.3872627+07:00 0HM8MRBPS00GC:0000009D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:25:01.3882823+07:00 0HM8MRBPS00GC:0000009D [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:25:01.3895088+07:00 0HM8MRBPS00GC:0000009D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[UserName], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))), [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [p0].[Id], [p0].[Url], [p0].[IsMain]
FROM [AspNetUsers] AS [a]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
ORDER BY [a].[Id], [p0].[Id]" (0723d8ff)
2021-05-14T20:25:01.3907608+07:00 0HM8MRBPS00GC:0000009D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:25:01.3910672+07:00 0HM8MRBPS00GC:0000009D [INF] Executed action "api.Controllers.UsersController.GetAllUsers (api)" in 4.0706ms (afa2e885)
2021-05-14T20:25:01.3911161+07:00 0HM8MRBPS00GC:0000009D [INF] Executed endpoint '"api.Controllers.UsersController.GetAllUsers (api)"' (99874f2b)
2021-05-14T20:25:01.3912401+07:00 0HM8MRBPS00GC:0000009D [INF] Request finished HTTP/2 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 5.0059ms (791a596a)
2021-05-14T20:27:58.9328142+07:00 0HM8MRBPS00GD:00000001 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:27:58.9329246+07:00 0HM8MRBPS00GD:00000001 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:27:58.9330540+07:00 0HM8MRBPS00GD:00000001 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 0.2499ms (791a596a)
2021-05-14T20:27:58.9357192+07:00 0HM8MRBPS00GD:00000003 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T20:27:58.9357909+07:00 0HM8MRBPS00GD:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:27:58.9359975+07:00 0HM8MRBPS00GD:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:27:58.9360430+07:00 0HM8MRBPS00GD:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T20:27:58.9361219+07:00 0HM8MRBPS00GD:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T20:27:58.9366936+07:00 0HM8MRBPS00GD:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:27:58.9450268+07:00 0HM8MRBPS00GD:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T20:27:58.9598810+07:00 0HM8MRBPS00GD:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T20:27:58.9600759+07:00 0HM8MRBPS00GD:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T20:27:58.9601831+07:00 0HM8MRBPS00GD:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 24.0325ms (afa2e885)
2021-05-14T20:27:58.9602381+07:00 0HM8MRBPS00GD:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T20:27:58.9603519+07:00 0HM8MRBPS00GD:00000003 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 24.6314ms (791a596a)
2021-05-14T20:29:01.9033383+07:00 0HM8MRBPS00GE:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:29:01.9036213+07:00 0HM8MRBPS00GE:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:29:01.9039373+07:00 0HM8MRBPS00GE:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.6306ms (791a596a)
2021-05-14T20:29:01.9108938+07:00 0HM8MRBPS00GE:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:29:01.9133490+07:00 0HM8MRBPS00GE:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:29:01.9137679+07:00 0HM8MRBPS00GE:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:29:01.9138826+07:00 0HM8MRBPS00GE:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:29:01.9139094+07:00 0HM8MRBPS00GE:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T20:29:01.9193943+07:00 0HM8MRBPS00GE:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:29:01.9219184+07:00 0HM8MRBPS00GE:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:29:01.9404265+07:00 0HM8MRBPS00GE:00000003 [INF] Executed DbCommand ("18"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:29:01.9610200+07:00 0HM8MRBPS00GE:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T20:29:01.9613609+07:00 0HM8MRBPS00GE:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 41.9199ms (afa2e885)
2021-05-14T20:29:01.9613967+07:00 0HM8MRBPS00GE:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T20:29:01.9615206+07:00 0HM8MRBPS00GE:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 50.6314ms (791a596a)
2021-05-14T20:34:32.5639047+07:00 0HM8MRBPS00GF:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:34:32.5640532+07:00 0HM8MRBPS00GF:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:34:32.5642549+07:00 0HM8MRBPS00GF:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.3612ms (791a596a)
2021-05-14T20:34:33.0580208+07:00 0HM8MRBPS00GF:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:34:33.0584756+07:00 0HM8MRBPS00GF:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:34:33.0593303+07:00 0HM8MRBPS00GF:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:34:33.0594420+07:00 0HM8MRBPS00GF:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:34:33.0596182+07:00 0HM8MRBPS00GF:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T20:34:33.0598330+07:00 0HM8MRBPS00GF:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:34:33.0610651+07:00 0HM8MRBPS00GF:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:34:47.9022438+07:00 0HM8MRBPS00GF:00000003 [INF] Executed DbCommand ("1,791"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:34:47.9039065+07:00 0HM8MRBPS00GF:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T20:34:47.9044879+07:00 0HM8MRBPS00GF:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 14844.5732ms (afa2e885)
2021-05-14T20:34:47.9046111+07:00 0HM8MRBPS00GF:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T20:34:47.9048491+07:00 0HM8MRBPS00GF:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 14846.9041ms (791a596a)
2021-05-14T20:35:49.9091782+07:00 0HM8MRBPS00GF:00000004 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:35:49.9097763+07:00 0HM8MRBPS00GF:00000004 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:35:49.9099591+07:00 0HM8MRBPS00GF:00000004 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.7917ms (791a596a)
2021-05-14T20:35:49.9138099+07:00 0HM8MRBPS00GF:00000005 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users/raymond application/json;charset=UTF-8 509 (ca22a1cb)
2021-05-14T20:35:49.9138859+07:00 0HM8MRBPS00GF:00000005 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:35:49.9140888+07:00 0HM8MRBPS00GF:00000005 [INF] Successfully validated the token. (60169667)
2021-05-14T20:35:49.9141479+07:00 0HM8MRBPS00GF:00000005 [INF] Executing endpoint '"405 HTTP Method Not Supported"' (500cc934)
2021-05-14T20:35:49.9143353+07:00 0HM8MRBPS00GF:00000005 [INF] Executed endpoint '"405 HTTP Method Not Supported"' (99874f2b)
2021-05-14T20:35:49.9144457+07:00 0HM8MRBPS00GF:00000005 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users/raymond application/json;charset=UTF-8 509 - 405 0 - 0.6505ms (791a596a)
2021-05-14T20:37:18.9170868+07:00 0HM8MRBPS00GH:00000002 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json 147 (ca22a1cb)
2021-05-14T20:37:18.9176112+07:00 0HM8MRBPS00GH:00000002 [INF] Successfully validated the token. (60169667)
2021-05-14T20:37:18.9177838+07:00 0HM8MRBPS00GH:00000002 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:37:18.9178398+07:00 0HM8MRBPS00GH:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T20:37:18.9235900+07:00 0HM8MRBPS00GH:00000002 [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:37:18.9706271+07:00 0HM8MRBPS00GH:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:37:19.3963520+07:00 0HM8MRBPS00GH:00000002 [INF] Executed DbCommand ("91"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:37:19.5020468+07:00 0HM8MRBPS00GH:00000002 [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 578.3811ms (afa2e885)
2021-05-14T20:37:19.5022155+07:00 0HM8MRBPS00GH:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T20:37:19.6971774+07:00 0HM8MRBPS00GH:00000002 [ERR] The property 'AppUsers.Id' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal. (a36a409d)
System.InvalidOperationException: The property 'AppUsers.Id' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetPropertyModified(IProperty property, Boolean changeState, Boolean isModified, Boolean isConceptualNull, Boolean acceptChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.<LocalDetectChanges>g__SetPropertyModified|12_0(<>c__DisplayClass12_0& , <>c__DisplayClass12_1& , <>c__DisplayClass12_2& )
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry, HashSet`1 visited)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.DetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges(EntityEntry entry)
   at Microsoft.EntityFrameworkCore.DbContext.Entry[TEntity](TEntity entity)
   at api.Data.UserRepository.Update(AppUsers user) in C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api\Data\UserRepository.cs:line 82
   at api.Controllers.UsersController.UpdateUser(MemberDto memberDto) in C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api\Controllers\UsersController.cs:line 96
   at lambda_method486(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api\Middleware\ExceptionMiddleware.cs:line 29
2021-05-14T20:37:19.7134512+07:00 0HM8MRBPS00GH:00000002 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json 147 - 500 - application/json 796.3906ms (791a596a)
2021-05-14T20:38:03.7016151+07:00 0HM8MRBPS00GI:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:38:03.7016894+07:00 0HM8MRBPS00GI:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:38:03.7018002+07:00 0HM8MRBPS00GI:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.1952ms (791a596a)
2021-05-14T20:38:03.7051573+07:00 0HM8MRBPS00GI:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:38:03.7052385+07:00 0HM8MRBPS00GI:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:38:03.7058645+07:00 0HM8MRBPS00GI:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:38:03.7059559+07:00 0HM8MRBPS00GI:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:38:03.7059860+07:00 0HM8MRBPS00GI:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T20:38:03.7060609+07:00 0HM8MRBPS00GI:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:38:03.7071530+07:00 0HM8MRBPS00GI:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:38:03.7467986+07:00 0HM8MRBPS00GI:00000003 [INF] Executed DbCommand ("39"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:38:03.7474132+07:00 0HM8MRBPS00GI:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T20:38:03.7475636+07:00 0HM8MRBPS00GI:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 41.4723ms (afa2e885)
2021-05-14T20:38:03.7475924+07:00 0HM8MRBPS00GI:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T20:38:03.7476742+07:00 0HM8MRBPS00GI:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 42.5163ms (791a596a)
2021-05-14T20:43:10.4023523+07:00 0HM8MRBPS00GJ:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:43:10.4025654+07:00 0HM8MRBPS00GJ:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:43:10.4026982+07:00 0HM8MRBPS00GJ:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.3530ms (791a596a)
2021-05-14T20:43:10.4089189+07:00 0HM8MRBPS00GJ:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:43:10.4089937+07:00 0HM8MRBPS00GJ:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:43:10.4092778+07:00 0HM8MRBPS00GJ:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:43:10.4093756+07:00 0HM8MRBPS00GJ:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:43:10.4094061+07:00 0HM8MRBPS00GJ:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T20:43:10.4094960+07:00 0HM8MRBPS00GJ:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:43:10.4104145+07:00 0HM8MRBPS00GJ:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:43:10.9299731+07:00 0HM8MRBPS00GJ:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:43:10.9310521+07:00 0HM8MRBPS00GJ:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T20:43:10.9317935+07:00 0HM8MRBPS00GJ:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 522.2346ms (afa2e885)
2021-05-14T20:43:10.9318795+07:00 0HM8MRBPS00GJ:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T20:43:10.9320713+07:00 0HM8MRBPS00GJ:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 523.1117ms (791a596a)
2021-05-14T20:51:36.6071527+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:51:37.2999762+07:00  [INF] Executed DbCommand ("36"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:51:37.3491514+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:51:37.3552243+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:51:37.3562937+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:51:37.4013470+07:00  [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-05-14T20:51:37.4432220+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-05-14T20:51:37.7458574+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-05-14T20:51:37.7718537+07:00  [INF] User profile is available. Using '"C:\Users\NguyenKhanh\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-05-14T20:51:37.9800325+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-05-14T20:51:37.9801570+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-05-14T20:51:37.9803217+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-05-14T20:51:37.9803647+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-05-14T20:51:37.9804092+07:00  [INF] Content root path: "C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api" (b5d60022)
2021-05-14T20:51:50.7100185+07:00 0HM8MRTMAROD6:00000002 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json 147 (ca22a1cb)
2021-05-14T20:51:50.9663863+07:00 0HM8MRTMAROD6:00000002 [INF] Successfully validated the token. (60169667)
2021-05-14T20:51:50.9749277+07:00 0HM8MRTMAROD6:00000002 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:51:50.9757024+07:00 0HM8MRTMAROD6:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T20:51:51.0096788+07:00 0HM8MRTMAROD6:00000002 [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:51:51.2593779+07:00 0HM8MRTMAROD6:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:51:51.7989689+07:00 0HM8MRTMAROD6:00000002 [INF] Executed DbCommand ("287"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:51:52.6553875+07:00 0HM8MRTMAROD6:00000002 [INF] Executed DbCommand ("444"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T20:51:52.7206721+07:00 0HM8MRTMAROD6:00000002 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T20:51:52.7286758+07:00 0HM8MRTMAROD6:00000002 [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 1711.9839ms (afa2e885)
2021-05-14T20:51:52.7293568+07:00 0HM8MRTMAROD6:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T20:51:52.7404787+07:00 0HM8MRTMAROD6:00000002 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json 147 - 204 - - 2033.2934ms (791a596a)
2021-05-14T20:55:20.8660654+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:55:21.5310381+07:00  [INF] Executed DbCommand ("54"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:55:21.6841250+07:00  [INF] Executed DbCommand ("121"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:55:21.6920481+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-05-14T20:55:21.6930676+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-05-14T20:55:21.7087868+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-05-14T20:55:21.7408623+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-05-14T20:55:22.0708113+07:00  [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-05-14T20:55:22.1005833+07:00  [INF] User profile is available. Using '"C:\Users\NguyenKhanh\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-05-14T20:55:22.3367683+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-05-14T20:55:22.3369035+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-05-14T20:55:22.3370816+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-05-14T20:55:22.3371295+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-05-14T20:55:22.3371730+07:00  [INF] Content root path: "C:\Users\NguyenKhanh\Desktop\ChatApp\ChatAppBE\chat-backend\api" (b5d60022)
2021-05-14T20:55:57.2844751+07:00 0HM8MRVVPAGV3:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:55:57.3706803+07:00 0HM8MRVVPAGV3:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:55:57.3789458+07:00 0HM8MRVVPAGV3:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 99.3667ms (791a596a)
2021-05-14T20:55:57.3988562+07:00 0HM8MRVVPAGV3:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T20:55:57.4040140+07:00 0HM8MRVVPAGV3:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T20:55:57.7174783+07:00 0HM8MRVVPAGV3:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T20:55:57.7268246+07:00 0HM8MRVVPAGV3:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T20:55:57.7281696+07:00 0HM8MRVVPAGV3:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T20:55:57.7775725+07:00 0HM8MRVVPAGV3:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T20:55:58.1151161+07:00 0HM8MRVVPAGV3:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T20:55:58.5597882+07:00 0HM8MRVVPAGV3:00000003 [INF] Executed DbCommand ("121"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T20:55:58.8731981+07:00 0HM8MRVVPAGV3:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T20:55:58.9467224+07:00 0HM8MRVVPAGV3:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 1161.1065ms (afa2e885)
2021-05-14T20:55:58.9474942+07:00 0HM8MRVVPAGV3:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T20:55:58.9616163+07:00 0HM8MRVVPAGV3:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 1562.7202ms (791a596a)
2021-05-14T21:05:04.2563816+07:00 0HM8MRVVPAGV4:00000001 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T21:05:04.2575266+07:00 0HM8MRVVPAGV4:00000001 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:04.2636763+07:00 0HM8MRVVPAGV4:00000001 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 204 - - 7.2486ms (791a596a)
2021-05-14T21:05:04.2709826+07:00 0HM8MRVVPAGV4:00000003 [INF] Request starting HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - (ca22a1cb)
2021-05-14T21:05:04.2712938+07:00 0HM8MRVVPAGV4:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:04.2729727+07:00 0HM8MRVVPAGV4:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T21:05:04.2736668+07:00 0HM8MRVVPAGV4:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-05-14T21:05:04.2938602+07:00 0HM8MRVVPAGV4:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-05-14T21:05:04.3970433+07:00 0HM8MRVVPAGV4:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:05:04.7816933+07:00 0HM8MRVVPAGV4:00000003 [INF] Executed DbCommand ("27"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-05-14T21:05:04.8837332+07:00 0HM8MRVVPAGV4:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-05-14T21:05:04.8964800+07:00 0HM8MRVVPAGV4:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-05-14T21:05:04.9053590+07:00 0HM8MRVVPAGV4:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 611.3315ms (afa2e885)
2021-05-14T21:05:04.9054310+07:00 0HM8MRVVPAGV4:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-05-14T21:05:04.9060106+07:00 0HM8MRVVPAGV4:00000003 [INF] Request finished HTTP/2 GET https://localhost:5001/api/messages?Username=raymond&Container=Inbox - - - 200 - application/json;+charset=utf-8 635.0226ms (791a596a)
2021-05-14T21:05:14.8626750+07:00 0HM8MRVVPAGV5:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:05:14.8630173+07:00 0HM8MRVVPAGV5:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:14.8634155+07:00 0HM8MRVVPAGV5:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.7220ms (791a596a)
2021-05-14T21:05:14.8708084+07:00 0HM8MRVVPAGV5:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:05:14.8711772+07:00 0HM8MRVVPAGV5:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:14.8792012+07:00 0HM8MRVVPAGV5:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T21:05:14.8820525+07:00 0HM8MRVVPAGV5:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:05:14.8824805+07:00 0HM8MRVVPAGV5:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:05:14.8829997+07:00 0HM8MRVVPAGV5:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:05:14.8918612+07:00 0HM8MRVVPAGV5:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:05:14.9425106+07:00 0HM8MRVVPAGV5:00000003 [INF] Executed DbCommand ("39"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:05:14.9452631+07:00 0HM8MRVVPAGV5:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:05:14.9460980+07:00 0HM8MRVVPAGV5:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 62.9656ms (afa2e885)
2021-05-14T21:05:14.9463539+07:00 0HM8MRVVPAGV5:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:05:14.9466855+07:00 0HM8MRVVPAGV5:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 75.8471ms (791a596a)
2021-05-14T21:05:17.6179298+07:00 0HM8MRVVPAGV5:00000004 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:05:17.6181958+07:00 0HM8MRVVPAGV5:00000004 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:17.6184159+07:00 0HM8MRVVPAGV5:00000004 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.4833ms (791a596a)
2021-05-14T21:05:17.6207303+07:00 0HM8MRVVPAGV5:00000005 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:05:17.6210278+07:00 0HM8MRVVPAGV5:00000005 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:17.6213267+07:00 0HM8MRVVPAGV5:00000005 [INF] Successfully validated the token. (60169667)
2021-05-14T21:05:17.6221600+07:00 0HM8MRVVPAGV5:00000005 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:05:17.6224158+07:00 0HM8MRVVPAGV5:00000005 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:05:17.6225521+07:00 0HM8MRVVPAGV5:00000005 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:05:17.6239117+07:00 0HM8MRVVPAGV5:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:05:17.6272633+07:00 0HM8MRVVPAGV5:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:05:17.6278147+07:00 0HM8MRVVPAGV5:00000005 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:05:17.6280477+07:00 0HM8MRVVPAGV5:00000005 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 5.4582ms (afa2e885)
2021-05-14T21:05:17.6281390+07:00 0HM8MRVVPAGV5:00000005 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:05:17.6283048+07:00 0HM8MRVVPAGV5:00000005 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 7.5456ms (791a596a)
2021-05-14T21:05:35.8696080+07:00 0HM8MRVVPAGV5:00000006 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users} - - (ca22a1cb)
2021-05-14T21:05:35.8697180+07:00 0HM8MRVVPAGV5:00000006 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:35.8699559+07:00 0HM8MRVVPAGV5:00000006 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users} - - - 204 - - 0.3347ms (791a596a)
2021-05-14T21:05:35.8726643+07:00 0HM8MRVVPAGV5:00000007 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users} application/json;charset=UTF-8 121 (ca22a1cb)
2021-05-14T21:05:35.8727472+07:00 0HM8MRVVPAGV5:00000007 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:35.8730929+07:00 0HM8MRVVPAGV5:00000007 [INF] Successfully validated the token. (60169667)
2021-05-14T21:05:35.8734436+07:00 0HM8MRVVPAGV5:00000007 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users} application/json;charset=UTF-8 121 - 404 0 - 0.7349ms (791a596a)
2021-05-14T21:05:46.1403155+07:00 0HM8MRVVPAGV5:00000008 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:05:46.1406199+07:00 0HM8MRVVPAGV5:00000008 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:46.1407834+07:00 0HM8MRVVPAGV5:00000008 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.4350ms (791a596a)
2021-05-14T21:05:46.1447716+07:00 0HM8MRVVPAGV5:00000009 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:05:46.1448688+07:00 0HM8MRVVPAGV5:00000009 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:46.1451560+07:00 0HM8MRVVPAGV5:00000009 [INF] Successfully validated the token. (60169667)
2021-05-14T21:05:46.1452512+07:00 0HM8MRVVPAGV5:00000009 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:05:46.1452949+07:00 0HM8MRVVPAGV5:00000009 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:05:46.1454062+07:00 0HM8MRVVPAGV5:00000009 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:05:46.1482107+07:00 0HM8MRVVPAGV5:00000009 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:05:46.1851670+07:00 0HM8MRVVPAGV5:00000009 [INF] Executed DbCommand ("36"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:05:46.1859435+07:00 0HM8MRVVPAGV5:00000009 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:05:46.1861688+07:00 0HM8MRVVPAGV5:00000009 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 40.7269ms (afa2e885)
2021-05-14T21:05:46.1862058+07:00 0HM8MRVVPAGV5:00000009 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:05:46.1863135+07:00 0HM8MRVVPAGV5:00000009 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 41.5318ms (791a596a)
2021-05-14T21:05:49.1121580+07:00 0HM8MRVVPAGV5:0000000A [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users - - (ca22a1cb)
2021-05-14T21:05:49.1147268+07:00 0HM8MRVVPAGV5:0000000A [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:49.1148942+07:00 0HM8MRVVPAGV5:0000000A [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users - - - 204 - - 2.7241ms (791a596a)
2021-05-14T21:05:49.1177212+07:00 0HM8MRVVPAGV5:0000000B [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 130 (ca22a1cb)
2021-05-14T21:05:49.1178250+07:00 0HM8MRVVPAGV5:0000000B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:49.1180905+07:00 0HM8MRVVPAGV5:0000000B [INF] Successfully validated the token. (60169667)
2021-05-14T21:05:49.1181986+07:00 0HM8MRVVPAGV5:0000000B [INF] Authorization was successful. (0d575a54)
2021-05-14T21:05:49.1182358+07:00 0HM8MRVVPAGV5:0000000B [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T21:05:49.1239943+07:00 0HM8MRVVPAGV5:0000000B [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:05:49.1439064+07:00 0HM8MRVVPAGV5:0000000B [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:05:49.1450399+07:00 0HM8MRVVPAGV5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:05:49.4429221+07:00 0HM8MRVVPAGV5:0000000B [INF] Executed DbCommand ("14"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T21:05:49.5052830+07:00 0HM8MRVVPAGV5:0000000B [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T21:05:49.5053889+07:00 0HM8MRVVPAGV5:0000000B [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 381.3471ms (afa2e885)
2021-05-14T21:05:49.5054278+07:00 0HM8MRVVPAGV5:0000000B [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T21:05:49.5055922+07:00 0HM8MRVVPAGV5:0000000B [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 130 - 204 - - 387.8751ms (791a596a)
2021-05-14T21:05:49.5349031+07:00 0HM8MRVVPAGV5:0000000C [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:05:49.5349876+07:00 0HM8MRVVPAGV5:0000000C [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:49.5352565+07:00 0HM8MRVVPAGV5:0000000C [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.3352ms (791a596a)
2021-05-14T21:05:49.5425846+07:00 0HM8MRVVPAGV5:0000000D [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:05:49.5426683+07:00 0HM8MRVVPAGV5:0000000D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:05:49.5436287+07:00 0HM8MRVVPAGV5:0000000D [INF] Successfully validated the token. (60169667)
2021-05-14T21:05:49.5437624+07:00 0HM8MRVVPAGV5:0000000D [INF] Authorization was successful. (0d575a54)
2021-05-14T21:05:49.5437953+07:00 0HM8MRVVPAGV5:0000000D [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:05:49.5438999+07:00 0HM8MRVVPAGV5:0000000D [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:05:49.5445822+07:00 0HM8MRVVPAGV5:0000000D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:05:49.5496819+07:00 0HM8MRVVPAGV5:0000000D [INF] Executed DbCommand ("4"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:05:49.5502037+07:00 0HM8MRVVPAGV5:0000000D [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:05:49.5503602+07:00 0HM8MRVVPAGV5:0000000D [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 6.414ms (afa2e885)
2021-05-14T21:05:49.5503967+07:00 0HM8MRVVPAGV5:0000000D [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:05:49.5505145+07:00 0HM8MRVVPAGV5:0000000D [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 7.9231ms (791a596a)
2021-05-14T21:07:26.3199134+07:00 0HM8MRVVPAGV5:0000000E [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users - - (ca22a1cb)
2021-05-14T21:07:26.3202155+07:00 0HM8MRVVPAGV5:0000000E [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:07:26.3204222+07:00 0HM8MRVVPAGV5:0000000E [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users - - - 204 - - 0.4845ms (791a596a)
2021-05-14T21:07:26.3293653+07:00 0HM8MRVVPAGV5:0000000F [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 121 (ca22a1cb)
2021-05-14T21:07:26.3296067+07:00 0HM8MRVVPAGV5:0000000F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:07:26.3300663+07:00 0HM8MRVVPAGV5:0000000F [INF] Successfully validated the token. (60169667)
2021-05-14T21:07:26.3301982+07:00 0HM8MRVVPAGV5:0000000F [INF] Authorization was successful. (0d575a54)
2021-05-14T21:07:26.3302666+07:00 0HM8MRVVPAGV5:0000000F [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T21:07:26.3304100+07:00 0HM8MRVVPAGV5:0000000F [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:07:26.3316527+07:00 0HM8MRVVPAGV5:0000000F [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:07:26.3505936+07:00 0HM8MRVVPAGV5:0000000F [INF] Executed DbCommand ("18"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:07:26.3650554+07:00 0HM8MRVVPAGV5:0000000F [INF] Executed DbCommand ("9"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T21:07:26.4190559+07:00 0HM8MRVVPAGV5:0000000F [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T21:07:26.4191516+07:00 0HM8MRVVPAGV5:0000000F [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 88.6932ms (afa2e885)
2021-05-14T21:07:26.4192493+07:00 0HM8MRVVPAGV5:0000000F [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T21:07:26.4194585+07:00 0HM8MRVVPAGV5:0000000F [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 121 - 204 - - 90.0805ms (791a596a)
2021-05-14T21:07:26.4592151+07:00 0HM8MRVVPAGV5:00000010 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:07:26.4596663+07:00 0HM8MRVVPAGV5:00000010 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:07:26.4598627+07:00 0HM8MRVVPAGV5:00000010 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.8748ms (791a596a)
2021-05-14T21:07:26.4651996+07:00 0HM8MRVVPAGV5:00000011 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:07:26.4656134+07:00 0HM8MRVVPAGV5:00000011 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:07:26.4662671+07:00 0HM8MRVVPAGV5:00000011 [INF] Successfully validated the token. (60169667)
2021-05-14T21:07:26.4663912+07:00 0HM8MRVVPAGV5:00000011 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:07:26.4664589+07:00 0HM8MRVVPAGV5:00000011 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:07:26.4666091+07:00 0HM8MRVVPAGV5:00000011 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:07:26.4673203+07:00 0HM8MRVVPAGV5:00000011 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:07:26.4691898+07:00 0HM8MRVVPAGV5:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:07:26.4699507+07:00 0HM8MRVVPAGV5:00000011 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:07:26.4702506+07:00 0HM8MRVVPAGV5:00000011 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 3.5865ms (afa2e885)
2021-05-14T21:07:26.4703808+07:00 0HM8MRVVPAGV5:00000011 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:07:26.4705502+07:00 0HM8MRVVPAGV5:00000011 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 5.3545ms (791a596a)
2021-05-14T21:09:23.7496625+07:00 0HM8MRVVPAGV5:00000012 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users - - (ca22a1cb)
2021-05-14T21:09:23.7498476+07:00 0HM8MRVVPAGV5:00000012 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:09:23.7499878+07:00 0HM8MRVVPAGV5:00000012 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users - - - 204 - - 0.3478ms (791a596a)
2021-05-14T21:09:23.7541227+07:00 0HM8MRVVPAGV5:00000013 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 121 (ca22a1cb)
2021-05-14T21:09:23.7543107+07:00 0HM8MRVVPAGV5:00000013 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:09:23.7551757+07:00 0HM8MRVVPAGV5:00000013 [INF] Successfully validated the token. (60169667)
2021-05-14T21:09:23.7553853+07:00 0HM8MRVVPAGV5:00000013 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:09:23.7554491+07:00 0HM8MRVVPAGV5:00000013 [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T21:09:23.7556351+07:00 0HM8MRVVPAGV5:00000013 [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:09:23.7569530+07:00 0HM8MRVVPAGV5:00000013 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:09:23.7676986+07:00 0HM8MRVVPAGV5:00000013 [INF] Executed DbCommand ("10"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:09:23.7872757+07:00 0HM8MRVVPAGV5:00000013 [INF] Executed DbCommand ("17"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T21:09:23.7891654+07:00 0HM8MRVVPAGV5:00000013 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T21:09:23.7893149+07:00 0HM8MRVVPAGV5:00000013 [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 33.6126ms (afa2e885)
2021-05-14T21:09:23.7894432+07:00 0HM8MRVVPAGV5:00000013 [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T21:09:23.7896189+07:00 0HM8MRVVPAGV5:00000013 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 121 - 204 - - 35.4902ms (791a596a)
2021-05-14T21:09:23.8290782+07:00 0HM8MRVVPAGV5:00000014 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:09:23.8293115+07:00 0HM8MRVVPAGV5:00000014 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:09:23.8294005+07:00 0HM8MRVVPAGV5:00000014 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.3279ms (791a596a)
2021-05-14T21:09:23.8333415+07:00 0HM8MRVVPAGV5:00000015 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:09:23.8334551+07:00 0HM8MRVVPAGV5:00000015 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:09:23.8336895+07:00 0HM8MRVVPAGV5:00000015 [INF] Successfully validated the token. (60169667)
2021-05-14T21:09:23.8337747+07:00 0HM8MRVVPAGV5:00000015 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:09:23.8338092+07:00 0HM8MRVVPAGV5:00000015 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:09:23.8339336+07:00 0HM8MRVVPAGV5:00000015 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:09:23.8344789+07:00 0HM8MRVVPAGV5:00000015 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:09:23.8355259+07:00 0HM8MRVVPAGV5:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:09:23.8363786+07:00 0HM8MRVVPAGV5:00000015 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:09:23.8366006+07:00 0HM8MRVVPAGV5:00000015 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 2.6312ms (afa2e885)
2021-05-14T21:09:23.8366364+07:00 0HM8MRVVPAGV5:00000015 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:09:23.8367384+07:00 0HM8MRVVPAGV5:00000015 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 3.3855ms (791a596a)
2021-05-14T21:10:01.8372989+07:00 0HM8MRVVPAGV5:00000016 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:10:01.8374269+07:00 0HM8MRVVPAGV5:00000016 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:10:01.8375553+07:00 0HM8MRVVPAGV5:00000016 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.2546ms (791a596a)
2021-05-14T21:10:01.9290407+07:00 0HM8MRVVPAGV5:00000017 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:10:01.9291684+07:00 0HM8MRVVPAGV5:00000017 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:10:01.9295341+07:00 0HM8MRVVPAGV5:00000017 [INF] Successfully validated the token. (60169667)
2021-05-14T21:10:01.9296862+07:00 0HM8MRVVPAGV5:00000017 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:10:01.9297343+07:00 0HM8MRVVPAGV5:00000017 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:10:01.9298518+07:00 0HM8MRVVPAGV5:00000017 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:10:01.9313695+07:00 0HM8MRVVPAGV5:00000017 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:10:01.9703261+07:00 0HM8MRVVPAGV5:00000017 [INF] Executed DbCommand ("38"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:10:01.9708477+07:00 0HM8MRVVPAGV5:00000017 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:10:01.9710031+07:00 0HM8MRVVPAGV5:00000017 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 41.1096ms (afa2e885)
2021-05-14T21:10:01.9710376+07:00 0HM8MRVVPAGV5:00000017 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:10:01.9711027+07:00 0HM8MRVVPAGV5:00000017 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 42.0779ms (791a596a)
2021-05-14T21:10:59.7884485+07:00 0HM8MRVVPAGV5:00000018 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users - - (ca22a1cb)
2021-05-14T21:10:59.7886269+07:00 0HM8MRVVPAGV5:00000018 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:10:59.7887448+07:00 0HM8MRVVPAGV5:00000018 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users - - - 204 - - 0.3440ms (791a596a)
2021-05-14T21:10:59.7924780+07:00 0HM8MRVVPAGV5:00000019 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 121 (ca22a1cb)
2021-05-14T21:10:59.7925834+07:00 0HM8MRVVPAGV5:00000019 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:10:59.7929054+07:00 0HM8MRVVPAGV5:00000019 [INF] Successfully validated the token. (60169667)
2021-05-14T21:10:59.7930287+07:00 0HM8MRVVPAGV5:00000019 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:10:59.7930737+07:00 0HM8MRVVPAGV5:00000019 [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T21:10:59.7931985+07:00 0HM8MRVVPAGV5:00000019 [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:10:59.7942196+07:00 0HM8MRVVPAGV5:00000019 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:10:59.8040542+07:00 0HM8MRVVPAGV5:00000019 [INF] Executed DbCommand ("9"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:10:59.8195391+07:00 0HM8MRVVPAGV5:00000019 [INF] Executed DbCommand ("13"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T21:10:59.8274548+07:00 0HM8MRVVPAGV5:00000019 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T21:10:59.8275303+07:00 0HM8MRVVPAGV5:00000019 [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 34.2941ms (afa2e885)
2021-05-14T21:10:59.8275898+07:00 0HM8MRVVPAGV5:00000019 [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T21:10:59.8277320+07:00 0HM8MRVVPAGV5:00000019 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 121 - 204 - - 35.2575ms (791a596a)
2021-05-14T21:10:59.8553188+07:00 0HM8MRVVPAGV5:0000001A [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:10:59.8554074+07:00 0HM8MRVVPAGV5:0000001A [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:10:59.8554783+07:00 0HM8MRVVPAGV5:0000001A [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.1751ms (791a596a)
2021-05-14T21:10:59.8779383+07:00 0HM8MRVVPAGV5:0000001B [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:10:59.8780227+07:00 0HM8MRVVPAGV5:0000001B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:10:59.8782702+07:00 0HM8MRVVPAGV5:0000001B [INF] Successfully validated the token. (60169667)
2021-05-14T21:10:59.8783481+07:00 0HM8MRVVPAGV5:0000001B [INF] Authorization was successful. (0d575a54)
2021-05-14T21:10:59.8783836+07:00 0HM8MRVVPAGV5:0000001B [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:10:59.8784781+07:00 0HM8MRVVPAGV5:0000001B [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:10:59.8789735+07:00 0HM8MRVVPAGV5:0000001B [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:10:59.8873824+07:00 0HM8MRVVPAGV5:0000001B [INF] Executed DbCommand ("8"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:10:59.8879223+07:00 0HM8MRVVPAGV5:0000001B [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:10:59.8881020+07:00 0HM8MRVVPAGV5:0000001B [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 9.5927ms (afa2e885)
2021-05-14T21:10:59.8881314+07:00 0HM8MRVVPAGV5:0000001B [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:10:59.8882088+07:00 0HM8MRVVPAGV5:0000001B [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 10.2802ms (791a596a)
2021-05-14T21:11:36.5483506+07:00 0HM8MRVVPAGV5:0000001C [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users - - (ca22a1cb)
2021-05-14T21:11:36.5486100+07:00 0HM8MRVVPAGV5:0000001C [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:11:36.5488932+07:00 0HM8MRVVPAGV5:0000001C [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users - - - 204 - - 0.5691ms (791a596a)
2021-05-14T21:11:36.5515795+07:00 0HM8MRVVPAGV5:0000001D [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 121 (ca22a1cb)
2021-05-14T21:11:36.5517997+07:00 0HM8MRVVPAGV5:0000001D [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:11:36.5529486+07:00 0HM8MRVVPAGV5:0000001D [INF] Successfully validated the token. (60169667)
2021-05-14T21:11:36.5533498+07:00 0HM8MRVVPAGV5:0000001D [INF] Authorization was successful. (0d575a54)
2021-05-14T21:11:36.5534247+07:00 0HM8MRVVPAGV5:0000001D [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T21:11:36.5537166+07:00 0HM8MRVVPAGV5:0000001D [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:11:36.5558940+07:00 0HM8MRVVPAGV5:0000001D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:11:36.5673615+07:00 0HM8MRVVPAGV5:0000001D [INF] Executed DbCommand ("10"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:11:36.5890964+07:00 0HM8MRVVPAGV5:0000001D [INF] Executed DbCommand ("13"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T21:11:36.5904639+07:00 0HM8MRVVPAGV5:0000001D [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T21:11:36.5905647+07:00 0HM8MRVVPAGV5:0000001D [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 36.7844ms (afa2e885)
2021-05-14T21:11:36.5906131+07:00 0HM8MRVVPAGV5:0000001D [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T21:11:36.5908206+07:00 0HM8MRVVPAGV5:0000001D [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 121 - 204 - - 39.2464ms (791a596a)
2021-05-14T21:11:36.6115175+07:00 0HM8MRVVPAGV5:0000001E [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:11:36.6117123+07:00 0HM8MRVVPAGV5:0000001E [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:11:36.6119091+07:00 0HM8MRVVPAGV5:0000001E [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.4117ms (791a596a)
2021-05-14T21:11:36.6155592+07:00 0HM8MRVVPAGV5:0000001F [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:11:36.6156309+07:00 0HM8MRVVPAGV5:0000001F [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:11:36.6158485+07:00 0HM8MRVVPAGV5:0000001F [INF] Successfully validated the token. (60169667)
2021-05-14T21:11:36.6159348+07:00 0HM8MRVVPAGV5:0000001F [INF] Authorization was successful. (0d575a54)
2021-05-14T21:11:36.6159621+07:00 0HM8MRVVPAGV5:0000001F [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:11:36.6160638+07:00 0HM8MRVVPAGV5:0000001F [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:11:36.6166591+07:00 0HM8MRVVPAGV5:0000001F [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:11:36.6181579+07:00 0HM8MRVVPAGV5:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:11:36.6187593+07:00 0HM8MRVVPAGV5:0000001F [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:11:36.6191861+07:00 0HM8MRVVPAGV5:0000001F [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 3.0814ms (afa2e885)
2021-05-14T21:11:36.6192191+07:00 0HM8MRVVPAGV5:0000001F [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:11:36.6201496+07:00 0HM8MRVVPAGV5:0000001F [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 3.7446ms (791a596a)
2021-05-14T21:15:22.7829307+07:00 0HM8MRVVPAGV6:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:15:22.7830851+07:00 0HM8MRVVPAGV6:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:15:22.7832184+07:00 0HM8MRVVPAGV6:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.2859ms (791a596a)
2021-05-14T21:15:22.7867289+07:00 0HM8MRVVPAGV6:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:15:22.7868191+07:00 0HM8MRVVPAGV6:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:15:22.7872976+07:00 0HM8MRVVPAGV6:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T21:15:22.7875215+07:00 0HM8MRVVPAGV6:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:15:22.7875730+07:00 0HM8MRVVPAGV6:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:15:22.7877178+07:00 0HM8MRVVPAGV6:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:15:22.7883896+07:00 0HM8MRVVPAGV6:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:15:22.7954779+07:00 0HM8MRVVPAGV6:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:15:22.7960417+07:00 0HM8MRVVPAGV6:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:15:22.7962107+07:00 0HM8MRVVPAGV6:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 8.4624ms (afa2e885)
2021-05-14T21:15:22.7962346+07:00 0HM8MRVVPAGV6:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:15:22.7962967+07:00 0HM8MRVVPAGV6:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 9.5648ms (791a596a)
2021-05-14T21:15:54.1747000+07:00 0HM8MRVVPAGV6:00000004 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users - - (ca22a1cb)
2021-05-14T21:15:54.1748070+07:00 0HM8MRVVPAGV6:00000004 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:15:54.1748922+07:00 0HM8MRVVPAGV6:00000004 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users - - - 204 - - 0.2035ms (791a596a)
2021-05-14T21:15:54.1775385+07:00 0HM8MRVVPAGV6:00000005 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 135 (ca22a1cb)
2021-05-14T21:15:54.1776300+07:00 0HM8MRVVPAGV6:00000005 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:15:54.1779338+07:00 0HM8MRVVPAGV6:00000005 [INF] Successfully validated the token. (60169667)
2021-05-14T21:15:54.1780540+07:00 0HM8MRVVPAGV6:00000005 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:15:54.1780996+07:00 0HM8MRVVPAGV6:00000005 [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T21:15:54.1782066+07:00 0HM8MRVVPAGV6:00000005 [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:15:54.1791043+07:00 0HM8MRVVPAGV6:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:15:54.1900740+07:00 0HM8MRVVPAGV6:00000005 [INF] Executed DbCommand ("10"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:15:54.2065919+07:00 0HM8MRVVPAGV6:00000005 [INF] Executed DbCommand ("15"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T21:15:54.2483371+07:00 0HM8MRVVPAGV6:00000005 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T21:15:54.2484677+07:00 0HM8MRVVPAGV6:00000005 [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 70.1875ms (afa2e885)
2021-05-14T21:15:54.2485165+07:00 0HM8MRVVPAGV6:00000005 [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T21:15:54.2487456+07:00 0HM8MRVVPAGV6:00000005 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 135 - 204 - - 71.1954ms (791a596a)
2021-05-14T21:15:54.2714576+07:00 0HM8MRVVPAGV6:00000006 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:15:54.2716184+07:00 0HM8MRVVPAGV6:00000006 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:15:54.2717266+07:00 0HM8MRVVPAGV6:00000006 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.2824ms (791a596a)
2021-05-14T21:15:54.2753535+07:00 0HM8MRVVPAGV6:00000007 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:15:54.2755545+07:00 0HM8MRVVPAGV6:00000007 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:15:54.2758788+07:00 0HM8MRVVPAGV6:00000007 [INF] Successfully validated the token. (60169667)
2021-05-14T21:15:54.2760240+07:00 0HM8MRVVPAGV6:00000007 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:15:54.2760881+07:00 0HM8MRVVPAGV6:00000007 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:15:54.2762316+07:00 0HM8MRVVPAGV6:00000007 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:15:54.2769934+07:00 0HM8MRVVPAGV6:00000007 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:15:54.2803811+07:00 0HM8MRVVPAGV6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:15:54.2812795+07:00 0HM8MRVVPAGV6:00000007 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:15:54.2817787+07:00 0HM8MRVVPAGV6:00000007 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 5.4648ms (afa2e885)
2021-05-14T21:15:54.2818378+07:00 0HM8MRVVPAGV6:00000007 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:15:54.2819981+07:00 0HM8MRVVPAGV6:00000007 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 6.6333ms (791a596a)
2021-05-14T21:16:41.8458374+07:00 0HM8MRVVPAGV6:00000008 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users - - (ca22a1cb)
2021-05-14T21:16:41.8460793+07:00 0HM8MRVVPAGV6:00000008 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:16:41.8461859+07:00 0HM8MRVVPAGV6:00000008 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users - - - 204 - - 0.3789ms (791a596a)
2021-05-14T21:16:41.8498969+07:00 0HM8MRVVPAGV6:00000009 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 135 (ca22a1cb)
2021-05-14T21:16:41.8499892+07:00 0HM8MRVVPAGV6:00000009 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:16:41.8510859+07:00 0HM8MRVVPAGV6:00000009 [INF] Successfully validated the token. (60169667)
2021-05-14T21:16:41.8512320+07:00 0HM8MRVVPAGV6:00000009 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:16:41.8512797+07:00 0HM8MRVVPAGV6:00000009 [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T21:16:41.8513934+07:00 0HM8MRVVPAGV6:00000009 [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:16:41.8522103+07:00 0HM8MRVVPAGV6:00000009 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:16:41.8631671+07:00 0HM8MRVVPAGV6:00000009 [INF] Executed DbCommand ("10"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:16:41.8800558+07:00 0HM8MRVVPAGV6:00000009 [INF] Executed DbCommand ("9"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T21:16:41.8826000+07:00 0HM8MRVVPAGV6:00000009 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T21:16:41.8826835+07:00 0HM8MRVVPAGV6:00000009 [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 31.2345ms (afa2e885)
2021-05-14T21:16:41.8827101+07:00 0HM8MRVVPAGV6:00000009 [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T21:16:41.8828230+07:00 0HM8MRVVPAGV6:00000009 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 135 - 204 - - 32.9253ms (791a596a)
2021-05-14T21:16:41.9094457+07:00 0HM8MRVVPAGV6:0000000A [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:16:41.9096205+07:00 0HM8MRVVPAGV6:0000000A [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:16:41.9096918+07:00 0HM8MRVVPAGV6:0000000A [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.2497ms (791a596a)
2021-05-14T21:16:41.9201163+07:00 0HM8MRVVPAGV6:0000000B [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:16:41.9201948+07:00 0HM8MRVVPAGV6:0000000B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:16:41.9204351+07:00 0HM8MRVVPAGV6:0000000B [INF] Successfully validated the token. (60169667)
2021-05-14T21:16:41.9205528+07:00 0HM8MRVVPAGV6:0000000B [INF] Authorization was successful. (0d575a54)
2021-05-14T21:16:41.9205850+07:00 0HM8MRVVPAGV6:0000000B [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:16:41.9206911+07:00 0HM8MRVVPAGV6:0000000B [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:16:41.9212125+07:00 0HM8MRVVPAGV6:0000000B [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:16:41.9304905+07:00 0HM8MRVVPAGV6:0000000B [INF] Executed DbCommand ("9"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:16:41.9310857+07:00 0HM8MRVVPAGV6:0000000B [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:16:41.9312693+07:00 0HM8MRVVPAGV6:0000000B [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 10.5466ms (afa2e885)
2021-05-14T21:16:41.9312963+07:00 0HM8MRVVPAGV6:0000000B [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:16:41.9314250+07:00 0HM8MRVVPAGV6:0000000B [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 11.2736ms (791a596a)
2021-05-14T21:22:19.8703484+07:00 0HM8MRVVPAGV7:00000002 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:22:19.8706295+07:00 0HM8MRVVPAGV7:00000002 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:22:19.8709236+07:00 0HM8MRVVPAGV7:00000002 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.6178ms (791a596a)
2021-05-14T21:22:19.8747930+07:00 0HM8MRVVPAGV7:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:22:19.8748952+07:00 0HM8MRVVPAGV7:00000003 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:22:19.8752940+07:00 0HM8MRVVPAGV7:00000003 [INF] Successfully validated the token. (60169667)
2021-05-14T21:22:19.8754215+07:00 0HM8MRVVPAGV7:00000003 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:22:19.8754669+07:00 0HM8MRVVPAGV7:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:22:19.8756271+07:00 0HM8MRVVPAGV7:00000003 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:22:19.8764559+07:00 0HM8MRVVPAGV7:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:22:19.8882968+07:00 0HM8MRVVPAGV7:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:22:19.8889900+07:00 0HM8MRVVPAGV7:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:22:19.8892537+07:00 0HM8MRVVPAGV7:00000003 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 13.5823ms (afa2e885)
2021-05-14T21:22:19.8892916+07:00 0HM8MRVVPAGV7:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:22:19.8893886+07:00 0HM8MRVVPAGV7:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 14.5887ms (791a596a)
2021-05-14T21:22:39.7100009+07:00 0HM8MRVVPAGV7:00000004 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:22:39.7101076+07:00 0HM8MRVVPAGV7:00000004 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:22:39.7101956+07:00 0HM8MRVVPAGV7:00000004 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.2091ms (791a596a)
2021-05-14T21:22:39.7129510+07:00 0HM8MRVVPAGV7:00000005 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users/raymond application/json;charset=UTF-8 121 (ca22a1cb)
2021-05-14T21:22:39.7130688+07:00 0HM8MRVVPAGV7:00000005 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:22:39.7133327+07:00 0HM8MRVVPAGV7:00000005 [INF] Successfully validated the token. (60169667)
2021-05-14T21:22:39.7134243+07:00 0HM8MRVVPAGV7:00000005 [INF] Executing endpoint '"405 HTTP Method Not Supported"' (500cc934)
2021-05-14T21:22:39.7136444+07:00 0HM8MRVVPAGV7:00000005 [INF] Executed endpoint '"405 HTTP Method Not Supported"' (99874f2b)
2021-05-14T21:22:39.7137248+07:00 0HM8MRVVPAGV7:00000005 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users/raymond application/json;charset=UTF-8 121 - 405 0 - 0.7869ms (791a596a)
2021-05-14T21:22:57.6050597+07:00 0HM8MRVVPAGV7:00000006 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:22:57.6052634+07:00 0HM8MRVVPAGV7:00000006 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:22:57.6053318+07:00 0HM8MRVVPAGV7:00000006 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.2854ms (791a596a)
2021-05-14T21:22:57.6114269+07:00 0HM8MRVVPAGV7:00000007 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:22:57.6114957+07:00 0HM8MRVVPAGV7:00000007 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:22:57.6117383+07:00 0HM8MRVVPAGV7:00000007 [INF] Successfully validated the token. (60169667)
2021-05-14T21:22:57.6118659+07:00 0HM8MRVVPAGV7:00000007 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:22:57.6118926+07:00 0HM8MRVVPAGV7:00000007 [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:22:57.6120788+07:00 0HM8MRVVPAGV7:00000007 [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:22:57.6128430+07:00 0HM8MRVVPAGV7:00000007 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:22:57.6582542+07:00 0HM8MRVVPAGV7:00000007 [INF] Executed DbCommand ("45"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:22:57.6588889+07:00 0HM8MRVVPAGV7:00000007 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:22:57.6590728+07:00 0HM8MRVVPAGV7:00000007 [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 46.9206ms (afa2e885)
2021-05-14T21:22:57.6590997+07:00 0HM8MRVVPAGV7:00000007 [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:22:57.6591763+07:00 0HM8MRVVPAGV7:00000007 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 47.7433ms (791a596a)
2021-05-14T21:23:02.5235629+07:00 0HM8MRVVPAGV7:00000008 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users - - (ca22a1cb)
2021-05-14T21:23:02.5237731+07:00 0HM8MRVVPAGV7:00000008 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:23:02.5238576+07:00 0HM8MRVVPAGV7:00000008 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users - - - 204 - - 0.2998ms (791a596a)
2021-05-14T21:23:02.5264707+07:00 0HM8MRVVPAGV7:00000009 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 135 (ca22a1cb)
2021-05-14T21:23:02.5266694+07:00 0HM8MRVVPAGV7:00000009 [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:23:02.5269058+07:00 0HM8MRVVPAGV7:00000009 [INF] Successfully validated the token. (60169667)
2021-05-14T21:23:02.5269859+07:00 0HM8MRVVPAGV7:00000009 [INF] Authorization was successful. (0d575a54)
2021-05-14T21:23:02.5270153+07:00 0HM8MRVVPAGV7:00000009 [INF] Executing endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (500cc934)
2021-05-14T21:23:02.5271511+07:00 0HM8MRVVPAGV7:00000009 [INF] Route matched with "{action = \"UpdateUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateUser(api.DTO.MemberUpdateDto)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:23:02.5278427+07:00 0HM8MRVVPAGV7:00000009 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:23:02.5289429+07:00 0HM8MRVVPAGV7:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:23:02.5429742+07:00 0HM8MRVVPAGV7:00000009 [INF] Executed DbCommand ("13"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-05-14T21:23:02.5792260+07:00 0HM8MRVVPAGV7:00000009 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204 (e28ccfae)
2021-05-14T21:23:02.5793090+07:00 0HM8MRVVPAGV7:00000009 [INF] Executed action "api.Controllers.UsersController.UpdateUser (api)" in 52.1095ms (afa2e885)
2021-05-14T21:23:02.5793601+07:00 0HM8MRVVPAGV7:00000009 [INF] Executed endpoint '"api.Controllers.UsersController.UpdateUser (api)"' (99874f2b)
2021-05-14T21:23:02.5795172+07:00 0HM8MRVVPAGV7:00000009 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/users application/json;charset=UTF-8 135 - 204 - - 53.0256ms (791a596a)
2021-05-14T21:23:02.6193377+07:00 0HM8MRVVPAGV7:0000000A [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:23:02.6195726+07:00 0HM8MRVVPAGV7:0000000A [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:23:02.6196598+07:00 0HM8MRVVPAGV7:0000000A [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/raymond - - - 204 - - 0.3320ms (791a596a)
2021-05-14T21:23:02.6248780+07:00 0HM8MRVVPAGV7:0000000B [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/users/raymond - - (ca22a1cb)
2021-05-14T21:23:02.6250498+07:00 0HM8MRVVPAGV7:0000000B [INF] CORS policy execution successful. (5409d6ef)
2021-05-14T21:23:02.6253214+07:00 0HM8MRVVPAGV7:0000000B [INF] Successfully validated the token. (60169667)
2021-05-14T21:23:02.6254251+07:00 0HM8MRVVPAGV7:0000000B [INF] Authorization was successful. (0d575a54)
2021-05-14T21:23:02.6254928+07:00 0HM8MRVVPAGV7:0000000B [INF] Executing endpoint '"api.Controllers.UsersController.GetUser (api)"' (500cc934)
2021-05-14T21:23:02.6256122+07:00 0HM8MRVVPAGV7:0000000B [INF] Route matched with "{action = \"GetUser\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MemberDto]] GetUser(System.String)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-05-14T21:23:02.6263881+07:00 0HM8MRVVPAGV7:0000000B [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-05-14T21:23:02.6292582+07:00 0HM8MRVVPAGV7:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-05-14T21:23:02.6297433+07:00 0HM8MRVVPAGV7:0000000B [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MemberDto"'. (605b4265)
2021-05-14T21:23:02.6299316+07:00 0HM8MRVVPAGV7:0000000B [INF] Executed action "api.Controllers.UsersController.GetUser (api)" in 4.2727ms (afa2e885)
2021-05-14T21:23:02.6299707+07:00 0HM8MRVVPAGV7:0000000B [INF] Executed endpoint '"api.Controllers.UsersController.GetUser (api)"' (99874f2b)
2021-05-14T21:23:02.6300530+07:00 0HM8MRVVPAGV7:0000000B [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/users/raymond - - - 200 - application/json;+charset=utf-8 5.1770ms (791a596a)
