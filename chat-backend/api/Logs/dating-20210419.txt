2021-04-19T19:37:18.7626220+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T19:37:33.5395410+07:00  [ERR] An error occured during migration (dd67de31)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at api.Program.Main(String[] args) in /Users/macintoshhd/Downloads/DatingApi/api/Program.cs:line 30
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-04-19T19:37:33.5612180+07:00  [INF] User profile is available. Using '"/Users/macintoshhd/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T19:37:33.7587000+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T19:37:33.7587450+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T19:37:33.7588960+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T19:37:33.7589320+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T19:37:33.7589680+07:00  [INF] Content root path: "/Users/macintoshhd/Downloads/DatingApi/api" (b5d60022)
2021-04-19T19:39:02.6319590+07:00 0HM8360EC5LBA:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/accounts/login application/json 53 (ca22a1cb)
2021-04-19T19:39:02.7013070+07:00 0HM8360EC5LBA:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/accounts/login application/json 53 - 404 0 - 71.6463ms (791a596a)
2021-04-19T19:39:37.4515190+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T19:40:27.1855390+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T19:40:27.5775320+07:00  [INF] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T19:40:27.6229420+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T19:40:27.6299120+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T19:40:27.6318300+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T19:40:27.6467530+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T19:40:27.6660960+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T19:40:27.8940830+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T19:40:27.9141060+07:00  [INF] User profile is available. Using '"/Users/macintoshhd/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T19:40:28.0595470+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T19:40:28.0596450+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T19:40:28.0597490+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T19:40:28.0597740+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T19:40:28.0598020+07:00  [INF] Content root path: "/Users/macintoshhd/Downloads/DatingApi/api" (b5d60022)
2021-04-19T19:42:22.1368230+07:00 0HM83629QVACC:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/accounts/login application/json 53 (ca22a1cb)
2021-04-19T19:42:22.1961240+07:00 0HM83629QVACC:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/accounts/login application/json 53 - 404 0 - 60.8405ms (791a596a)
2021-04-19T19:43:13.4222000+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T19:46:46.6258320+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T19:46:47.0861160+07:00  [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T19:46:47.1291990+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T19:46:47.1352770+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T19:46:47.1372470+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T19:46:47.1521500+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T19:46:47.1712440+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T19:46:47.4011540+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T19:46:47.4255740+07:00  [INF] User profile is available. Using '"/Users/macintoshhd/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T19:46:47.5978760+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T19:46:47.5979500+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T19:46:47.5981090+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T19:46:47.5981450+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T19:46:47.5981810+07:00  [INF] Content root path: "/Users/macintoshhd/Downloads/DatingApi/api" (b5d60022)
2021-04-19T19:47:01.6710530+07:00 0HM8364T4OTTC:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/accounts/login application/json 53 (ca22a1cb)
2021-04-19T19:47:01.7390060+07:00 0HM8364T4OTTC:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/accounts/login application/json 53 - 404 0 - 70.2211ms (791a596a)
2021-04-19T19:47:30.2564400+07:00 0HM8364T4OTTC:00000003 [INF] Request starting HTTP/1.1 POST https://localhost:5001/accounts/login application/json 55 (ca22a1cb)
2021-04-19T19:47:30.2583860+07:00 0HM8364T4OTTC:00000003 [INF] Request finished HTTP/1.1 POST https://localhost:5001/accounts/login application/json 55 - 404 0 - 1.9049ms (791a596a)
2021-04-19T19:47:48.3951690+07:00 0HM8364T4OTTE:00000002 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/accounts/login application/json 55 (ca22a1cb)
2021-04-19T19:47:48.3971060+07:00 0HM8364T4OTTE:00000002 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/accounts/login application/json 55 - 404 0 - 1.9259ms (791a596a)
2021-04-19T19:48:02.4524070+07:00 0HM8364T4OTTE:00000003 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 55 (ca22a1cb)
2021-04-19T19:48:02.4551330+07:00 0HM8364T4OTTE:00000003 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T19:48:02.4861080+07:00 0HM8364T4OTTE:00000003 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T19:48:02.6771430+07:00 0HM8364T4OTTE:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T19:48:02.8780430+07:00 0HM8364T4OTTE:00000003 [INF] Executed DbCommand ("34"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T19:48:03.0738260+07:00 0HM8364T4OTTE:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-19T19:48:03.1757250+07:00 0HM8364T4OTTE:00000003 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-19T19:48:03.1981380+07:00 0HM8364T4OTTE:00000003 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 706.5211ms (afa2e885)
2021-04-19T19:48:03.1986500+07:00 0HM8364T4OTTE:00000003 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T19:48:03.2025850+07:00 0HM8364T4OTTE:00000003 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 55 - 200 - application/json;+charset=utf-8 750.1573ms (791a596a)
2021-04-19T19:50:58.1076760+07:00 0HM8364T4OTTG:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages - - (ca22a1cb)
2021-04-19T19:50:58.1079130+07:00 0HM8364T4OTTG:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T19:50:58.1116320+07:00 0HM8364T4OTTG:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T19:50:58.1136720+07:00 0HM8364T4OTTG:00000002 [INF] Executing "ObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ProblemDetails"'. (605b4265)
2021-04-19T19:50:58.1216300+07:00 0HM8364T4OTTG:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 9.9237ms (afa2e885)
2021-04-19T19:50:58.1216880+07:00 0HM8364T4OTTG:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T19:50:58.1217780+07:00 0HM8364T4OTTG:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages - - - 415 - application/problem+json;+charset=utf-8 14.2250ms (791a596a)
2021-04-19T19:53:58.1767430+07:00 0HM8364T4OTTI:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages - - (ca22a1cb)
2021-04-19T19:53:58.2328840+07:00 0HM8364T4OTTI:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T19:53:58.2357760+07:00 0HM8364T4OTTI:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T19:53:58.2359340+07:00 0HM8364T4OTTI:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T19:53:58.2365560+07:00 0HM8364T4OTTI:00000002 [INF] Executing "ObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ProblemDetails"'. (605b4265)
2021-04-19T19:53:58.2367150+07:00 0HM8364T4OTTI:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 0.7492ms (afa2e885)
2021-04-19T19:53:58.2367360+07:00 0HM8364T4OTTI:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T19:53:58.2368220+07:00 0HM8364T4OTTI:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages - - - 415 - application/problem+json;+charset=utf-8 60.0706ms (791a596a)
2021-04-19T19:55:39.5541630+07:00 0HM8364T4OTTI:00000003 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/messages application/json 60 (ca22a1cb)
2021-04-19T19:55:39.5545690+07:00 0HM8364T4OTTI:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T19:55:39.5546830+07:00 0HM8364T4OTTI:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T19:55:39.5577660+07:00 0HM8364T4OTTI:00000003 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T19:55:39.5920800+07:00 0HM8364T4OTTI:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T19:55:54.1558890+07:00 0HM8364T4OTTI:00000003 [ERR] An error occurred using the connection to database '"ChattingApp"' on server '"localhost,1433"'. (5fc3407c)
2021-04-19T19:55:54.1791610+07:00 0HM8364T4OTTI:00000003 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-04-19T19:55:54.1803660+07:00 0HM8364T4OTTI:00000003 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 14622.5521ms (afa2e885)
2021-04-19T19:55:54.1807180+07:00 0HM8364T4OTTI:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T19:55:54.1886910+07:00 0HM8364T4OTTI:00000003 [ERR] A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server) (411d2a3d)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at api.Data.UserRepository.GetUserByUsernameAsync(String username) in /Users/macintoshhd/Downloads/DatingApi/api/Data/UserRepository.cs:line 30
   at api.Controllers.MessagesController.CreateMessage(CreateMessageDto createMessageDto) in /Users/macintoshhd/Downloads/DatingApi/api/Controllers/MessagesController.cs:line 50
   at lambda_method252(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/macintoshhd/Downloads/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-04-19T19:55:54.1956760+07:00 0HM8364T4OTTI:00000003 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/messages application/json 60 - 500 - application/json 14641.5286ms (791a596a)
2021-04-19T19:56:28.0168450+07:00 0HM8364T4OTTI:00000004 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 55 (ca22a1cb)
2021-04-19T19:56:28.0175700+07:00 0HM8364T4OTTI:00000004 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T19:56:28.0176660+07:00 0HM8364T4OTTI:00000004 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T19:56:28.0239490+07:00 0HM8364T4OTTI:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T19:56:42.5703900+07:00 0HM8364T4OTTI:00000004 [ERR] An error occurred using the connection to database '"ChattingApp"' on server '"localhost,1433"'. (5fc3407c)
2021-04-19T19:56:42.5736640+07:00 0HM8364T4OTTI:00000004 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at api.Controllers.AccountController.Login(LoginDto loginDto) in /Users/macintoshhd/Downloads/DatingApi/api/Controllers/AccountController.cs:line 66
   at lambda_method16(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-04-19T19:56:42.5743330+07:00 0HM8364T4OTTI:00000004 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 14556.6405ms (afa2e885)
2021-04-19T19:56:42.5744210+07:00 0HM8364T4OTTI:00000004 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T19:56:42.5762680+07:00 0HM8364T4OTTI:00000004 [ERR] A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server) (411d2a3d)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at api.Controllers.AccountController.Login(LoginDto loginDto) in /Users/macintoshhd/Downloads/DatingApi/api/Controllers/AccountController.cs:line 66
   at lambda_method16(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/macintoshhd/Downloads/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-04-19T19:56:42.5779770+07:00 0HM8364T4OTTI:00000004 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 55 - 500 - application/json 14561.1310ms (791a596a)
2021-04-19T20:05:26.2101920+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:05:26.6193190+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:05:26.6596270+07:00  [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:05:26.6656530+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:05:26.6677170+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:05:26.6815490+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:05:26.7006000+07:00  [INF] Applying migration '"20210416133821_addMessages"'. (0e2ac64d)
2021-04-19T20:05:26.7634720+07:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Message] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [SenderUsername] nvarchar(max) NULL,
    [RecipientId] int NOT NULL,
    [RecipientUsername] nvarchar(max) NULL,
    [Content] nvarchar(max) NULL,
    [DateRead] datetime2 NULL,
    [MessageSent] datetime2 NOT NULL,
    [SenderDeleted] bit NOT NULL,
    [RecipientDeleted] bit NOT NULL,
    CONSTRAINT [PK_Message] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Message_AspNetUsers_RecipientId] FOREIGN KEY ([RecipientId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Message_AspNetUsers_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION
);" (0723d8ff)
2021-04-19T20:05:26.7659040+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Message_RecipientId] ON [Message] ([RecipientId]);" (0723d8ff)
2021-04-19T20:05:26.7677090+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Message_SenderId] ON [Message] ([SenderId]);" (0723d8ff)
2021-04-19T20:05:26.7699870+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210416133821_addMessages', N'5.0.3');" (0723d8ff)
2021-04-19T20:05:26.9812930+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:05:27.0072130+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:05:27.1975260+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:05:27.1976380+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:05:27.1978150+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:05:27.1978520+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:05:27.1978700+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:05:32.9840430+07:00 0HM836F8BCMHG:00000002 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 (ca22a1cb)
2021-04-19T20:05:33.0493530+07:00 0HM836F8BCMHG:00000002 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T20:05:33.0797700+07:00 0HM836F8BCMHG:00000002 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T20:05:33.2935230+07:00 0HM836F8BCMHG:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:05:33.4927090+07:00 0HM836F8BCMHG:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:05:33.6929400+07:00 0HM836F8BCMHG:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-19T20:05:33.7934980+07:00 0HM836F8BCMHG:00000002 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-19T20:05:33.8125770+07:00 0HM836F8BCMHG:00000002 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 727.3306ms (afa2e885)
2021-04-19T20:05:33.8131110+07:00 0HM836F8BCMHG:00000002 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T20:05:33.8193240+07:00 0HM836F8BCMHG:00000002 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 - 200 - application/json;+charset=utf-8 837.2731ms (791a596a)
2021-04-19T20:05:53.8360110+07:00 0HM836F8BCMHG:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:05:53.9118870+07:00 0HM836F8BCMHG:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:05:53.9130370+07:00 0HM836F8BCMHG:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:05:53.9175170+07:00 0HM836F8BCMHG:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:05:53.9562230+07:00 0HM836F8BCMHG:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:05:54.0009960+07:00 0HM836F8BCMHG:00000003 [ERR] Failed executing DbCommand ("6"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (627a98df)
2021-04-19T20:05:54.0252540+07:00 0HM836F8BCMHG:00000003 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:6d3d64b9-8767-4671-a868-fead5e4564f4
Error Number:208,State:1,Class:16" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:6d3d64b9-8767-4671-a868-fead5e4564f4
Error Number:208,State:1,Class:16
2021-04-19T20:05:54.0270500+07:00 0HM836F8BCMHG:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 109.4659ms (afa2e885)
2021-04-19T20:05:54.0271630+07:00 0HM836F8BCMHG:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:05:54.0397110+07:00 0HM836F8BCMHG:00000003 [ERR] Invalid object name 'Messages'. (cdbda9ec)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Helpers/PageList.cs:line 28
   at api.Data.MessageRepository.GetMessagesForUser(MessageParam messageParam) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 67
   at api.Controllers.MessagesController.GetMessagesForUser(MessageParam messageParam) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 33
   at lambda_method244(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:6d3d64b9-8767-4671-a868-fead5e4564f4
Error Number:208,State:1,Class:16
2021-04-19T20:05:54.0483690+07:00 0HM836F8BCMHG:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Inbox application/json 71 - 500 - application/json 212.4397ms (791a596a)
2021-04-19T20:06:31.0529630+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:07:07.6369390+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:07:08.0733400+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:07:08.1205770+07:00  [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:07:08.1277290+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:07:08.1301080+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:07:08.1440710+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:07:08.1632020+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:07:08.3809230+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:07:08.4046940+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:07:08.6383990+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:07:08.6385290+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:07:08.6387380+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:07:08.6388260+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:07:08.6388680+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:07:30.2999020+07:00 0HM836GB9RNIM:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 91 (ca22a1cb)
2021-04-19T20:07:30.5107120+07:00 0HM836GB9RNIM:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:07:30.5134730+07:00 0HM836GB9RNIM:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:07:30.5400180+07:00 0HM836GB9RNIM:00000002 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:07:30.7357070+07:00 0HM836GB9RNIM:00000002 [INF] Executing "BadRequestObjectResult", writing value of type '"System.String"'. (605b4265)
2021-04-19T20:07:30.7437610+07:00 0HM836GB9RNIM:00000002 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 197.672ms (afa2e885)
2021-04-19T20:07:30.7439020+07:00 0HM836GB9RNIM:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:07:30.7460370+07:00 0HM836GB9RNIM:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 91 - 400 - text/plain;+charset=utf-8 448.1963ms (791a596a)
2021-04-19T20:07:42.2538630+07:00 0HM836GB9RNIM:00000003 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 87 (ca22a1cb)
2021-04-19T20:07:42.2563650+07:00 0HM836GB9RNIM:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:07:42.2566250+07:00 0HM836GB9RNIM:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:07:42.2569160+07:00 0HM836GB9RNIM:00000003 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:07:42.2639830+07:00 0HM836GB9RNIM:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:07:42.4731660+07:00 0HM836GB9RNIM:00000003 [INF] Executed DbCommand ("27"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:07:42.6284290+07:00 0HM836GB9RNIM:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:07:42.7899780+07:00 0HM836GB9RNIM:00000003 [ERR] Failed executing DbCommand ("9"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (627a98df)
2021-04-19T20:07:42.8478250+07:00 0HM836GB9RNIM:00000003 [ERR] An exception occurred in the database while saving changes for context type '"api.Data.DataContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:40ca909f-520b-4e8a-b232-8eb4ba0f0152
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:40ca909f-520b-4e8a-b232-8eb4ba0f0152
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at api.Data.MessageRepository.SaveAllAsync() in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 77
   at api.Controllers.MessagesController.CreateMessage(CreateMessageDto createMessageDto) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 64
2021-04-19T20:07:42.8528500+07:00 0HM836GB9RNIM:00000003 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 595.8443ms (afa2e885)
2021-04-19T20:07:42.8538540+07:00 0HM836GB9RNIM:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:07:42.8623050+07:00 0HM836GB9RNIM:00000003 [ERR] An error occurred while updating the entries. See the inner exception for details. (5d65ae99)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:40ca909f-520b-4e8a-b232-8eb4ba0f0152
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at api.Data.MessageRepository.SaveAllAsync() in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 77
   at api.Controllers.MessagesController.CreateMessage(CreateMessageDto createMessageDto) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 64
   at lambda_method20(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
2021-04-19T20:07:42.8839380+07:00 0HM836GB9RNIM:00000003 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 87 - 500 - application/json 630.1146ms (791a596a)
2021-04-19T20:07:52.2650460+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:08:21.3230710+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:08:23.5822170+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:08:23.9164230+07:00  [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:08:24.0284720+07:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='60']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [datingApp2] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;" (0723d8ff)
2021-04-19T20:08:24.1093240+07:00  [INF] Executed DbCommand ("81"ms) [Parameters=[""], CommandType='Text', CommandTimeout='60']"
""DROP DATABASE [datingApp2];" (0723d8ff)
2021-04-19T20:08:31.8670210+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:08:32.8318840+07:00  [INF] Executed DbCommand ("537"ms) [Parameters=[""], CommandType='Text', CommandTimeout='60']"
""CREATE DATABASE [datingApp2];" (0723d8ff)
2021-04-19T20:08:33.0049090+07:00  [INF] Executed DbCommand ("170"ms) [Parameters=[""], CommandType='Text', CommandTimeout='60']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [datingApp2] SET READ_COMMITTED_SNAPSHOT ON;
END;" (0723d8ff)
2021-04-19T20:08:33.0793460+07:00  [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:08:33.1683650+07:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);" (0723d8ff)
2021-04-19T20:08:33.1737700+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:08:33.1992740+07:00  [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:08:33.2067290+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:08:33.2254560+07:00  [INF] Applying migration '"20210222134539_InitialCreate"'. (0e2ac64d)
2021-04-19T20:08:33.2505040+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);" (0723d8ff)
2021-04-19T20:08:33.2533360+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210222134539_InitialCreate', N'5.0.3');" (0723d8ff)
2021-04-19T20:08:33.2629470+07:00  [INF] Applying migration '"20210301134759_UserPasswordAdded"'. (0e2ac64d)
2021-04-19T20:08:33.2709810+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [PasswordHash] varbinary(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.2735160+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [PasswordSalt] varbinary(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.2750800+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210301134759_UserPasswordAdded', N'5.0.3');" (0723d8ff)
2021-04-19T20:08:33.2778390+07:00  [INF] Applying migration '"20210317141316_ExtendedUserEntity"'. (0e2ac64d)
2021-04-19T20:08:33.2947140+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [City] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.2972480+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Country] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.3008100+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Created] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';" (0723d8ff)
2021-04-19T20:08:33.3035270+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [DateOfBirth] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';" (0723d8ff)
2021-04-19T20:08:33.3057850+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Gender] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.3079610+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Interests] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.3101010+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Introduction] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.3122000+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [KnownAs] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.3148210+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [LastActive] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';" (0723d8ff)
2021-04-19T20:08:33.3174690+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [LookingFor] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.3214060+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Photos] (
    [Id] int NOT NULL IDENTITY,
    [Url] nvarchar(max) NULL,
    [IsMain] bit NOT NULL,
    [PublicId] nvarchar(max) NULL,
    [AppUsersId] int NOT NULL,
    CONSTRAINT [PK_Photos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Photos_Users_AppUsersId] FOREIGN KEY ([AppUsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:08:33.3236240+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Photos_AppUsersId] ON [Photos] ([AppUsersId]);" (0723d8ff)
2021-04-19T20:08:33.3257800+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210317141316_ExtendedUserEntity', N'5.0.3');" (0723d8ff)
2021-04-19T20:08:33.3288830+07:00  [INF] Applying migration '"20210326134439_AddIdentity"'. (0e2ac64d)
2021-04-19T20:08:33.3651740+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Photos] DROP CONSTRAINT [FK_Photos_Users_AppUsersId];" (0723d8ff)
2021-04-19T20:08:33.3684680+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] DROP CONSTRAINT [PK_Users];" (0723d8ff)
2021-04-19T20:08:33.4242690+07:00  [INF] Executed DbCommand ("56"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'PasswordSalt');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Users] DROP COLUMN [PasswordSalt];" (0723d8ff)
2021-04-19T20:08:33.5669430+07:00  [INF] Executed DbCommand ("143"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Users]', N'AspNetUsers';" (0723d8ff)
2021-04-19T20:08:33.5710940+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[AspNetUsers].[Username]', N'UserName', N'COLUMN';" (0723d8ff)
2021-04-19T20:08:33.5845240+07:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AspNetUsers]') AND [c].[name] = N'UserName');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [AspNetUsers] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [AspNetUsers] ALTER COLUMN [UserName] nvarchar(256) NULL;" (0723d8ff)
2021-04-19T20:08:33.5975220+07:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AspNetUsers]') AND [c].[name] = N'PasswordHash');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [AspNetUsers] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [AspNetUsers] ALTER COLUMN [PasswordHash] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.6003450+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [AccessFailedCount] int NOT NULL DEFAULT 0;" (0723d8ff)
2021-04-19T20:08:33.6024970+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [ConcurrencyStamp] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.6046260+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [Email] nvarchar(256) NULL;" (0723d8ff)
2021-04-19T20:08:33.6076260+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [EmailConfirmed] bit NOT NULL DEFAULT CAST(0 AS bit);" (0723d8ff)
2021-04-19T20:08:33.6103500+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [LockoutEnabled] bit NOT NULL DEFAULT CAST(0 AS bit);" (0723d8ff)
2021-04-19T20:08:33.6125960+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [LockoutEnd] datetimeoffset NULL;" (0723d8ff)
2021-04-19T20:08:33.6152460+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [NormalizedEmail] nvarchar(256) NULL;" (0723d8ff)
2021-04-19T20:08:33.6176240+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [NormalizedUserName] nvarchar(256) NULL;" (0723d8ff)
2021-04-19T20:08:33.6201700+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [PhoneNumber] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.6226650+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [PhoneNumberConfirmed] bit NOT NULL DEFAULT CAST(0 AS bit);" (0723d8ff)
2021-04-19T20:08:33.6247910+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [SecurityStamp] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:08:33.6272320+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [TwoFactorEnabled] bit NOT NULL DEFAULT CAST(0 AS bit);" (0723d8ff)
2021-04-19T20:08:33.6307020+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id]);" (0723d8ff)
2021-04-19T20:08:33.6338800+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);" (0723d8ff)
2021-04-19T20:08:33.6390040+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:08:33.6419880+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:08:33.6450960+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:08:33.6478810+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:08:33.6509060+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:08:33.6530480+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);" (0723d8ff)
2021-04-19T20:08:33.6553560+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;" (0723d8ff)
2021-04-19T20:08:33.6572490+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);" (0723d8ff)
2021-04-19T20:08:33.6595650+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;" (0723d8ff)
2021-04-19T20:08:33.6616450+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);" (0723d8ff)
2021-04-19T20:08:33.6635720+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);" (0723d8ff)
2021-04-19T20:08:33.6655710+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);" (0723d8ff)
2021-04-19T20:08:33.6680670+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Photos] ADD CONSTRAINT [FK_Photos_AspNetUsers_AppUsersId] FOREIGN KEY ([AppUsersId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE;" (0723d8ff)
2021-04-19T20:08:33.6696830+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210326134439_AddIdentity', N'5.0.3');" (0723d8ff)
2021-04-19T20:08:33.6730120+07:00  [INF] Applying migration '"20210407141120_addLikes"'. (0e2ac64d)
2021-04-19T20:08:33.6870580+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Likes] (
    [LikedUserId] int NOT NULL,
    [SourceUserId] int NOT NULL,
    CONSTRAINT [PK_Likes] PRIMARY KEY ([SourceUserId], [LikedUserId]),
    CONSTRAINT [FK_Likes_AspNetUsers_LikedUserId] FOREIGN KEY ([LikedUserId]) REFERENCES [AspNetUsers] ([Id]),
    CONSTRAINT [FK_Likes_AspNetUsers_SourceUserId] FOREIGN KEY ([SourceUserId]) REFERENCES [AspNetUsers] ([Id])
);" (0723d8ff)
2021-04-19T20:08:33.6891330+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Likes_LikedUserId] ON [Likes] ([LikedUserId]);" (0723d8ff)
2021-04-19T20:08:33.6904460+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210407141120_addLikes', N'5.0.3');" (0723d8ff)
2021-04-19T20:08:33.6932230+07:00  [INF] Applying migration '"20210416133821_addMessages"'. (0e2ac64d)
2021-04-19T20:08:33.7115370+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Message] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [SenderUsername] nvarchar(max) NULL,
    [RecipientId] int NOT NULL,
    [RecipientUsername] nvarchar(max) NULL,
    [Content] nvarchar(max) NULL,
    [DateRead] datetime2 NULL,
    [MessageSent] datetime2 NOT NULL,
    [SenderDeleted] bit NOT NULL,
    [RecipientDeleted] bit NOT NULL,
    CONSTRAINT [PK_Message] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Message_AspNetUsers_RecipientId] FOREIGN KEY ([RecipientId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Message_AspNetUsers_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION
);" (0723d8ff)
2021-04-19T20:08:33.7134870+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Message_RecipientId] ON [Message] ([RecipientId]);" (0723d8ff)
2021-04-19T20:08:33.7154540+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Message_SenderId] ON [Message] ([SenderId]);" (0723d8ff)
2021-04-19T20:08:33.7170770+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210416133821_addMessages', N'5.0.3');" (0723d8ff)
2021-04-19T20:08:33.8983870+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:08:34.0151970+07:00  [INF] Executed DbCommand ("24"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:08:34.0222110+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:08:34.1506920+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.1901140+07:00  [INF] Executed DbCommand ("7"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:08:34.1921710+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:08:34.1980980+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.2034180+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:08:34.2052890+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:08:34.2086870+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.2470610+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.3521790+07:00  [INF] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.3628800+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.3780760+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.4011200+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.4060490+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.4257460+07:00  [INF] Executed DbCommand ("7"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.4409280+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.4473520+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.4672870+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.4725200+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.4746790+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.4799130+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.4833360+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.4853460+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.4876290+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.4915430+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.4935490+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.5113460+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.5157030+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.5177890+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.5226810+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.5256120+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.5275220+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.5297930+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.5335320+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.5355220+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.5531160+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.5587320+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.5612040+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.5664960+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.5695010+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.5714020+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.5737030+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.5777570+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.5795990+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.5963120+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.6006000+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.6025350+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.6076860+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.6105410+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.6126200+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.6150910+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.6199180+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.6230750+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.6412740+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.6457580+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.6476510+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.6525440+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.6555670+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.6575270+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.6598030+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.6637440+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.6657170+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.6843770+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.6891800+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.6914410+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.6967070+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.6995880+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.7018710+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.7041830+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.7079100+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.7099500+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.7266480+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.7309750+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.7328990+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.7377960+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.7405900+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.7425420+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.7448280+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.7487010+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.7507310+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.7674710+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.7715040+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.7733610+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.7780680+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.7807520+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.7826980+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.7852260+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.7890410+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.7910240+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.8081360+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.8129760+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.8152940+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.8209720+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.8239990+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.8262310+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.8287880+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.8333260+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.8355620+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.8530440+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.8579670+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:08:34.8638620+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.8666240+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.8688560+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.8712970+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.8759540+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.8784220+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.8841020+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.8870120+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:08:34.8892490+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:08:34.8917350+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:08:34.8963870+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:08:34.8988380+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:08:34.9203720+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:08:35.1256480+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:08:35.1257100+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:08:35.1258220+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:08:35.1258430+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:08:35.1258670+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:08:46.0585230+07:00 0HM836H1SI9HO:00000002 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 (ca22a1cb)
2021-04-19T20:08:46.1357610+07:00 0HM836H1SI9HO:00000002 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T20:08:46.1694240+07:00 0HM836H1SI9HO:00000002 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T20:08:46.3528120+07:00 0HM836H1SI9HO:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:08:46.4584380+07:00 0HM836H1SI9HO:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:08:46.5256720+07:00 0HM836H1SI9HO:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-19T20:08:46.6362710+07:00 0HM836H1SI9HO:00000002 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-19T20:08:46.6604070+07:00 0HM836H1SI9HO:00000002 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 484.4202ms (afa2e885)
2021-04-19T20:08:46.6608880+07:00 0HM836H1SI9HO:00000002 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T20:08:46.6669910+07:00 0HM836H1SI9HO:00000002 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 - 200 - application/json;+charset=utf-8 611.8007ms (791a596a)
2021-04-19T20:08:58.4069470+07:00 0HM836H1SI9HO:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:08:58.4693880+07:00 0HM836H1SI9HO:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:08:58.4702880+07:00 0HM836H1SI9HO:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:08:58.4731790+07:00 0HM836H1SI9HO:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:08:58.5113340+07:00 0HM836H1SI9HO:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:08:58.5509970+07:00 0HM836H1SI9HO:00000003 [ERR] Failed executing DbCommand ("5"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (627a98df)
2021-04-19T20:08:58.5743010+07:00 0HM836H1SI9HO:00000003 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
2021-04-19T20:08:58.5775840+07:00 0HM836H1SI9HO:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 104.3349ms (afa2e885)
2021-04-19T20:08:58.5783950+07:00 0HM836H1SI9HO:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:08:58.5909770+07:00 0HM836H1SI9HO:00000003 [ERR] Invalid object name 'Messages'. (cdbda9ec)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Helpers/PageList.cs:line 28
   at api.Data.MessageRepository.GetMessagesForUser(MessageParam messageParam) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 67
   at api.Controllers.MessagesController.GetMessagesForUser(MessageParam messageParam) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 33
   at lambda_method449(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
2021-04-19T20:08:58.6017980+07:00 0HM836H1SI9HO:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Inbox application/json 71 - 500 - application/json 194.8403ms (791a596a)
2021-04-19T20:11:51.2106330+07:00 0HM836H1SI9HQ:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/likes/tia - 0 (ca22a1cb)
2021-04-19T20:11:51.2239820+07:00 0HM836H1SI9HQ:00000002 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-19T20:11:51.2242510+07:00 0HM836H1SI9HQ:00000002 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-04-19T20:11:51.2249980+07:00 0HM836H1SI9HQ:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/likes/tia - 0 - 404 0 - 14.3717ms (791a596a)
2021-04-19T20:11:57.3868010+07:00 0HM836H1SI9HQ:00000003 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 87 (ca22a1cb)
2021-04-19T20:11:57.3871630+07:00 0HM836H1SI9HQ:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:11:57.3873070+07:00 0HM836H1SI9HQ:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:11:57.3918400+07:00 0HM836H1SI9HQ:00000003 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:11:57.3976440+07:00 0HM836H1SI9HQ:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:11:57.4161780+07:00 0HM836H1SI9HQ:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:11:57.4195950+07:00 0HM836H1SI9HQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:11:57.4537330+07:00 0HM836H1SI9HQ:00000003 [ERR] Failed executing DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (627a98df)
2021-04-19T20:11:57.4628310+07:00 0HM836H1SI9HQ:00000003 [ERR] An exception occurred in the database while saving changes for context type '"api.Data.DataContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at api.Data.MessageRepository.SaveAllAsync() in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 77
   at api.Controllers.MessagesController.CreateMessage(CreateMessageDto createMessageDto) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 64
2021-04-19T20:11:57.4638190+07:00 0HM836H1SI9HQ:00000003 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 71.9102ms (afa2e885)
2021-04-19T20:11:57.4641290+07:00 0HM836H1SI9HQ:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:11:57.4655000+07:00 0HM836H1SI9HQ:00000003 [ERR] An error occurred while updating the entries. See the inner exception for details. (5d65ae99)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at api.Data.MessageRepository.SaveAllAsync() in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 77
   at api.Controllers.MessagesController.CreateMessage(CreateMessageDto createMessageDto) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 64
   at lambda_method459(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
2021-04-19T20:11:57.4688490+07:00 0HM836H1SI9HQ:00000003 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 87 - 500 - application/json 82.0192ms (791a596a)
2021-04-19T20:12:00.9043250+07:00 0HM836H1SI9HS:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:12:00.9047380+07:00 0HM836H1SI9HS:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:12:00.9048100+07:00 0HM836H1SI9HS:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:12:00.9049860+07:00 0HM836H1SI9HS:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:12:00.9083190+07:00 0HM836H1SI9HS:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:12:00.9144380+07:00 0HM836H1SI9HS:00000002 [ERR] Failed executing DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (627a98df)
2021-04-19T20:12:00.9159920+07:00 0HM836H1SI9HS:00000002 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
2021-04-19T20:12:00.9167400+07:00 0HM836H1SI9HS:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 11.7123ms (afa2e885)
2021-04-19T20:12:00.9168670+07:00 0HM836H1SI9HS:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:12:00.9187200+07:00 0HM836H1SI9HS:00000002 [ERR] Invalid object name 'Messages'. (cdbda9ec)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Helpers/PageList.cs:line 28
   at api.Data.MessageRepository.GetMessagesForUser(MessageParam messageParam) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 67
   at api.Controllers.MessagesController.GetMessagesForUser(MessageParam messageParam) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 33
   at lambda_method449(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
2021-04-19T20:12:00.9204070+07:00 0HM836H1SI9HS:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Inbox application/json 71 - 500 - application/json 16.1021ms (791a596a)
2021-04-19T20:12:05.2064620+07:00 0HM836H1SI9HS:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2 application/json 71 (ca22a1cb)
2021-04-19T20:12:05.2067710+07:00 0HM836H1SI9HS:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:12:05.2068940+07:00 0HM836H1SI9HS:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:12:05.2069760+07:00 0HM836H1SI9HS:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:12:05.2074780+07:00 0HM836H1SI9HS:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:12:05.2114440+07:00 0HM836H1SI9HS:00000003 [ERR] Failed executing DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (627a98df)
2021-04-19T20:12:05.2135040+07:00 0HM836H1SI9HS:00000003 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Helpers/PageList.cs:line 28
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
2021-04-19T20:12:05.2144710+07:00 0HM836H1SI9HS:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.4061ms (afa2e885)
2021-04-19T20:12:05.2146060+07:00 0HM836H1SI9HS:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:12:05.2166480+07:00 0HM836H1SI9HS:00000003 [ERR] Invalid object name 'Messages'. (cdbda9ec)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Helpers/PageList.cs:line 28
   at api.Data.MessageRepository.GetMessagesForUser(MessageParam messageParam) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 67
   at api.Controllers.MessagesController.GetMessagesForUser(MessageParam messageParam) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 33
   at lambda_method449(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:497b306f-64ac-4226-b059-3b90d5588845
Error Number:208,State:1,Class:16
2021-04-19T20:12:05.2196350+07:00 0HM836H1SI9HS:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2 application/json 71 - 500 - application/json 13.1533ms (791a596a)
2021-04-19T20:12:15.9612130+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:12:55.9745600+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:12:56.5891570+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:12:56.6322010+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:12:56.6386470+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:12:56.6410820+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:12:56.6531390+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:12:56.6714440+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:12:56.9415110+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:12:56.9935560+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:12:57.2789740+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:12:57.2817800+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:12:57.2849960+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:12:57.2876340+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:12:57.2903750+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:13:01.3000260+07:00 0HM836JDUBL4O:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 87 (ca22a1cb)
2021-04-19T20:13:01.6259860+07:00 0HM836JDUBL4O:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:13:01.6299010+07:00 0HM836JDUBL4O:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:13:01.6605340+07:00 0HM836JDUBL4O:00000002 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:13:22.1902880+07:00 0HM836JDUBL4O:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:13:22.5753590+07:00 0HM836JDUBL4O:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:13:34.1738490+07:00 0HM836JDUBL4O:00000002 [INF] Executed DbCommand ("93"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:13:48.0202150+07:00 0HM836JDUBL4O:00000002 [ERR] Failed executing DbCommand ("8"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (627a98df)
2021-04-19T20:13:48.0884710+07:00 0HM836JDUBL4O:00000002 [ERR] An exception occurred in the database while saving changes for context type '"api.Data.DataContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1aaf9633-657b-414d-9fd8-ab5ddb8cb6c1
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1aaf9633-657b-414d-9fd8-ab5ddb8cb6c1
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at api.Data.MessageRepository.SaveAllAsync() in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 77
2021-04-19T20:13:48.9113810+07:00 0HM836JDUBL4O:00000002 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 47244.3062ms (afa2e885)
2021-04-19T20:13:48.9129130+07:00 0HM836JDUBL4O:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:13:49.3479560+07:00 0HM836JDUBL4O:00000002 [ERR] An error occurred while updating the entries. See the inner exception for details. (5d65ae99)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Messages'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1aaf9633-657b-414d-9fd8-ab5ddb8cb6c1
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at api.Data.MessageRepository.SaveAllAsync() in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Data/MessageRepository.cs:line 77
   at api.Controllers.MessagesController.CreateMessage(CreateMessageDto createMessageDto) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Controllers/MessagesController.cs:line 64
   at lambda_method20(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Aptech/Azure/DatingApi/api/Middleware/ExceptionMiddleware.cs:line 29
2021-04-19T20:13:49.3815070+07:00 0HM836JDUBL4O:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 87 - 500 - application/json 48085.0839ms (791a596a)
2021-04-19T20:14:54.2023130+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:14:56.0704570+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:14:56.3884030+07:00  [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:14:56.5000080+07:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='60']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [datingApp2] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;" (0723d8ff)
2021-04-19T20:14:56.5791400+07:00  [INF] Executed DbCommand ("79"ms) [Parameters=[""], CommandType='Text', CommandTimeout='60']"
""DROP DATABASE [datingApp2];" (0723d8ff)
2021-04-19T20:15:12.2177140+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:15:37.1428080+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:15:48.7208270+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:15:49.8256540+07:00  [INF] Executed DbCommand ("657"ms) [Parameters=[""], CommandType='Text', CommandTimeout='60']"
""CREATE DATABASE [datingApp2];" (0723d8ff)
2021-04-19T20:15:50.0850480+07:00  [INF] Executed DbCommand ("258"ms) [Parameters=[""], CommandType='Text', CommandTimeout='60']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [datingApp2] SET READ_COMMITTED_SNAPSHOT ON;
END;" (0723d8ff)
2021-04-19T20:15:50.1601190+07:00  [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:15:50.2493110+07:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);" (0723d8ff)
2021-04-19T20:15:50.2518700+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:15:50.2692520+07:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:15:50.2748770+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:15:50.2895790+07:00  [INF] Applying migration '"20210222134539_InitialCreate"'. (0e2ac64d)
2021-04-19T20:15:50.3114780+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);" (0723d8ff)
2021-04-19T20:15:50.3142750+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210222134539_InitialCreate', N'5.0.3');" (0723d8ff)
2021-04-19T20:15:50.3211950+07:00  [INF] Applying migration '"20210301134759_UserPasswordAdded"'. (0e2ac64d)
2021-04-19T20:15:50.3279890+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [PasswordHash] varbinary(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3303120+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [PasswordSalt] varbinary(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3318580+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210301134759_UserPasswordAdded', N'5.0.3');" (0723d8ff)
2021-04-19T20:15:50.3346350+07:00  [INF] Applying migration '"20210317141316_ExtendedUserEntity"'. (0e2ac64d)
2021-04-19T20:15:50.3513720+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [City] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3535050+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Country] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3560630+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Created] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';" (0723d8ff)
2021-04-19T20:15:50.3584990+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [DateOfBirth] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';" (0723d8ff)
2021-04-19T20:15:50.3604870+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Gender] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3625980+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Interests] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3645900+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [Introduction] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3666340+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [KnownAs] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3692630+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [LastActive] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';" (0723d8ff)
2021-04-19T20:15:50.3714610+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] ADD [LookingFor] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.3745000+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Photos] (
    [Id] int NOT NULL IDENTITY,
    [Url] nvarchar(max) NULL,
    [IsMain] bit NOT NULL,
    [PublicId] nvarchar(max) NULL,
    [AppUsersId] int NOT NULL,
    CONSTRAINT [PK_Photos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Photos_Users_AppUsersId] FOREIGN KEY ([AppUsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:15:50.3764630+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Photos_AppUsersId] ON [Photos] ([AppUsersId]);" (0723d8ff)
2021-04-19T20:15:50.3779380+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210317141316_ExtendedUserEntity', N'5.0.3');" (0723d8ff)
2021-04-19T20:15:50.3809880+07:00  [INF] Applying migration '"20210326134439_AddIdentity"'. (0e2ac64d)
2021-04-19T20:15:50.4159950+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Photos] DROP CONSTRAINT [FK_Photos_Users_AppUsersId];" (0723d8ff)
2021-04-19T20:15:50.4191010+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Users] DROP CONSTRAINT [PK_Users];" (0723d8ff)
2021-04-19T20:15:50.4708910+07:00  [INF] Executed DbCommand ("52"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'PasswordSalt');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Users] DROP COLUMN [PasswordSalt];" (0723d8ff)
2021-04-19T20:15:50.6106960+07:00  [INF] Executed DbCommand ("140"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Users]', N'AspNetUsers';" (0723d8ff)
2021-04-19T20:15:50.6145070+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[AspNetUsers].[Username]', N'UserName', N'COLUMN';" (0723d8ff)
2021-04-19T20:15:50.6266630+07:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AspNetUsers]') AND [c].[name] = N'UserName');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [AspNetUsers] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [AspNetUsers] ALTER COLUMN [UserName] nvarchar(256) NULL;" (0723d8ff)
2021-04-19T20:15:50.6388730+07:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AspNetUsers]') AND [c].[name] = N'PasswordHash');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [AspNetUsers] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [AspNetUsers] ALTER COLUMN [PasswordHash] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.6413160+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [AccessFailedCount] int NOT NULL DEFAULT 0;" (0723d8ff)
2021-04-19T20:15:50.6433920+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [ConcurrencyStamp] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.6455400+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [Email] nvarchar(256) NULL;" (0723d8ff)
2021-04-19T20:15:50.6480200+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [EmailConfirmed] bit NOT NULL DEFAULT CAST(0 AS bit);" (0723d8ff)
2021-04-19T20:15:50.6503880+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [LockoutEnabled] bit NOT NULL DEFAULT CAST(0 AS bit);" (0723d8ff)
2021-04-19T20:15:50.6524730+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [LockoutEnd] datetimeoffset NULL;" (0723d8ff)
2021-04-19T20:15:50.6546720+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [NormalizedEmail] nvarchar(256) NULL;" (0723d8ff)
2021-04-19T20:15:50.6567670+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [NormalizedUserName] nvarchar(256) NULL;" (0723d8ff)
2021-04-19T20:15:50.6588410+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [PhoneNumber] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.6612730+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [PhoneNumberConfirmed] bit NOT NULL DEFAULT CAST(0 AS bit);" (0723d8ff)
2021-04-19T20:15:50.6634590+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [SecurityStamp] nvarchar(max) NULL;" (0723d8ff)
2021-04-19T20:15:50.6662330+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD [TwoFactorEnabled] bit NOT NULL DEFAULT CAST(0 AS bit);" (0723d8ff)
2021-04-19T20:15:50.6698790+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [AspNetUsers] ADD CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id]);" (0723d8ff)
2021-04-19T20:15:50.6723280+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);" (0723d8ff)
2021-04-19T20:15:50.6764930+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:15:50.6792580+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:15:50.6823650+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:15:50.6851200+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:15:50.6883950+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);" (0723d8ff)
2021-04-19T20:15:50.6902980+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);" (0723d8ff)
2021-04-19T20:15:50.6923900+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;" (0723d8ff)
2021-04-19T20:15:50.6941840+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);" (0723d8ff)
2021-04-19T20:15:50.6961100+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;" (0723d8ff)
2021-04-19T20:15:50.6979310+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);" (0723d8ff)
2021-04-19T20:15:50.6996990+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);" (0723d8ff)
2021-04-19T20:15:50.7014130+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);" (0723d8ff)
2021-04-19T20:15:50.7035660+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Photos] ADD CONSTRAINT [FK_Photos_AspNetUsers_AppUsersId] FOREIGN KEY ([AppUsersId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE;" (0723d8ff)
2021-04-19T20:15:50.7049670+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210326134439_AddIdentity', N'5.0.3');" (0723d8ff)
2021-04-19T20:15:50.7299120+07:00  [INF] Applying migration '"20210407141120_addLikes"'. (0e2ac64d)
2021-04-19T20:15:50.7514110+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Likes] (
    [LikedUserId] int NOT NULL,
    [SourceUserId] int NOT NULL,
    CONSTRAINT [PK_Likes] PRIMARY KEY ([SourceUserId], [LikedUserId]),
    CONSTRAINT [FK_Likes_AspNetUsers_LikedUserId] FOREIGN KEY ([LikedUserId]) REFERENCES [AspNetUsers] ([Id]),
    CONSTRAINT [FK_Likes_AspNetUsers_SourceUserId] FOREIGN KEY ([SourceUserId]) REFERENCES [AspNetUsers] ([Id])
);" (0723d8ff)
2021-04-19T20:15:50.7541870+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Likes_LikedUserId] ON [Likes] ([LikedUserId]);" (0723d8ff)
2021-04-19T20:15:50.7563660+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210407141120_addLikes', N'5.0.3');" (0723d8ff)
2021-04-19T20:15:50.7598960+07:00  [INF] Applying migration '"20210419131537_addMessages"'. (0e2ac64d)
2021-04-19T20:15:50.7808000+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Messages] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [SenderUsername] nvarchar(max) NULL,
    [RecipientId] int NOT NULL,
    [RecipientUsername] nvarchar(max) NULL,
    [Content] nvarchar(max) NULL,
    [DateRead] datetime2 NULL,
    [MessageSent] datetime2 NOT NULL,
    [SenderDeleted] bit NOT NULL,
    [RecipientDeleted] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Messages_AspNetUsers_RecipientId] FOREIGN KEY ([RecipientId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Messages_AspNetUsers_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION
);" (0723d8ff)
2021-04-19T20:15:50.7828590+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Messages_RecipientId] ON [Messages] ([RecipientId]);" (0723d8ff)
2021-04-19T20:15:50.7846930+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Messages_SenderId] ON [Messages] ([SenderId]);" (0723d8ff)
2021-04-19T20:15:50.7862550+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210419131537_addMessages', N'5.0.3');" (0723d8ff)
2021-04-19T20:16:00.0853870+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:00.4426240+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:16:00.4827450+07:00  [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:16:00.4891490+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:16:00.4916770+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:16:00.5037280+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:16:00.5205210+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:16:00.7337830+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:16:00.8483320+07:00  [INF] Executed DbCommand ("22"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:16:00.8576150+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:16:01.0016400+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.0462890+07:00  [INF] Executed DbCommand ("7"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:16:01.0482760+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:16:01.0540350+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.0591430+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:16:01.0610480+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0" (0723d8ff)
2021-04-19T20:16:01.0643900+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.1023230+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.2099320+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.2214110+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.2362830+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.2597770+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.2644370+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.2828080+07:00  [INF] Executed DbCommand ("7"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.2980230+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.3047640+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.3242040+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.3292780+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.3312210+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.3359660+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.3391410+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.3411620+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.3435820+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.3475630+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.3494360+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.3660860+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.3699570+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.3717340+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.3767090+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.3794400+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.3814090+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.3836670+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.3873720+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.3893330+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.4059810+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.4105860+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.4122970+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.4170230+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.4197790+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.4214950+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.4237430+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.4271220+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.4292260+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.4457990+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.4497160+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.4516240+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.4563390+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.4591400+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.4609970+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.4631370+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.4666210+07:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.4684220+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.4849620+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.4889050+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.4908750+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.4958470+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.4985130+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.5003820+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.5027520+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.5065400+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.5084980+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.5320750+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.5376710+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.5399090+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.5459940+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.5498250+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.5523130+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.5550160+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.5599140+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.5623920+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.5805280+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.5863350+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.5886040+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.5944000+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.5978660+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.6004610+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.6038000+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.6086420+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.6108680+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.6290100+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.6342130+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.6363600+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.6424430+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.6456570+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.6479650+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.6505600+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.6552770+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.6575550+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.6758390+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.6818600+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.6841280+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Photos] ([AppUsersId], [IsMain], [PublicId], [Url])
VALUES (@p24, @p25, @p26, @p27);
SELECT [Id]
FROM [Photos]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.6899620+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.6929270+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.6952080+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.6982370+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.7031310+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.7054170+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.7555060+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.7610400+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:01.7671910+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.7704830+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.7728810+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.7757480+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.7802600+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.7827500+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.7882980+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.7917240+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-19T20:16:01.7939740+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-19T20:16:01.7964120+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-19T20:16:01.8010710+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-19T20:16:01.8031190+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:16:01.8294400+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:16:02.0448640+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:16:02.0449810+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:16:02.0451340+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:16:02.0451660+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:16:02.0451910+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:16:05.2685170+07:00 0HM836L4OU8KS:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 87 (ca22a1cb)
2021-04-19T20:16:05.4773640+07:00 0HM836L4OU8KS:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:16:05.4808600+07:00 0HM836L4OU8KS:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:16:05.5078140+07:00 0HM836L4OU8KS:00000002 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:16:05.7015170+07:00 0HM836L4OU8KS:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:05.7992630+07:00 0HM836L4OU8KS:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:16:05.8073060+07:00 0HM836L4OU8KS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:16:05.8387490+07:00 0HM836L4OU8KS:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:16:05.8665720+07:00 0HM836L4OU8KS:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MessageDto"'. (605b4265)
2021-04-19T20:16:05.8975670+07:00 0HM836L4OU8KS:00000002 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 383.3942ms (afa2e885)
2021-04-19T20:16:05.8979860+07:00 0HM836L4OU8KS:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:16:05.9032360+07:00 0HM836L4OU8KS:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 87 - 200 - application/json;+charset=utf-8 638.9839ms (791a596a)
2021-04-19T20:16:15.8036790+07:00 0HM836L4OU8KU:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2 application/json 71 (ca22a1cb)
2021-04-19T20:16:15.8056920+07:00 0HM836L4OU8KU:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:16:15.8058590+07:00 0HM836L4OU8KU:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:16:15.8098120+07:00 0HM836L4OU8KU:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:16:15.8472420+07:00 0HM836L4OU8KU:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:15.9008570+07:00 0HM836L4OU8KU:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:16:15.9362310+07:00 0HM836L4OU8KU:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:16:15.9404170+07:00 0HM836L4OU8KU:00000002 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:16:15.9438670+07:00 0HM836L4OU8KU:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 133.929ms (afa2e885)
2021-04-19T20:16:15.9440060+07:00 0HM836L4OU8KU:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:16:15.9444180+07:00 0HM836L4OU8KU:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2 application/json 71 - 200 - application/json;+charset=utf-8 140.7079ms (791a596a)
2021-04-19T20:16:20.0675330+07:00 0HM836L4OU8KU:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:16:20.0704430+07:00 0HM836L4OU8KU:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:16:20.0706530+07:00 0HM836L4OU8KU:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:16:20.0710100+07:00 0HM836L4OU8KU:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:16:20.0739220+07:00 0HM836L4OU8KU:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:20.0790260+07:00 0HM836L4OU8KU:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:16:20.0817490+07:00 0HM836L4OU8KU:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:16:20.0822420+07:00 0HM836L4OU8KU:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:16:20.0825510+07:00 0HM836L4OU8KU:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 11.4758ms (afa2e885)
2021-04-19T20:16:20.0825930+07:00 0HM836L4OU8KU:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:16:20.0827970+07:00 0HM836L4OU8KU:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 15.2999ms (791a596a)
2021-04-19T20:16:31.1538560+07:00 0HM836L4OU8KU:00000004 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:16:31.1541340+07:00 0HM836L4OU8KU:00000004 [INF] Successfully validated the token. (60169667)
2021-04-19T20:16:31.1541830+07:00 0HM836L4OU8KU:00000004 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:16:31.1542670+07:00 0HM836L4OU8KU:00000004 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:16:31.1547380+07:00 0HM836L4OU8KU:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:31.1575880+07:00 0HM836L4OU8KU:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:16:31.1600020+07:00 0HM836L4OU8KU:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:16:31.1602380+07:00 0HM836L4OU8KU:00000004 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:16:31.1603650+07:00 0HM836L4OU8KU:00000004 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.0688ms (afa2e885)
2021-04-19T20:16:31.1603970+07:00 0HM836L4OU8KU:00000004 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:16:31.1604780+07:00 0HM836L4OU8KU:00000004 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 6.6217ms (791a596a)
2021-04-19T20:16:44.5176900+07:00 0HM836L4OU8KU:00000005 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:16:44.5180580+07:00 0HM836L4OU8KU:00000005 [INF] Successfully validated the token. (60169667)
2021-04-19T20:16:44.5181280+07:00 0HM836L4OU8KU:00000005 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:16:44.5182290+07:00 0HM836L4OU8KU:00000005 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:16:44.5187300+07:00 0HM836L4OU8KU:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:44.5221960+07:00 0HM836L4OU8KU:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:16:44.5252420+07:00 0HM836L4OU8KU:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:16:44.5254780+07:00 0HM836L4OU8KU:00000005 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:16:44.5255760+07:00 0HM836L4OU8KU:00000005 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.3053ms (afa2e885)
2021-04-19T20:16:44.5256040+07:00 0HM836L4OU8KU:00000005 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:16:44.5256890+07:00 0HM836L4OU8KU:00000005 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageNumber=2&pageSize=4&Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 8.0032ms (791a596a)
2021-04-19T20:16:51.9712150+07:00 0HM836L4OU8KU:00000006 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:16:51.9715140+07:00 0HM836L4OU8KU:00000006 [INF] Successfully validated the token. (60169667)
2021-04-19T20:16:51.9715700+07:00 0HM836L4OU8KU:00000006 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:16:51.9716570+07:00 0HM836L4OU8KU:00000006 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:16:51.9722330+07:00 0HM836L4OU8KU:00000006 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:51.9818860+07:00 0HM836L4OU8KU:00000006 [INF] Executed DbCommand ("9"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:16:51.9867210+07:00 0HM836L4OU8KU:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:16:51.9869360+07:00 0HM836L4OU8KU:00000006 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:16:51.9870540+07:00 0HM836L4OU8KU:00000006 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 15.3724ms (afa2e885)
2021-04-19T20:16:51.9870810+07:00 0HM836L4OU8KU:00000006 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:16:51.9871830+07:00 0HM836L4OU8KU:00000006 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 16.0118ms (791a596a)
2021-04-19T20:16:52.9728990+07:00 0HM836L4OU8KU:00000007 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:16:52.9732350+07:00 0HM836L4OU8KU:00000007 [INF] Successfully validated the token. (60169667)
2021-04-19T20:16:52.9733050+07:00 0HM836L4OU8KU:00000007 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:16:52.9733640+07:00 0HM836L4OU8KU:00000007 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:16:52.9737520+07:00 0HM836L4OU8KU:00000007 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:52.9763900+07:00 0HM836L4OU8KU:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:16:52.9791730+07:00 0HM836L4OU8KU:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:16:52.9795370+07:00 0HM836L4OU8KU:00000007 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:16:52.9798020+07:00 0HM836L4OU8KU:00000007 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.397ms (afa2e885)
2021-04-19T20:16:52.9798660+07:00 0HM836L4OU8KU:00000007 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:16:52.9800830+07:00 0HM836L4OU8KU:00000007 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 7.1360ms (791a596a)
2021-04-19T20:16:56.0457000+07:00 0HM836L4OU8KU:00000008 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:16:56.0459170+07:00 0HM836L4OU8KU:00000008 [INF] Successfully validated the token. (60169667)
2021-04-19T20:16:56.0459630+07:00 0HM836L4OU8KU:00000008 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:16:56.0460300+07:00 0HM836L4OU8KU:00000008 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:16:56.0464760+07:00 0HM836L4OU8KU:00000008 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:16:56.0507880+07:00 0HM836L4OU8KU:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:16:56.0536730+07:00 0HM836L4OU8KU:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:16:56.0539050+07:00 0HM836L4OU8KU:00000008 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:16:56.0540840+07:00 0HM836L4OU8KU:00000008 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.9831ms (afa2e885)
2021-04-19T20:16:56.0541160+07:00 0HM836L4OU8KU:00000008 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:16:56.0542710+07:00 0HM836L4OU8KU:00000008 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 - 200 - application/json;+charset=utf-8 8.5507ms (791a596a)
2021-04-19T20:17:32.9669200+07:00 0HM836L4OU8KU:00000009 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 53 (ca22a1cb)
2021-04-19T20:17:32.9671090+07:00 0HM836L4OU8KU:00000009 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T20:17:32.9702380+07:00 0HM836L4OU8KU:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T20:17:32.9744710+07:00 0HM836L4OU8KU:00000009 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:17:32.9904480+07:00 0HM836L4OU8KU:00000009 [INF] Executed DbCommand ("6"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:17:33.0359010+07:00 0HM836L4OU8KU:00000009 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-19T20:17:33.0537710+07:00 0HM836L4OU8KU:00000009 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-19T20:17:33.0549640+07:00 0HM836L4OU8KU:00000009 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 84.6543ms (afa2e885)
2021-04-19T20:17:33.0550210+07:00 0HM836L4OU8KU:00000009 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T20:17:33.0553250+07:00 0HM836L4OU8KU:00000009 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 53 - 200 - application/json;+charset=utf-8 88.4196ms (791a596a)
2021-04-19T20:18:14.7660730+07:00 0HM836L4OU8L0:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 91 (ca22a1cb)
2021-04-19T20:18:14.7663060+07:00 0HM836L4OU8L0:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:18:14.7663430+07:00 0HM836L4OU8L0:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:18:14.7664080+07:00 0HM836L4OU8L0:00000002 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:18:14.7668430+07:00 0HM836L4OU8L0:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:18:14.7698090+07:00 0HM836L4OU8L0:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:18:14.7722230+07:00 0HM836L4OU8L0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:18:14.7772330+07:00 0HM836L4OU8L0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:18:14.7809060+07:00 0HM836L4OU8L0:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MessageDto"'. (605b4265)
2021-04-19T20:18:14.7811550+07:00 0HM836L4OU8L0:00000002 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 14.723ms (afa2e885)
2021-04-19T20:18:14.7811790+07:00 0HM836L4OU8L0:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:18:14.7812600+07:00 0HM836L4OU8L0:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 91 - 200 - application/json;+charset=utf-8 15.2190ms (791a596a)
2021-04-19T20:18:20.3201810+07:00 0HM836L4OU8KU:0000000A [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:18:20.3204020+07:00 0HM836L4OU8KU:0000000A [INF] Successfully validated the token. (60169667)
2021-04-19T20:18:20.3204450+07:00 0HM836L4OU8KU:0000000A [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:18:20.3205090+07:00 0HM836L4OU8KU:0000000A [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:18:20.3209730+07:00 0HM836L4OU8KU:0000000A [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:18:20.3248830+07:00 0HM836L4OU8KU:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:18:20.3282070+07:00 0HM836L4OU8KU:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:18:20.3285100+07:00 0HM836L4OU8KU:0000000A [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:18:20.3297560+07:00 0HM836L4OU8KU:0000000A [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 9.2085ms (afa2e885)
2021-04-19T20:18:20.3298000+07:00 0HM836L4OU8KU:0000000A [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:18:20.3298970+07:00 0HM836L4OU8KU:0000000A [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 - 200 - application/json;+charset=utf-8 9.7216ms (791a596a)
2021-04-19T20:18:26.2305890+07:00 0HM836L4OU8KU:0000000B [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:18:26.2307850+07:00 0HM836L4OU8KU:0000000B [INF] Successfully validated the token. (60169667)
2021-04-19T20:18:26.2308460+07:00 0HM836L4OU8KU:0000000B [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:18:26.2309060+07:00 0HM836L4OU8KU:0000000B [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:18:26.2314290+07:00 0HM836L4OU8KU:0000000B [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:18:26.2344420+07:00 0HM836L4OU8KU:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:18:26.2375210+07:00 0HM836L4OU8KU:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:18:26.2377540+07:00 0HM836L4OU8KU:0000000B [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:18:26.2379360+07:00 0HM836L4OU8KU:0000000B [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.0047ms (afa2e885)
2021-04-19T20:18:26.2379610+07:00 0HM836L4OU8KU:0000000B [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:18:26.2380490+07:00 0HM836L4OU8KU:0000000B [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 7.4670ms (791a596a)
2021-04-19T20:18:30.6846920+07:00 0HM836L4OU8KU:0000000C [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:18:30.6849300+07:00 0HM836L4OU8KU:0000000C [INF] Successfully validated the token. (60169667)
2021-04-19T20:18:30.6849830+07:00 0HM836L4OU8KU:0000000C [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:18:30.6850810+07:00 0HM836L4OU8KU:0000000C [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:18:30.6855910+07:00 0HM836L4OU8KU:0000000C [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:18:30.6890410+07:00 0HM836L4OU8KU:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:18:30.6928330+07:00 0HM836L4OU8KU:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:18:30.6931010+07:00 0HM836L4OU8KU:0000000C [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:18:30.6932440+07:00 0HM836L4OU8KU:0000000C [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 8.1291ms (afa2e885)
2021-04-19T20:18:30.6932850+07:00 0HM836L4OU8KU:0000000C [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:18:30.6933680+07:00 0HM836L4OU8KU:0000000C [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 8.6801ms (791a596a)
2021-04-19T20:18:45.8728480+07:00 0HM836L4OU8L0:00000003 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 91 (ca22a1cb)
2021-04-19T20:18:45.8736360+07:00 0HM836L4OU8L0:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:18:45.8737940+07:00 0HM836L4OU8L0:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:18:45.8740680+07:00 0HM836L4OU8L0:00000003 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:18:45.8748000+07:00 0HM836L4OU8L0:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:18:45.8778620+07:00 0HM836L4OU8L0:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:18:45.8808960+07:00 0HM836L4OU8L0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:18:45.8865320+07:00 0HM836L4OU8L0:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:18:45.8915170+07:00 0HM836L4OU8L0:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MessageDto"'. (605b4265)
2021-04-19T20:18:45.8917640+07:00 0HM836L4OU8L0:00000003 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 17.6587ms (afa2e885)
2021-04-19T20:18:45.8917990+07:00 0HM836L4OU8L0:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:18:45.8919620+07:00 0HM836L4OU8L0:00000003 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 91 - 200 - application/json;+charset=utf-8 19.1339ms (791a596a)
2021-04-19T20:20:41.6090560+07:00 0HM836L4OU8L2:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:20:41.6093050+07:00 0HM836L4OU8L2:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:20:41.6093550+07:00 0HM836L4OU8L2:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:20:41.6094750+07:00 0HM836L4OU8L2:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:20:41.6100320+07:00 0HM836L4OU8L2:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:20:41.6129160+07:00 0HM836L4OU8L2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:20:41.6156120+07:00 0HM836L4OU8L2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:20:41.6158320+07:00 0HM836L4OU8L2:00000002 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:20:41.6163470+07:00 0HM836L4OU8L2:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.8313ms (afa2e885)
2021-04-19T20:20:41.6163880+07:00 0HM836L4OU8L2:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:20:41.6164840+07:00 0HM836L4OU8L2:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 7.4488ms (791a596a)
2021-04-19T20:20:54.3400270+07:00 0HM836L4OU8L2:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:20:54.3402410+07:00 0HM836L4OU8L2:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:20:54.3403310+07:00 0HM836L4OU8L2:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:20:54.3404460+07:00 0HM836L4OU8L2:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:20:54.3408060+07:00 0HM836L4OU8L2:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:20:54.3438670+07:00 0HM836L4OU8L2:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:20:54.3467370+07:00 0HM836L4OU8L2:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:20:54.3469680+07:00 0HM836L4OU8L2:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:20:54.3471370+07:00 0HM836L4OU8L2:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.6639ms (afa2e885)
2021-04-19T20:20:54.3471610+07:00 0HM836L4OU8L2:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:20:54.3472560+07:00 0HM836L4OU8L2:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 7.2946ms (791a596a)
2021-04-19T20:20:55.6545190+07:00 0HM836L4OU8L2:00000004 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:20:55.6548210+07:00 0HM836L4OU8L2:00000004 [INF] Successfully validated the token. (60169667)
2021-04-19T20:20:55.6548900+07:00 0HM836L4OU8L2:00000004 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:20:55.6549950+07:00 0HM836L4OU8L2:00000004 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:20:55.6555500+07:00 0HM836L4OU8L2:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:20:55.6888200+07:00 0HM836L4OU8L2:00000004 [INF] Executed DbCommand ("33"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:20:55.6927530+07:00 0HM836L4OU8L2:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:20:55.6929730+07:00 0HM836L4OU8L2:00000004 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:20:55.6930730+07:00 0HM836L4OU8L2:00000004 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 38.0519ms (afa2e885)
2021-04-19T20:20:55.6930950+07:00 0HM836L4OU8L2:00000004 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:20:55.6931990+07:00 0HM836L4OU8L2:00000004 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 38.6820ms (791a596a)
2021-04-19T20:21:01.1036420+07:00 0HM836L4OU8L2:00000005 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:21:01.1038990+07:00 0HM836L4OU8L2:00000005 [INF] Successfully validated the token. (60169667)
2021-04-19T20:21:01.1039580+07:00 0HM836L4OU8L2:00000005 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:21:01.1040160+07:00 0HM836L4OU8L2:00000005 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:21:01.1044520+07:00 0HM836L4OU8L2:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:21:01.1074160+07:00 0HM836L4OU8L2:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:21:01.1101270+07:00 0HM836L4OU8L2:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:21:01.1103110+07:00 0HM836L4OU8L2:00000005 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:21:01.1104050+07:00 0HM836L4OU8L2:00000005 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.3571ms (afa2e885)
2021-04-19T20:21:01.1104390+07:00 0HM836L4OU8L2:00000005 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:21:01.1105770+07:00 0HM836L4OU8L2:00000005 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 6.9203ms (791a596a)
2021-04-19T20:22:21.2710730+07:00 0HM836L4OU8L2:00000006 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:22:21.2713290+07:00 0HM836L4OU8L2:00000006 [INF] Successfully validated the token. (60169667)
2021-04-19T20:22:21.2713900+07:00 0HM836L4OU8L2:00000006 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:22:21.2715350+07:00 0HM836L4OU8L2:00000006 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:22:21.2729890+07:00 0HM836L4OU8L2:00000006 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:22:21.2781630+07:00 0HM836L4OU8L2:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:22:21.2812650+07:00 0HM836L4OU8L2:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:22:21.2814700+07:00 0HM836L4OU8L2:00000006 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:22:21.2815760+07:00 0HM836L4OU8L2:00000006 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 10.0026ms (afa2e885)
2021-04-19T20:22:21.2816010+07:00 0HM836L4OU8L2:00000006 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:22:21.2816730+07:00 0HM836L4OU8L2:00000006 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 10.6269ms (791a596a)
2021-04-19T20:23:06.9260810+07:00 0HM836L4OU8L2:00000007 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:23:06.9262760+07:00 0HM836L4OU8L2:00000007 [INF] Successfully validated the token. (60169667)
2021-04-19T20:23:06.9263170+07:00 0HM836L4OU8L2:00000007 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:23:06.9263780+07:00 0HM836L4OU8L2:00000007 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:23:06.9269370+07:00 0HM836L4OU8L2:00000007 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:23:06.9305090+07:00 0HM836L4OU8L2:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:23:06.9337470+07:00 0HM836L4OU8L2:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:23:06.9339860+07:00 0HM836L4OU8L2:00000007 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:23:06.9340890+07:00 0HM836L4OU8L2:00000007 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.6918ms (afa2e885)
2021-04-19T20:23:06.9341110+07:00 0HM836L4OU8L2:00000007 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:23:06.9342000+07:00 0HM836L4OU8L2:00000007 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 8.1208ms (791a596a)
2021-04-19T20:23:30.1202690+07:00 0HM836L4OU8L2:00000008 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:23:30.1205280+07:00 0HM836L4OU8L2:00000008 [INF] Successfully validated the token. (60169667)
2021-04-19T20:23:30.1205890+07:00 0HM836L4OU8L2:00000008 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:23:30.1206680+07:00 0HM836L4OU8L2:00000008 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:23:30.1212430+07:00 0HM836L4OU8L2:00000008 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:23:30.1240350+07:00 0HM836L4OU8L2:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:23:30.1268560+07:00 0HM836L4OU8L2:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:23:30.1271040+07:00 0HM836L4OU8L2:00000008 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:23:30.1272370+07:00 0HM836L4OU8L2:00000008 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.5455ms (afa2e885)
2021-04-19T20:23:30.1272570+07:00 0HM836L4OU8L2:00000008 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:23:30.1273360+07:00 0HM836L4OU8L2:00000008 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 7.0814ms (791a596a)
2021-04-19T20:23:31.4299590+07:00 0HM836L4OU8L2:00000009 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:23:31.4301790+07:00 0HM836L4OU8L2:00000009 [INF] Successfully validated the token. (60169667)
2021-04-19T20:23:31.4302790+07:00 0HM836L4OU8L2:00000009 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:23:31.4303390+07:00 0HM836L4OU8L2:00000009 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:23:31.4307640+07:00 0HM836L4OU8L2:00000009 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:23:31.4335200+07:00 0HM836L4OU8L2:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:23:31.4364080+07:00 0HM836L4OU8L2:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:23:31.4367320+07:00 0HM836L4OU8L2:00000009 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:23:31.4368980+07:00 0HM836L4OU8L2:00000009 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.5364ms (afa2e885)
2021-04-19T20:23:31.4369410+07:00 0HM836L4OU8L2:00000009 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:23:31.4370610+07:00 0HM836L4OU8L2:00000009 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 7.0889ms (791a596a)
2021-04-19T20:24:31.9153320+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:24:36.0713040+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:24:36.4297360+07:00  [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:24:36.4712510+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:24:36.4770670+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:24:36.4798710+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:24:36.4932500+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:24:36.5115200+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:24:36.7173550+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:24:36.7363350+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:24:36.8963840+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:24:36.8965000+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:24:36.8966530+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:24:36.8966870+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:24:36.8967190+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:25:05.0411720+07:00 0HM836Q5KV12G:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:25:05.2471320+07:00 0HM836Q5KV12G:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:25:05.2488800+07:00 0HM836Q5KV12G:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:25:05.2726920+07:00 0HM836Q5KV12G:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:25:05.4540790+07:00 0HM836Q5KV12G:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:25:05.5670470+07:00 0HM836Q5KV12G:00000002 [INF] Executed DbCommand ("18"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:25:05.6323730+07:00 0HM836Q5KV12G:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:25:05.6534730+07:00 0HM836Q5KV12G:00000002 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:25:05.6778050+07:00 0HM836Q5KV12G:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 399.3813ms (afa2e885)
2021-04-19T20:25:05.6787600+07:00 0HM836Q5KV12G:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:25:05.6838430+07:00 0HM836Q5KV12G:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 645.0537ms (791a596a)
2021-04-19T20:25:14.8939190+07:00 0HM836Q5KV12G:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:25:14.8961330+07:00 0HM836Q5KV12G:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:25:14.8962820+07:00 0HM836Q5KV12G:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:25:14.8964950+07:00 0HM836Q5KV12G:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:25:14.9265140+07:00 0HM836Q5KV12G:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:25:14.9337600+07:00 0HM836Q5KV12G:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:25:14.9367520+07:00 0HM836Q5KV12G:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:25:14.9372780+07:00 0HM836Q5KV12G:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:25:14.9377100+07:00 0HM836Q5KV12G:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 41.1412ms (afa2e885)
2021-04-19T20:25:14.9377610+07:00 0HM836Q5KV12G:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:25:14.9379580+07:00 0HM836Q5KV12G:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 44.0863ms (791a596a)
2021-04-19T20:25:19.6151970+07:00 0HM836Q5KV12G:00000004 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:25:19.6182910+07:00 0HM836Q5KV12G:00000004 [INF] Successfully validated the token. (60169667)
2021-04-19T20:25:19.6184090+07:00 0HM836Q5KV12G:00000004 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:25:19.6185350+07:00 0HM836Q5KV12G:00000004 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:25:19.6205940+07:00 0HM836Q5KV12G:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:25:19.6238020+07:00 0HM836Q5KV12G:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:25:19.6273540+07:00 0HM836Q5KV12G:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:25:19.6276990+07:00 0HM836Q5KV12G:00000004 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:25:19.6278930+07:00 0HM836Q5KV12G:00000004 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 9.3025ms (afa2e885)
2021-04-19T20:25:19.6279440+07:00 0HM836Q5KV12G:00000004 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:25:19.6280850+07:00 0HM836Q5KV12G:00000004 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 12.8761ms (791a596a)
2021-04-19T20:25:20.9093120+07:00 0HM836Q5KV12G:00000005 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:25:20.9095690+07:00 0HM836Q5KV12G:00000005 [INF] Successfully validated the token. (60169667)
2021-04-19T20:25:20.9096130+07:00 0HM836Q5KV12G:00000005 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:25:20.9096880+07:00 0HM836Q5KV12G:00000005 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:25:20.9101720+07:00 0HM836Q5KV12G:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:25:20.9128280+07:00 0HM836Q5KV12G:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:25:20.9172580+07:00 0HM836Q5KV12G:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:25:20.9179870+07:00 0HM836Q5KV12G:00000005 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:25:20.9182470+07:00 0HM836Q5KV12G:00000005 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 8.5162ms (afa2e885)
2021-04-19T20:25:20.9183270+07:00 0HM836Q5KV12G:00000005 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:25:20.9185840+07:00 0HM836Q5KV12G:00000005 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 9.1675ms (791a596a)
2021-04-19T20:25:24.8352700+07:00 0HM836Q5KV12G:00000006 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:25:24.8356110+07:00 0HM836Q5KV12G:00000006 [INF] Successfully validated the token. (60169667)
2021-04-19T20:25:24.8356740+07:00 0HM836Q5KV12G:00000006 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:25:24.8357790+07:00 0HM836Q5KV12G:00000006 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:25:24.8369040+07:00 0HM836Q5KV12G:00000006 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:25:24.8423260+07:00 0HM836Q5KV12G:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:25:24.8469430+07:00 0HM836Q5KV12G:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:25:24.8472130+07:00 0HM836Q5KV12G:00000006 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:25:24.8473840+07:00 0HM836Q5KV12G:00000006 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 11.5504ms (afa2e885)
2021-04-19T20:25:24.8474150+07:00 0HM836Q5KV12G:00000006 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:25:24.8475330+07:00 0HM836Q5KV12G:00000006 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 - 200 - application/json;+charset=utf-8 12.2583ms (791a596a)
2021-04-19T20:26:12.8505810+07:00 0HM836Q5KV12I:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 96 (ca22a1cb)
2021-04-19T20:26:12.8508900+07:00 0HM836Q5KV12I:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:12.8510000+07:00 0HM836Q5KV12I:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:26:12.8544830+07:00 0HM836Q5KV12I:00000002 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:12.8592260+07:00 0HM836Q5KV12I:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:12.9224320+07:00 0HM836Q5KV12I:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:26:13.0474910+07:00 0HM836Q5KV12I:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:26:13.1859100+07:00 0HM836Q5KV12I:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:26:13.2374290+07:00 0HM836Q5KV12I:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MessageDto"'. (605b4265)
2021-04-19T20:26:13.2380280+07:00 0HM836Q5KV12I:00000002 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 383.5025ms (afa2e885)
2021-04-19T20:26:13.2381250+07:00 0HM836Q5KV12I:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:26:13.2382980+07:00 0HM836Q5KV12I:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 96 - 200 - application/json;+charset=utf-8 387.7211ms (791a596a)
2021-04-19T20:26:22.7837110+07:00 0HM836Q5KV12G:00000007 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:26:22.7839720+07:00 0HM836Q5KV12G:00000007 [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:22.7840170+07:00 0HM836Q5KV12G:00000007 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:22.7840860+07:00 0HM836Q5KV12G:00000007 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:22.7845800+07:00 0HM836Q5KV12G:00000007 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:22.7907090+07:00 0HM836Q5KV12G:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:22.7969200+07:00 0HM836Q5KV12G:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:22.7972910+07:00 0HM836Q5KV12G:00000007 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:22.7974540+07:00 0HM836Q5KV12G:00000007 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 13.3378ms (afa2e885)
2021-04-19T20:26:22.7975110+07:00 0HM836Q5KV12G:00000007 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:22.7976200+07:00 0HM836Q5KV12G:00000007 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 - 200 - application/json;+charset=utf-8 13.8903ms (791a596a)
2021-04-19T20:26:23.8037980+07:00 0HM836Q5KV12G:00000008 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:26:23.8040570+07:00 0HM836Q5KV12G:00000008 [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:23.8041100+07:00 0HM836Q5KV12G:00000008 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:23.8041750+07:00 0HM836Q5KV12G:00000008 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:23.8046160+07:00 0HM836Q5KV12G:00000008 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:23.8072870+07:00 0HM836Q5KV12G:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:23.8104570+07:00 0HM836Q5KV12G:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:23.8111090+07:00 0HM836Q5KV12G:00000008 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:23.8115120+07:00 0HM836Q5KV12G:00000008 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.2592ms (afa2e885)
2021-04-19T20:26:23.8116470+07:00 0HM836Q5KV12G:00000008 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:23.8119660+07:00 0HM836Q5KV12G:00000008 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 - 200 - application/json;+charset=utf-8 8.0813ms (791a596a)
2021-04-19T20:26:24.5121620+07:00 0HM836Q5KV12G:00000009 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:26:24.5124390+07:00 0HM836Q5KV12G:00000009 [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:24.5124910+07:00 0HM836Q5KV12G:00000009 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:24.5126120+07:00 0HM836Q5KV12G:00000009 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:24.5131150+07:00 0HM836Q5KV12G:00000009 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:24.5163290+07:00 0HM836Q5KV12G:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:24.5201100+07:00 0HM836Q5KV12G:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:24.5203610+07:00 0HM836Q5KV12G:00000009 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:24.5204880+07:00 0HM836Q5KV12G:00000009 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.8366ms (afa2e885)
2021-04-19T20:26:24.5205290+07:00 0HM836Q5KV12G:00000009 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:24.5206580+07:00 0HM836Q5KV12G:00000009 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 - 200 - application/json;+charset=utf-8 8.5521ms (791a596a)
2021-04-19T20:26:30.1458660+07:00 0HM836Q5KV12G:0000000A [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageSize=4 application/json 71 (ca22a1cb)
2021-04-19T20:26:30.1461040+07:00 0HM836Q5KV12G:0000000A [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:30.1461640+07:00 0HM836Q5KV12G:0000000A [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:30.1462330+07:00 0HM836Q5KV12G:0000000A [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:30.1466980+07:00 0HM836Q5KV12G:0000000A [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:30.1495010+07:00 0HM836Q5KV12G:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:30.1527050+07:00 0HM836Q5KV12G:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:30.1529760+07:00 0HM836Q5KV12G:0000000A [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:30.1530880+07:00 0HM836Q5KV12G:0000000A [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.8228ms (afa2e885)
2021-04-19T20:26:30.1531250+07:00 0HM836Q5KV12G:0000000A [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:30.1532080+07:00 0HM836Q5KV12G:0000000A [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageSize=4 application/json 71 - 200 - application/json;+charset=utf-8 7.3534ms (791a596a)
2021-04-19T20:26:31.0939130+07:00 0HM836Q5KV12G:0000000B [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageSize=4 application/json 71 (ca22a1cb)
2021-04-19T20:26:31.0941540+07:00 0HM836Q5KV12G:0000000B [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:31.0941990+07:00 0HM836Q5KV12G:0000000B [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:31.0942950+07:00 0HM836Q5KV12G:0000000B [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:31.0949100+07:00 0HM836Q5KV12G:0000000B [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:31.0977170+07:00 0HM836Q5KV12G:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:31.1005990+07:00 0HM836Q5KV12G:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:31.1008280+07:00 0HM836Q5KV12G:0000000B [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:31.1009460+07:00 0HM836Q5KV12G:0000000B [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.6147ms (afa2e885)
2021-04-19T20:26:31.1009750+07:00 0HM836Q5KV12G:0000000B [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:31.1010760+07:00 0HM836Q5KV12G:0000000B [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageSize=4 application/json 71 - 200 - application/json;+charset=utf-8 7.2562ms (791a596a)
2021-04-19T20:26:37.8574540+07:00 0HM836Q5KV12G:0000000C [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?pageSize=4 application/json 71 (ca22a1cb)
2021-04-19T20:26:37.8577620+07:00 0HM836Q5KV12G:0000000C [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:37.8578150+07:00 0HM836Q5KV12G:0000000C [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:37.8578860+07:00 0HM836Q5KV12G:0000000C [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:37.8585010+07:00 0HM836Q5KV12G:0000000C [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:37.8614710+07:00 0HM836Q5KV12G:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:37.8646260+07:00 0HM836Q5KV12G:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:37.8648630+07:00 0HM836Q5KV12G:0000000C [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:37.8650150+07:00 0HM836Q5KV12G:0000000C [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.0529ms (afa2e885)
2021-04-19T20:26:37.8650460+07:00 0HM836Q5KV12G:0000000C [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:37.8651390+07:00 0HM836Q5KV12G:0000000C [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?pageSize=4 application/json 71 - 200 - application/json;+charset=utf-8 7.6863ms (791a596a)
2021-04-19T20:26:42.0739900+07:00 0HM836Q5KV12G:0000000D [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:26:42.0742530+07:00 0HM836Q5KV12G:0000000D [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:42.0743180+07:00 0HM836Q5KV12G:0000000D [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:42.0744120+07:00 0HM836Q5KV12G:0000000D [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:42.0750010+07:00 0HM836Q5KV12G:0000000D [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:42.0801660+07:00 0HM836Q5KV12G:0000000D [INF] Executed DbCommand ("4"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:42.0842190+07:00 0HM836Q5KV12G:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:42.0844540+07:00 0HM836Q5KV12G:0000000D [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:42.0845770+07:00 0HM836Q5KV12G:0000000D [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 10.1242ms (afa2e885)
2021-04-19T20:26:42.0846040+07:00 0HM836Q5KV12G:0000000D [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:42.0846830+07:00 0HM836Q5KV12G:0000000D [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 10.7009ms (791a596a)
2021-04-19T20:26:42.8643870+07:00 0HM836Q5KV12G:0000000E [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:26:42.8646610+07:00 0HM836Q5KV12G:0000000E [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:42.8647100+07:00 0HM836Q5KV12G:0000000E [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:42.8647800+07:00 0HM836Q5KV12G:0000000E [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:42.8651990+07:00 0HM836Q5KV12G:0000000E [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:42.8683920+07:00 0HM836Q5KV12G:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:42.8736910+07:00 0HM836Q5KV12G:0000000E [INF] Executed DbCommand ("5"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:42.8740630+07:00 0HM836Q5KV12G:0000000E [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:42.8741750+07:00 0HM836Q5KV12G:0000000E [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 9.3739ms (afa2e885)
2021-04-19T20:26:42.8742700+07:00 0HM836Q5KV12G:0000000E [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:42.8743410+07:00 0HM836Q5KV12G:0000000E [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 9.9724ms (791a596a)
2021-04-19T20:26:46.8230980+07:00 0HM836Q5KV12G:0000000F [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:26:46.8233260+07:00 0HM836Q5KV12G:0000000F [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:46.8233670+07:00 0HM836Q5KV12G:0000000F [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:46.8234370+07:00 0HM836Q5KV12G:0000000F [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:46.8238630+07:00 0HM836Q5KV12G:0000000F [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:46.8266190+07:00 0HM836Q5KV12G:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:46.8292720+07:00 0HM836Q5KV12G:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:46.8294580+07:00 0HM836Q5KV12G:0000000F [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:46.8295340+07:00 0HM836Q5KV12G:0000000F [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.0805ms (afa2e885)
2021-04-19T20:26:46.8295620+07:00 0HM836Q5KV12G:0000000F [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:46.8296310+07:00 0HM836Q5KV12G:0000000F [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 6.5387ms (791a596a)
2021-04-19T20:26:47.5458880+07:00 0HM836Q5KV12G:00000010 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:26:47.5462070+07:00 0HM836Q5KV12G:00000010 [INF] Successfully validated the token. (60169667)
2021-04-19T20:26:47.5463170+07:00 0HM836Q5KV12G:00000010 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:26:47.5464240+07:00 0HM836Q5KV12G:00000010 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:26:47.5468990+07:00 0HM836Q5KV12G:00000010 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:26:47.5510820+07:00 0HM836Q5KV12G:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:26:47.5543790+07:00 0HM836Q5KV12G:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:26:47.5546250+07:00 0HM836Q5KV12G:00000010 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:26:47.5547260+07:00 0HM836Q5KV12G:00000010 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 8.2618ms (afa2e885)
2021-04-19T20:26:47.5547810+07:00 0HM836Q5KV12G:00000010 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:26:47.5548890+07:00 0HM836Q5KV12G:00000010 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 8.9978ms (791a596a)
2021-04-19T20:27:07.9857960+07:00 0HM836Q5KV12G:00000011 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:27:07.9864440+07:00 0HM836Q5KV12G:00000011 [INF] Successfully validated the token. (60169667)
2021-04-19T20:27:07.9865250+07:00 0HM836Q5KV12G:00000011 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:27:07.9866560+07:00 0HM836Q5KV12G:00000011 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:27:07.9876820+07:00 0HM836Q5KV12G:00000011 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:27:07.9908010+07:00 0HM836Q5KV12G:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:27:07.9935910+07:00 0HM836Q5KV12G:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:27:07.9940900+07:00 0HM836Q5KV12G:00000011 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:27:07.9943620+07:00 0HM836Q5KV12G:00000011 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.662ms (afa2e885)
2021-04-19T20:27:07.9944350+07:00 0HM836Q5KV12G:00000011 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:27:07.9946780+07:00 0HM836Q5KV12G:00000011 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 8.8833ms (791a596a)
2021-04-19T20:27:13.9290890+07:00 0HM836Q5KV12G:00000012 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:27:13.9292950+07:00 0HM836Q5KV12G:00000012 [INF] Successfully validated the token. (60169667)
2021-04-19T20:27:13.9293760+07:00 0HM836Q5KV12G:00000012 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:27:13.9294370+07:00 0HM836Q5KV12G:00000012 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:27:13.9297840+07:00 0HM836Q5KV12G:00000012 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:27:13.9320970+07:00 0HM836Q5KV12G:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:27:13.9341740+07:00 0HM836Q5KV12G:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:27:13.9343370+07:00 0HM836Q5KV12G:00000012 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:27:13.9344600+07:00 0HM836Q5KV12G:00000012 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 5.0042ms (afa2e885)
2021-04-19T20:27:13.9344790+07:00 0HM836Q5KV12G:00000012 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:27:13.9345410+07:00 0HM836Q5KV12G:00000012 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 - 200 - application/json;+charset=utf-8 5.4651ms (791a596a)
2021-04-19T20:29:28.7904000+07:00 0HM836Q5KV12K:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:29:28.7906590+07:00 0HM836Q5KV12K:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:29:28.7907000+07:00 0HM836Q5KV12K:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:29:28.7907650+07:00 0HM836Q5KV12K:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:29:28.7912250+07:00 0HM836Q5KV12K:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:29:28.7937090+07:00 0HM836Q5KV12K:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:29:28.7969360+07:00 0HM836Q5KV12K:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:29:28.7973150+07:00 0HM836Q5KV12K:00000002 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:29:28.7974690+07:00 0HM836Q5KV12K:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 6.6307ms (afa2e885)
2021-04-19T20:29:28.7975100+07:00 0HM836Q5KV12K:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:29:28.7976180+07:00 0HM836Q5KV12K:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 - 200 - application/json;+charset=utf-8 7.2037ms (791a596a)
2021-04-19T20:30:20.0030220+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:30:28.1326010+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:30:28.7987910+07:00  [INF] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:30:28.8434640+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:30:28.8498700+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:30:28.8524350+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:30:28.8652810+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:30:28.8834480+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:30:29.1206780+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:30:29.2099740+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:30:29.4396360+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:30:29.4423350+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:30:29.4450000+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:30:29.4474010+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:30:29.4498460+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:30:31.0563630+07:00 0HM836T6Q0I0U:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages application/json 71 (ca22a1cb)
2021-04-19T20:30:31.3619740+07:00 0HM836T6Q0I0U:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:30:31.3648760+07:00 0HM836T6Q0I0U:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:30:31.3940970+07:00 0HM836T6Q0I0U:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:31:01.6650920+07:00 0HM836T6Q0I0U:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:31:01.7894040+07:00 0HM836T6Q0I0U:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL" (0723d8ff)
2021-04-19T20:31:01.9694760+07:00 0HM836T6Q0I0U:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND [m].[DateRead] IS NULL
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:32:58.3625140+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:32:59.0198370+07:00  [INF] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:32:59.0716940+07:00  [INF] Executed DbCommand ("36"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:32:59.0793630+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:32:59.0815720+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:32:59.0949430+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:32:59.1180880+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:32:59.3944570+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:32:59.4418390+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:32:59.6922800+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:32:59.7157650+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:32:59.7206060+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:32:59.7245900+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:32:59.7283780+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:33:02.4579830+07:00 0HM836UJTS294:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:33:02.7808940+07:00 0HM836UJTS294:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:33:02.7838070+07:00 0HM836UJTS294:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:33:02.8159020+07:00 0HM836UJTS294:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:34:13.9351650+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:34:14.5888400+07:00  [INF] Executed DbCommand ("34"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:34:14.6351890+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:34:14.6418520+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:34:14.6439520+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:34:14.6568400+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:34:14.6757070+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:34:14.8915670+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:34:14.9439770+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:34:15.1893480+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:34:15.2131610+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:34:15.2161760+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:34:15.2189720+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:34:15.2219920+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:34:15.3734660+07:00 0HM836V9L8QMG:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:34:15.6854500+07:00 0HM836V9L8QMG:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:34:15.6886720+07:00 0HM836V9L8QMG:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:34:15.7184030+07:00 0HM836V9L8QMG:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:35:45.9283220+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:35:46.6257950+07:00  [INF] Executed DbCommand ("36"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:35:46.6721160+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:35:46.6812080+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:35:46.7359830+07:00  [INF] Executed DbCommand ("52"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:35:46.7854860+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:35:46.8063850+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:35:47.0305040+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:35:47.0781550+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:35:47.3591690+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:35:47.3632360+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:35:47.3672160+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:35:47.3705230+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:35:47.3737150+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:35:49.9202190+07:00 0HM83705QUDO2:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:35:50.2306130+07:00 0HM83705QUDO2:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:35:50.2333980+07:00 0HM83705QUDO2:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:35:50.2593710+07:00 0HM83705QUDO2:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:36:13.7536140+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:36:14.4015050+07:00  [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:36:14.4437140+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:36:14.4968690+07:00  [INF] Executed DbCommand ("49"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:36:14.5033380+07:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:36:14.5239950+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:36:14.5451230+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:36:14.7810070+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:36:14.8327920+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:36:15.0944910+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:36:15.0969840+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:36:15.0997600+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:36:15.1021160+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:36:15.1045470+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:36:25.8574380+07:00 0HM8370GHKGB8:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:36:26.1730680+07:00 0HM8370GHKGB8:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:36:26.1754940+07:00 0HM8370GHKGB8:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:36:26.2054490+07:00 0HM8370GHKGB8:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:37:00.3825540+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:37:00.7764300+07:00  [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:37:00.8151290+07:00  [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:37:00.8214130+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:37:00.8234650+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:37:00.8348710+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:37:00.8514400+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:37:01.0400100+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:37:01.0592030+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:37:01.1956870+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:37:01.1958870+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:37:01.1959940+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:37:01.1960250+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:37:01.1960640+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:37:03.5474270+07:00 0HM8370RP64E2:00000002 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:37:03.7335480+07:00 0HM8370RP64E2:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:37:03.7356640+07:00 0HM8370RP64E2:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:37:03.7642630+07:00 0HM8370RP64E2:00000002 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:37:03.9535680+07:00 0HM8370RP64E2:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:37:04.0726390+07:00 0HM8370RP64E2:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE [a].[UserName] = @__messageParam_Username_0" (0723d8ff)
2021-04-19T20:37:04.1455550+07:00 0HM8370RP64E2:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE [a].[UserName] = @__messageParam_Username_0
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:37:04.1797570+07:00 0HM8370RP64E2:00000002 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:37:04.2125470+07:00 0HM8370RP64E2:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 442.3697ms (afa2e885)
2021-04-19T20:37:04.2131240+07:00 0HM8370RP64E2:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:37:04.2185110+07:00 0HM8370RP64E2:00000002 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 673.8477ms (791a596a)
2021-04-19T20:37:20.4510680+07:00 0HM8370RP64E2:00000003 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:37:20.4532360+07:00 0HM8370RP64E2:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:37:20.4534120+07:00 0HM8370RP64E2:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:37:20.4536420+07:00 0HM8370RP64E2:00000003 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:37:20.4818560+07:00 0HM8370RP64E2:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:37:20.4918890+07:00 0HM8370RP64E2:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
WHERE [a].[UserName] = @__messageParam_Username_0" (0723d8ff)
2021-04-19T20:37:20.5073750+07:00 0HM8370RP64E2:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([t].[Id0] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([a0].[Id] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
    WHERE [a].[UserName] = @__messageParam_Username_0
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[RecipientId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:37:20.5081530+07:00 0HM8370RP64E2:00000003 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:37:20.5087490+07:00 0HM8370RP64E2:00000003 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 55.0497ms (afa2e885)
2021-04-19T20:37:20.5088000+07:00 0HM8370RP64E2:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:37:20.5090090+07:00 0HM8370RP64E2:00000003 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 57.9993ms (791a596a)
2021-04-19T20:39:00.7268080+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:39:42.1945010+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:39:42.6619550+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:39:42.7026540+07:00  [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:39:42.7089070+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:39:42.7110830+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:39:42.7229310+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:39:42.7431750+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:39:42.9627230+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:39:42.9821190+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:39:43.1327330+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:39:43.1328080+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:39:43.1329030+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:39:43.1329680+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:39:43.1330170+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:41:25.0565270+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:41:28.6242570+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:41:29.0618490+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:41:29.1048000+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:41:29.1112360+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:41:29.1141130+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:41:29.1272090+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:41:29.1477810+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:41:29.3680610+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:41:29.3890590+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:41:29.5282970+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:41:29.5283750+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:41:29.5285310+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:41:29.5285840+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:41:29.5286160+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:42:05.2711770+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:42:08.6070200+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:42:08.9963640+07:00  [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:42:09.0377130+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:42:09.0443610+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:42:09.0471340+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:42:09.0597910+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:42:09.0789170+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:42:09.2738190+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:42:09.2927350+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:42:09.4358320+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:42:09.4359710+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:42:09.4361030+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:42:09.4361780+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:42:09.4362260+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:43:05.1594680+07:00 0HM83747HFVNG:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/messages/thread/raymond application/json 71 (ca22a1cb)
2021-04-19T20:43:05.3645060+07:00 0HM83747HFVNG:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:43:05.3662390+07:00 0HM83747HFVNG:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-04-19T20:43:05.3908530+07:00 0HM83747HFVNG:00000002 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:43:05.5684150+07:00 0HM83747HFVNG:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:43:05.6912230+07:00 0HM83747HFVNG:00000002 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-19T20:43:05.7959070+07:00 0HM83747HFVNG:00000002 [INF] Executed DbCommand ("36"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE (([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) OR (([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-04-19T20:43:06.0414940+07:00 0HM83747HFVNG:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [DateRead] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:43:06.0868710+07:00 0HM83747HFVNG:00000002 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:43:06.1242510+07:00 0HM83747HFVNG:00000002 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 728.2147ms (afa2e885)
2021-04-19T20:43:06.1247580+07:00 0HM83747HFVNG:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-04-19T20:43:06.1296140+07:00 0HM83747HFVNG:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/messages/thread/raymond application/json 71 - 200 - application/json;+charset=utf-8 972.3812ms (791a596a)
2021-04-19T20:45:27.9747190+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:45:31.1861170+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:45:31.5995420+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:45:31.6411020+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:45:31.6477670+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:45:31.6502320+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:45:31.6615590+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:45:31.6784870+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:45:31.8617510+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:45:31.8814950+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:45:32.0203720+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:45:32.0204850+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:45:32.0206480+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:45:32.0206770+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:45:32.0207380+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:47:01.0240570+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:47:04.4840740+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:47:04.8704700+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:47:04.9120040+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:47:04.9193930+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:47:04.9221200+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:47:04.9341010+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:47:04.9521490+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:47:05.1455890+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:47:05.1656180+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:47:05.3067610+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:47:05.3068580+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:47:05.3069790+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:47:05.3070130+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:47:05.3070310+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:48:19.0854330+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:48:22.6024210+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:48:22.9847190+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:48:23.0269790+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:48:23.0339000+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:48:23.0366450+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:48:23.0485740+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:48:23.0655670+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:48:23.2583910+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:48:23.2791330+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:48:23.4318960+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:48:23.4319700+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:48:23.4321020+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:48:23.4321380+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:48:23.4321590+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:48:51.6945920+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:48:55.2395220+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:48:55.6101480+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:48:55.6572880+07:00  [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:48:55.6642150+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:48:55.6666180+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:48:55.6794460+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:48:55.6964940+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:48:55.8840580+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:48:55.9058180+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:48:56.0533210+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:48:56.0535250+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:48:56.0537710+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:48:56.0538180+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:48:56.0538730+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:49:12.3837600+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:50:34.5989670+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:50:34.9797950+07:00  [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:50:35.0219820+07:00  [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:50:35.0290010+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:50:35.0313960+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:50:35.0430040+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:50:35.0610960+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:50:35.2590870+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:50:35.2825780+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:50:35.4466000+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:50:35.4467140+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:50:35.4468510+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:50:35.4468740+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:50:35.4468930+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:52:09.7691060+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-19T20:52:13.2073590+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:52:13.5769220+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:52:13.6240880+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:52:13.6310150+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T20:52:13.6346480+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T20:52:13.6468540+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T20:52:13.6636360+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-19T20:52:13.8533350+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T20:52:13.8715330+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T20:52:14.0159870+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T20:52:14.0160530+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T20:52:14.0161960+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T20:52:14.0162160+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T20:52:14.0162330+07:00  [INF] Content root path: "/Users/ray/Dropbox/Aptech/Azure/DatingApi/api" (b5d60022)
2021-04-19T20:52:47.7799540+07:00 0HM8379L626IS:00000002 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 (ca22a1cb)
2021-04-19T20:52:47.8456230+07:00 0HM8379L626IS:00000002 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T20:52:47.8730600+07:00 0HM8379L626IS:00000002 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T20:52:48.0717940+07:00 0HM8379L626IS:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:52:48.2639460+07:00 0HM8379L626IS:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:52:48.4748690+07:00 0HM8379L626IS:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-19T20:52:48.5909410+07:00 0HM8379L626IS:00000002 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-19T20:52:48.6108690+07:00 0HM8379L626IS:00000002 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 732.7761ms (afa2e885)
2021-04-19T20:52:48.6113690+07:00 0HM8379L626IS:00000002 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T20:52:48.6165670+07:00 0HM8379L626IS:00000002 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 - 200 - application/json;+charset=utf-8 839.2207ms (791a596a)
2021-04-19T20:53:17.2402790+07:00 0HM8379L626IU:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 72 (ca22a1cb)
2021-04-19T20:53:17.2988500+07:00 0HM8379L626IU:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T20:53:17.2996010+07:00 0HM8379L626IU:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:53:17.3029990+07:00 0HM8379L626IU:00000002 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:53:17.3345440+07:00 0HM8379L626IU:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:53:17.3473950+07:00 0HM8379L626IU:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:53:17.3527670+07:00 0HM8379L626IU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:53:17.4959210+07:00 0HM8379L626IU:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:53:17.5520780+07:00 0HM8379L626IU:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MessageDto"'. (605b4265)
2021-04-19T20:53:17.5606430+07:00 0HM8379L626IU:00000002 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 257.5713ms (afa2e885)
2021-04-19T20:53:17.5607160+07:00 0HM8379L626IU:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:53:17.5609440+07:00 0HM8379L626IU:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 72 - 200 - application/json;+charset=utf-8 320.7159ms (791a596a)
2021-04-19T20:53:35.2984530+07:00 0HM8379L626IS:00000003 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 53 (ca22a1cb)
2021-04-19T20:53:35.3016590+07:00 0HM8379L626IS:00000003 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T20:53:35.3018740+07:00 0HM8379L626IS:00000003 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T20:53:35.3077560+07:00 0HM8379L626IS:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:53:35.3122340+07:00 0HM8379L626IS:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:53:35.3301260+07:00 0HM8379L626IS:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-19T20:53:35.3306650+07:00 0HM8379L626IS:00000003 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-19T20:53:35.3308010+07:00 0HM8379L626IS:00000003 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 28.8867ms (afa2e885)
2021-04-19T20:53:35.3308870+07:00 0HM8379L626IS:00000003 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T20:53:35.3310200+07:00 0HM8379L626IS:00000003 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 53 - 200 - application/json;+charset=utf-8 32.5397ms (791a596a)
2021-04-19T20:54:05.5751910+07:00 0HM8379L626IU:00000003 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/messages application/json 76 (ca22a1cb)
2021-04-19T20:54:05.5755920+07:00 0HM8379L626IU:00000003 [INF] Successfully validated the token. (60169667)
2021-04-19T20:54:05.5756850+07:00 0HM8379L626IU:00000003 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T20:54:05.5758030+07:00 0HM8379L626IU:00000003 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:54:05.5763140+07:00 0HM8379L626IU:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:54:05.5789770+07:00 0HM8379L626IU:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:54:05.5813220+07:00 0HM8379L626IU:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T20:54:05.5879400+07:00 0HM8379L626IU:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T20:54:05.5921460+07:00 0HM8379L626IU:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MessageDto"'. (605b4265)
2021-04-19T20:54:05.5924060+07:00 0HM8379L626IU:00000003 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 16.5785ms (afa2e885)
2021-04-19T20:54:05.5924310+07:00 0HM8379L626IU:00000003 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T20:54:05.5925330+07:00 0HM8379L626IU:00000003 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/messages application/json 76 - 200 - application/json;+charset=utf-8 17.3342ms (791a596a)
2021-04-19T20:54:27.9937360+07:00 0HM8379L626IS:00000004 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:54:27.9940570+07:00 0HM8379L626IS:00000004 [INF] Successfully validated the token. (60169667)
2021-04-19T20:54:27.9941320+07:00 0HM8379L626IS:00000004 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:54:28.0011860+07:00 0HM8379L626IS:00000004 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:54:28.0153630+07:00 0HM8379L626IS:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:54:28.0562120+07:00 0HM8379L626IS:00000004 [INF] Executed DbCommand ("9"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-04-19T20:54:28.0889280+07:00 0HM8379L626IS:00000004 [INF] Executed DbCommand ("9"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([t].[Id0] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([a0].[Id] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[RecipientId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:54:28.0932810+07:00 0HM8379L626IS:00000004 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:54:28.1006670+07:00 0HM8379L626IS:00000004 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 99.4178ms (afa2e885)
2021-04-19T20:54:28.1007300+07:00 0HM8379L626IS:00000004 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:54:28.1008330+07:00 0HM8379L626IS:00000004 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 107.1224ms (791a596a)
2021-04-19T20:54:55.4081370+07:00 0HM8379L626IS:00000005 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 (ca22a1cb)
2021-04-19T20:54:55.4084130+07:00 0HM8379L626IS:00000005 [INF] Successfully validated the token. (60169667)
2021-04-19T20:54:55.4084660+07:00 0HM8379L626IS:00000005 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:54:55.4085410+07:00 0HM8379L626IS:00000005 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:54:55.4091750+07:00 0HM8379L626IS:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:54:55.4216680+07:00 0HM8379L626IS:00000005 [INF] Executed DbCommand ("9"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-04-19T20:54:55.4457160+07:00 0HM8379L626IS:00000005 [INF] Executed DbCommand ("9"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([a0].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([t].[Id0] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[SenderId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:54:55.4461410+07:00 0HM8379L626IS:00000005 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:54:55.4469630+07:00 0HM8379L626IS:00000005 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 38.3932ms (afa2e885)
2021-04-19T20:54:55.4469930+07:00 0HM8379L626IS:00000005 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:54:55.4470680+07:00 0HM8379L626IS:00000005 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?Container=Inbox application/json 71 - 200 - application/json;+charset=utf-8 38.9257ms (791a596a)
2021-04-19T20:55:06.5541510+07:00 0HM8379L626IS:00000006 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 (ca22a1cb)
2021-04-19T20:55:06.5547580+07:00 0HM8379L626IS:00000006 [INF] Successfully validated the token. (60169667)
2021-04-19T20:55:06.5548320+07:00 0HM8379L626IS:00000006 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (500cc934)
2021-04-19T20:55:06.5549590+07:00 0HM8379L626IS:00000006 [INF] Route matched with "{action = \"GetMessagesForUser\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessagesForUser(api.Helpers.MessageParam)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:55:06.5556100+07:00 0HM8379L626IS:00000006 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:55:06.5592320+07:00 0HM8379L626IS:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))" (0723d8ff)
2021-04-19T20:55:06.5619590+07:00 0HM8379L626IS:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__messageParam_Username_0='?' (Size = 256), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[SenderId], [t].[SenderUsername], (
    SELECT TOP(1) [p].[Url]
    FROM [Photos] AS [p]
    WHERE ([t].[Id0] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [SenderPhotoUrl], [t].[RecipientId], [t].[RecipientUsername], (
    SELECT TOP(1) [p0].[Url]
    FROM [Photos] AS [p0]
    WHERE ([a0].[Id] = [p0].[AppUsersId]) AND ([p0].[IsMain] = CAST(1 AS bit))) AS [RecipientPhotoUrl], [t].[Content], [t].[DateRead], [t].[MessageSent]
FROM (
    SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderId], [m].[SenderUsername], [a].[Id] AS [Id0]
    FROM [Messages] AS [m]
    INNER JOIN [AspNetUsers] AS [a] ON [m].[SenderId] = [a].[Id]
    WHERE ([a].[UserName] = @__messageParam_Username_0) AND ([m].[SenderDeleted] <> CAST(1 AS bit))
    ORDER BY [m].[MessageSent] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[RecipientId] = [a0].[Id]
ORDER BY [t].[MessageSent] DESC" (0723d8ff)
2021-04-19T20:55:06.5621840+07:00 0HM8379L626IS:00000006 [INF] Executing "ObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:55:06.5622910+07:00 0HM8379L626IS:00000006 [INF] Executed action "api.Controllers.MessagesController.GetMessagesForUser (api)" in 7.3084ms (afa2e885)
2021-04-19T20:55:06.5623130+07:00 0HM8379L626IS:00000006 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessagesForUser (api)"' (99874f2b)
2021-04-19T20:55:06.5624130+07:00 0HM8379L626IS:00000006 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/messages?container=Outbox application/json 71 - 200 - application/json;+charset=utf-8 8.3111ms (791a596a)
2021-04-19T20:55:15.7838200+07:00 0HM8379L626IU:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/messages/thread/raymond application/json 71 (ca22a1cb)
2021-04-19T20:55:15.7844420+07:00 0HM8379L626IU:00000004 [INF] Successfully validated the token. (60169667)
2021-04-19T20:55:15.7845190+07:00 0HM8379L626IU:00000004 [INF] Executing endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (500cc934)
2021-04-19T20:55:15.7895630+07:00 0HM8379L626IU:00000004 [INF] Route matched with "{action = \"GetMessageThread\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MessageDto]]] GetMessageThread(System.String)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T20:55:15.7934600+07:00 0HM8379L626IU:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T20:55:15.8309440+07:00 0HM8379L626IU:00000004 [INF] Executed DbCommand ("13"ms) [Parameters=["@__currentUsername_0='?' (Size = 256), @__recipientUsername_1='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[Content], [m].[DateRead], [m].[MessageSent], [m].[RecipientDeleted], [m].[RecipientId], [m].[RecipientUsername], [m].[SenderDeleted], [m].[SenderId], [m].[SenderUsername], [a0].[Id], [a0].[AccessFailedCount], [a0].[City], [a0].[ConcurrencyStamp], [a0].[Country], [a0].[Created], [a0].[DateOfBirth], [a0].[Email], [a0].[EmailConfirmed], [a0].[Gender], [a0].[Interests], [a0].[Introduction], [a0].[KnownAs], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[LookingFor], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url]
FROM [Messages] AS [m]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RecipientId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [m].[SenderId] = [a0].[Id]
LEFT JOIN [Photos] AS [p] ON [a0].[Id] = [p].[AppUsersId]
LEFT JOIN [Photos] AS [p0] ON [a].[Id] = [p0].[AppUsersId]
WHERE ((([a].[UserName] = @__currentUsername_0) AND ([a0].[UserName] = @__recipientUsername_1)) AND ([m].[RecipientDeleted] <> CAST(1 AS bit))) OR ((([a].[UserName] = @__recipientUsername_1) AND ([a0].[UserName] = @__currentUsername_0)) AND ([m].[SenderDeleted] <> CAST(1 AS bit)))
ORDER BY [m].[MessageSent], [m].[Id], [a].[Id], [a0].[Id], [p].[Id], [p0].[Id]" (0723d8ff)
2021-04-19T20:55:15.8429020+07:00 0HM8379L626IU:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [DateRead] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-19T20:55:15.8583220+07:00 0HM8379L626IU:00000004 [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[api.DTO.MessageDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-19T20:55:15.8586990+07:00 0HM8379L626IU:00000004 [INF] Executed action "api.Controllers.MessagesController.GetMessageThread (api)" in 69.091ms (afa2e885)
2021-04-19T20:55:15.8587360+07:00 0HM8379L626IU:00000004 [INF] Executed endpoint '"api.Controllers.MessagesController.GetMessageThread (api)"' (99874f2b)
2021-04-19T20:55:15.8588880+07:00 0HM8379L626IU:00000004 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/messages/thread/raymond application/json 71 - 200 - application/json;+charset=utf-8 75.1233ms (791a596a)
2021-04-19T21:09:40.2672750+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T21:09:40.6933370+07:00  [INF] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T21:09:40.7401220+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T21:09:40.7465330+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-19T21:09:40.7488340+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-19T21:09:40.7617300+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-19T21:09:40.7825070+07:00  [INF] Applying migration '"20210419131537_addMessages"'. (0e2ac64d)
2021-04-19T21:09:40.8495360+07:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Messages] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [SenderUsername] nvarchar(max) NULL,
    [RecipientId] int NOT NULL,
    [RecipientUsername] nvarchar(max) NULL,
    [Content] nvarchar(max) NULL,
    [DateRead] datetime2 NULL,
    [MessageSent] datetime2 NOT NULL,
    [SenderDeleted] bit NOT NULL,
    [RecipientDeleted] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Messages_AspNetUsers_RecipientId] FOREIGN KEY ([RecipientId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Messages_AspNetUsers_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION
);" (0723d8ff)
2021-04-19T21:09:40.8522040+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Messages_RecipientId] ON [Messages] ([RecipientId]);" (0723d8ff)
2021-04-19T21:09:40.8541070+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Messages_SenderId] ON [Messages] ([SenderId]);" (0723d8ff)
2021-04-19T21:09:40.8571370+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210419131537_addMessages', N'5.0.3');" (0723d8ff)
2021-04-19T21:09:41.0929950+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-19T21:09:41.1127080+07:00  [INF] User profile is available. Using '"/Users/macintoshhd/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-19T21:09:41.2938280+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-19T21:09:41.2938990+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-19T21:09:41.2940550+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-19T21:09:41.2940980+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-19T21:09:41.2941340+07:00  [INF] Content root path: "/Users/macintoshhd/ChatByDotNet/chat-backend/api" (b5d60022)
2021-04-19T21:10:42.5936740+07:00 0HM837JLG7INA:00000002 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 55 (ca22a1cb)
2021-04-19T21:10:42.6652640+07:00 0HM837JLG7INA:00000002 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T21:10:42.6965090+07:00 0HM837JLG7INA:00000002 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T21:10:42.9012960+07:00 0HM837JLG7INA:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T21:10:43.1002100+07:00 0HM837JLG7INA:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T21:10:43.2977050+07:00 0HM837JLG7INA:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-19T21:10:43.4017130+07:00 0HM837JLG7INA:00000002 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-19T21:10:43.4270890+07:00 0HM837JLG7INA:00000002 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 725.1699ms (afa2e885)
2021-04-19T21:10:43.4277300+07:00 0HM837JLG7INA:00000002 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T21:10:43.4333410+07:00 0HM837JLG7INA:00000002 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 55 - 200 - application/json;+charset=utf-8 842.8152ms (791a596a)
2021-04-19T21:11:12.8134670+07:00 0HM837JLG7INA:00000003 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 55 (ca22a1cb)
2021-04-19T21:11:12.8161550+07:00 0HM837JLG7INA:00000003 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-19T21:11:12.8163960+07:00 0HM837JLG7INA:00000003 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-19T21:11:12.8518300+07:00 0HM837JLG7INA:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T21:11:12.8577710+07:00 0HM837JLG7INA:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T21:11:12.8741020+07:00 0HM837JLG7INA:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-19T21:11:12.8747600+07:00 0HM837JLG7INA:00000003 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-19T21:11:12.8749960+07:00 0HM837JLG7INA:00000003 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 58.5561ms (afa2e885)
2021-04-19T21:11:12.8750690+07:00 0HM837JLG7INA:00000003 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-19T21:11:12.8753180+07:00 0HM837JLG7INA:00000003 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 55 - 200 - application/json;+charset=utf-8 61.9063ms (791a596a)
2021-04-19T21:14:39.1579760+07:00 0HM837JLG7INC:00000002 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/messages application/json 64 (ca22a1cb)
2021-04-19T21:14:39.2240310+07:00 0HM837JLG7INC:00000002 [INF] Successfully validated the token. (60169667)
2021-04-19T21:14:39.2251370+07:00 0HM837JLG7INC:00000002 [INF] Executing endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (500cc934)
2021-04-19T21:14:39.2289040+07:00 0HM837JLG7INC:00000002 [INF] Route matched with "{action = \"CreateMessage\", controller = \"Messages\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.MessageDto]] CreateMessage(api.DTO.CreateMessageDto)" on controller "api.Controllers.MessagesController" ("api"). (122b2fdf)
2021-04-19T21:14:39.2335070+07:00 0HM837JLG7INC:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-19T21:14:39.2481810+07:00 0HM837JLG7INC:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T21:14:39.2514250+07:00 0HM837JLG7INC:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-19T21:14:39.3959120+07:00 0HM837JLG7INC:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [DateRead], [MessageSent], [RecipientDeleted], [RecipientId], [RecipientUsername], [SenderDeleted], [SenderId], [SenderUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Messages]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-19T21:14:39.4428220+07:00 0HM837JLG7INC:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.DTO.MessageDto"'. (605b4265)
2021-04-19T21:14:39.4527220+07:00 0HM837JLG7INC:00000002 [INF] Executed action "api.Controllers.MessagesController.CreateMessage (api)" in 223.7401ms (afa2e885)
2021-04-19T21:14:39.4528060+07:00 0HM837JLG7INC:00000002 [INF] Executed endpoint '"api.Controllers.MessagesController.CreateMessage (api)"' (99874f2b)
2021-04-19T21:14:39.4530300+07:00 0HM837JLG7INC:00000002 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/messages application/json 64 - 200 - application/json;+charset=utf-8 294.9947ms (791a596a)
