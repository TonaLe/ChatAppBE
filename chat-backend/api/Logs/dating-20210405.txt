2021-04-05T19:17:13.2554930+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T19:17:13.6791660+07:00  [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T19:17:13.7218790+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T19:17:13.7276510+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T19:17:13.7302330+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T19:17:13.7443690+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T19:17:13.7622770+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T19:17:13.9749010+07:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T19:17:14.0036510+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T19:17:14.0676670+07:00  [INF] Creating key {0a54eda7-1ca2-40e2-a446-cad8b2a9a254} with creation date 2021-04-05 12:17:14Z, activation date 2021-04-06 09:34:55Z, and expiration date 2021-07-04 12:17:14Z. (77afce94)
2021-04-05T19:17:14.0770840+07:00  [WRN] No XML encryptor configured. Key {0a54eda7-1ca2-40e2-a446-cad8b2a9a254} may be persisted to storage in unencrypted form. (9ca7e61e)
2021-04-05T19:17:14.0784910+07:00  [INF] Writing data to file '"/Users/ray/.aspnet/DataProtection-Keys/key-0a54eda7-1ca2-40e2-a446-cad8b2a9a254.xml"'. (da22a8b1)
2021-04-05T19:17:14.2163000+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T19:17:14.2163560+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T19:17:14.2165050+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T19:17:14.2165260+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T19:17:14.2165430+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T19:19:09.0736220+07:00 0HM7O5K1P4I6C:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/account/register application/json 179 (ca22a1cb)
2021-04-05T19:19:09.1386250+07:00 0HM7O5K1P4I6C:00000002 [INF] Executing endpoint '"api.Controllers.AccountController.Register (api)"' (500cc934)
2021-04-05T19:19:09.1660440+07:00 0HM7O5K1P4I6C:00000002 [INF] Route matched with "{action = \"Register\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Register(api.DTO.RegisterDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-05T19:19:09.3847000+07:00 0HM7O5K1P4I6C:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T19:19:09.4506810+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=["@__ToLower_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[UserName] = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T19:19:09.5424130+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-05T19:19:09.7940390+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [City], [ConcurrencyStamp], [Country], [Created], [DateOfBirth], [Email], [EmailConfirmed], [Gender], [Interests], [Introduction], [KnownAs], [LastActive], [LockoutEnabled], [LockoutEnd], [LookingFor], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();" (0723d8ff)
2021-04-05T19:19:09.8505940+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-05T19:19:09.8908010+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)" (0723d8ff)
2021-04-05T19:19:09.8982180+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0" (0723d8ff)
2021-04-05T19:19:09.9237000+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0" (0723d8ff)
2021-04-05T19:19:09.9466410+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);" (0723d8ff)
2021-04-05T19:19:09.9546090+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p25='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [City] = @p1, [ConcurrencyStamp] = @p2, [Country] = @p3, [Created] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [Gender] = @p8, [Interests] = @p9, [Introduction] = @p10, [KnownAs] = @p11, [LastActive] = @p12, [LockoutEnabled] = @p13, [LockoutEnd] = @p14, [LookingFor] = @p15, [NormalizedEmail] = @p16, [NormalizedUserName] = @p17, [PasswordHash] = @p18, [PhoneNumber] = @p19, [PhoneNumberConfirmed] = @p20, [SecurityStamp] = @p21, [TwoFactorEnabled] = @p22, [UserName] = @p23
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
SELECT @@ROWCOUNT;" (0723d8ff)
2021-04-05T19:19:10.0139590+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-05T19:19:10.1247800+07:00 0HM7O5K1P4I6C:00000002 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-05T19:19:10.1492030+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed action "api.Controllers.AccountController.Register (api)" in 977.5253ms (afa2e885)
2021-04-05T19:19:10.1498110+07:00 0HM7O5K1P4I6C:00000002 [INF] Executed endpoint '"api.Controllers.AccountController.Register (api)"' (99874f2b)
2021-04-05T19:19:10.1556500+07:00 0HM7O5K1P4I6C:00000002 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/account/register application/json 179 - 200 - application/json;+charset=utf-8 1085.4877ms (791a596a)
2021-04-05T20:11:12.2867450+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T20:14:59.3302440+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T20:14:59.8150630+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T20:14:59.8708320+07:00  [INF] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T20:14:59.8790950+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T20:14:59.8823940+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T20:14:59.9029660+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T20:14:59.9239820+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T20:15:00.1710640+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T20:15:00.1959520+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T20:15:00.4212990+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T20:15:00.4213800+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T20:15:00.4215510+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T20:15:00.4215960+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T20:15:00.4216300+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T20:19:34.1468010+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T20:19:37.8574790+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T20:19:38.2422090+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T20:19:38.2867990+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T20:19:38.2942600+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T20:19:38.2970050+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T20:19:38.3143930+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T20:19:38.3347550+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T20:19:38.5477210+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T20:19:38.5686540+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T20:19:38.7173110+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T20:19:38.7174610+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T20:19:38.7175720+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T20:19:38.7175920+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T20:19:38.7176270+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T20:20:33.4713920+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T20:30:47.3743250+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T20:30:47.7865000+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T20:30:47.8301670+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T20:30:47.8364570+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T20:30:47.8384400+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T20:30:47.8512540+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T20:30:47.8695050+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T20:30:48.1017170+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T20:30:48.1284620+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T20:30:48.3098510+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T20:30:48.3099360+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T20:30:48.3100500+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T20:30:48.3100700+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T20:30:48.3100920+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T20:31:37.5785100+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T20:31:43.9340450+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T20:31:44.2977000+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T20:31:44.3426800+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T20:31:44.3492120+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T20:31:44.3521470+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T20:31:44.3664690+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T20:31:44.3835530+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T20:31:44.5882850+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T20:31:44.6099080+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T20:31:44.7692000+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T20:31:44.7692810+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T20:31:44.7694220+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T20:31:44.7694420+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T20:31:44.7694580+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T20:32:01.9371240+07:00 0HM7O6SP00OC0:00000002 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 (ca22a1cb)
2021-04-05T20:32:02.0346990+07:00 0HM7O6SP00OC0:00000002 [INF] Executing endpoint '"api.Controllers.AccountController.Login (api)"' (500cc934)
2021-04-05T20:32:02.0786060+07:00 0HM7O6SP00OC0:00000002 [INF] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[api.DTO.UserDto]] Login(api.DTO.LoginDto)" on controller "api.Controllers.AccountController" ("api"). (122b2fdf)
2021-04-05T20:32:02.3194270+07:00 0HM7O6SP00OC0:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T20:32:02.5555960+07:00 0HM7O6SP00OC0:00000002 [INF] Executed DbCommand ("34"ms) [Parameters=["@__loginDto_Username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__loginDto_Username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T20:32:02.7788370+07:00 0HM7O6SP00OC0:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0" (0723d8ff)
2021-04-05T20:32:02.8989780+07:00 0HM7O6SP00OC0:00000002 [INF] Executing "ObjectResult", writing value of type '"api.DTO.UserDto"'. (605b4265)
2021-04-05T20:32:02.9218190+07:00 0HM7O6SP00OC0:00000002 [INF] Executed action "api.Controllers.AccountController.Login (api)" in 837.6586ms (afa2e885)
2021-04-05T20:32:02.9227360+07:00 0HM7O6SP00OC0:00000002 [INF] Executed endpoint '"api.Controllers.AccountController.Login (api)"' (99874f2b)
2021-04-05T20:32:02.9285710+07:00 0HM7O6SP00OC0:00000002 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 - 200 - application/json;+charset=utf-8 996.2739ms (791a596a)
2021-04-05T20:32:29.2503120+07:00 0HM7O6SP00OC2:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=5 - - (ca22a1cb)
2021-04-05T20:32:29.3172140+07:00 0HM7O6SP00OC2:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T20:32:29.3245350+07:00 0HM7O6SP00OC2:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T20:32:29.3252200+07:00 0HM7O6SP00OC2:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T20:32:29.3323760+07:00 0HM7O6SP00OC2:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T20:32:29.3775420+07:00 0HM7O6SP00OC2:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T20:32:29.4096210+07:00 0HM7O6SP00OC2:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T20:32:29.4274620+07:00 0HM7O6SP00OC2:00000002 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-05T20:32:29.4676930+07:00 0HM7O6SP00OC2:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T20:32:29.4883430+07:00 0HM7O6SP00OC2:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T20:32:29.5130680+07:00 0HM7O6SP00OC2:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 180.6046ms (afa2e885)
2021-04-05T20:32:29.5131410+07:00 0HM7O6SP00OC2:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T20:32:29.5137780+07:00 0HM7O6SP00OC2:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=5 - - - 200 - application/json;+charset=utf-8 263.5044ms (791a596a)
2021-04-05T20:37:38.1757330+07:00 0HM7O6SP00OC4:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - (ca22a1cb)
2021-04-05T20:37:38.1804670+07:00 0HM7O6SP00OC4:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T20:37:38.1811560+07:00 0HM7O6SP00OC4:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T20:37:38.1812690+07:00 0HM7O6SP00OC4:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T20:37:38.1814380+07:00 0HM7O6SP00OC4:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T20:37:38.1835970+07:00 0HM7O6SP00OC4:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T20:37:38.1909340+07:00 0HM7O6SP00OC4:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T20:37:38.1941090+07:00 0HM7O6SP00OC4:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T20:37:38.1951850+07:00 0HM7O6SP00OC4:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T20:37:38.1955750+07:00 0HM7O6SP00OC4:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 14.048ms (afa2e885)
2021-04-05T20:37:38.1956420+07:00 0HM7O6SP00OC4:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T20:37:38.1958630+07:00 0HM7O6SP00OC4:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - - 200 - application/json;+charset=utf-8 20.1091ms (791a596a)
2021-04-05T21:00:04.8972930+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:00:10.3179840+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:00:10.7344390+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:00:10.7900490+07:00  [INF] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:00:10.7977140+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:00:10.8009180+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:00:10.8188810+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:00:10.8431570+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:00:11.1122920+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:00:11.1426180+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:00:11.3150620+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:00:11.3151870+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:00:11.3153330+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:00:11.3153820+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:00:11.3154120+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:02:30.0717980+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:02:33.8899580+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:02:34.2781770+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:02:34.3212590+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:02:34.3280060+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:02:34.3309890+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:02:34.3430960+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:02:34.3604760+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:02:34.5726180+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:02:34.5947490+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:02:34.7553390+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:02:34.7554440+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:02:34.7555950+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:02:34.7556260+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:02:34.7556560+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:03:36.7394220+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:03:40.3914680+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:03:40.7854630+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:03:40.8308480+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:03:40.8381450+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:03:40.8406340+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:03:40.8531640+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:03:40.8719620+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:03:41.0778140+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:03:41.0972170+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:03:41.2519080+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:03:41.2519850+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:03:41.2521200+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:03:41.2521500+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:03:41.2521950+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:08:56.6817900+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:09:00.2179410+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:09:00.6151820+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:09:00.6590440+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:09:00.6653060+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:09:00.6674990+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:09:00.6797350+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:09:00.6976580+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:09:00.9141590+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:09:00.9377000+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:09:01.1177810+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:09:01.1179480+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:09:01.1181080+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:09:01.1181430+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:09:01.1182210+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:10:50.6041780+07:00 0HM7O7IEVPTQU:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?gender=male - - (ca22a1cb)
2021-04-05T21:10:50.8527860+07:00 0HM7O7IEVPTQU:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T21:10:50.8596840+07:00 0HM7O7IEVPTQU:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:10:50.8608440+07:00 0HM7O7IEVPTQU:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:10:50.9092010+07:00 0HM7O7IEVPTQU:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:10:51.1360840+07:00 0HM7O7IEVPTQU:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:10:51.3532450+07:00 0HM7O7IEVPTQU:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:10:51.5652160+07:00 0HM7O7IEVPTQU:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)" (0723d8ff)
2021-04-05T21:10:51.5912740+07:00 0HM7O7IEVPTQU:00000002 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-05T21:10:51.6195270+07:00 0HM7O7IEVPTQU:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)
    ORDER BY [a].[Id]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:10:51.6465940+07:00 0HM7O7IEVPTQU:00000002 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15
2021-04-05T21:10:51.6593100+07:00 0HM7O7IEVPTQU:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 743.7707ms (afa2e885)
2021-04-05T21:10:51.6608670+07:00 0HM7O7IEVPTQU:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:10:51.6807330+07:00 0HM7O7IEVPTQU:00000002 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 62
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15
2021-04-05T21:10:51.7125650+07:00 0HM7O7IEVPTQU:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?gender=male - - - 500 - application/json 1111.1902ms (791a596a)
2021-04-05T21:12:09.0908310+07:00 0HM7O7IEVPTQU:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T21:12:09.0931710+07:00 0HM7O7IEVPTQU:00000003 [INF] Successfully validated the token. (60169667)
2021-04-05T21:12:09.0936430+07:00 0HM7O7IEVPTQU:00000003 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:12:09.0936990+07:00 0HM7O7IEVPTQU:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:12:09.0939170+07:00 0HM7O7IEVPTQU:00000003 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:12:09.1302650+07:00 0HM7O7IEVPTQU:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:12:09.1379630+07:00 0HM7O7IEVPTQU:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:12:09.1461100+07:00 0HM7O7IEVPTQU:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)" (0723d8ff)
2021-04-05T21:12:09.1543270+07:00 0HM7O7IEVPTQU:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)
    ORDER BY [a].[Id]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:12:09.1555140+07:00 0HM7O7IEVPTQU:00000003 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15
2021-04-05T21:12:09.1570640+07:00 0HM7O7IEVPTQU:00000003 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 63.0723ms (afa2e885)
2021-04-05T21:12:09.1572500+07:00 0HM7O7IEVPTQU:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:12:09.1625520+07:00 0HM7O7IEVPTQU:00000003 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 62
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15
2021-04-05T21:12:09.1673800+07:00 0HM7O7IEVPTQU:00000003 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 76.5476ms (791a596a)
2021-04-05T21:12:14.6803400+07:00 0HM7O7IEVPTQU:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - (ca22a1cb)
2021-04-05T21:12:14.6839630+07:00 0HM7O7IEVPTQU:00000004 [INF] Successfully validated the token. (60169667)
2021-04-05T21:12:14.6846510+07:00 0HM7O7IEVPTQU:00000004 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:12:14.6849530+07:00 0HM7O7IEVPTQU:00000004 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:12:14.6852770+07:00 0HM7O7IEVPTQU:00000004 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:12:14.6896840+07:00 0HM7O7IEVPTQU:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:12:14.6933660+07:00 0HM7O7IEVPTQU:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:12:14.6979720+07:00 0HM7O7IEVPTQU:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)" (0723d8ff)
2021-04-05T21:12:14.7075270+07:00 0HM7O7IEVPTQU:00000004 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-05T21:12:14.7428060+07:00 0HM7O7IEVPTQU:00000004 [INF] Executed DbCommand ("16"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)
    ORDER BY [a].[Id]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:12:14.7574460+07:00 0HM7O7IEVPTQU:00000004 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T21:12:14.7856680+07:00 0HM7O7IEVPTQU:00000004 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 100.261ms (afa2e885)
2021-04-05T21:12:14.7857410+07:00 0HM7O7IEVPTQU:00000004 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:12:14.7859200+07:00 0HM7O7IEVPTQU:00000004 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - - 200 - application/json;+charset=utf-8 105.5767ms (791a596a)
2021-04-05T21:12:46.3127400+07:00 0HM7O7IEVPTQU:00000005 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T21:12:46.3131860+07:00 0HM7O7IEVPTQU:00000005 [INF] Successfully validated the token. (60169667)
2021-04-05T21:12:46.3132860+07:00 0HM7O7IEVPTQU:00000005 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:12:46.3133220+07:00 0HM7O7IEVPTQU:00000005 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:12:46.3134290+07:00 0HM7O7IEVPTQU:00000005 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:12:46.3142020+07:00 0HM7O7IEVPTQU:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:12:46.3181680+07:00 0HM7O7IEVPTQU:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:12:46.3228190+07:00 0HM7O7IEVPTQU:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)" (0723d8ff)
2021-04-05T21:12:46.3293980+07:00 0HM7O7IEVPTQU:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)
    ORDER BY [a].[Id]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:12:46.3324610+07:00 0HM7O7IEVPTQU:00000005 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 62
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15
2021-04-05T21:12:46.3352350+07:00 0HM7O7IEVPTQU:00000005 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 21.6252ms (afa2e885)
2021-04-05T21:12:46.3356790+07:00 0HM7O7IEVPTQU:00000005 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:12:46.3403290+07:00 0HM7O7IEVPTQU:00000005 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 62
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:c641ab49-1840-46d5-a1b3-fcd7bbef6f5a
Error Number:10742,State:1,Class:15
2021-04-05T21:12:46.3443860+07:00 0HM7O7IEVPTQU:00000005 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 31.6101ms (791a596a)
2021-04-05T21:15:49.6602410+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:15:53.1391400+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:15:53.5143450+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:15:53.5604200+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:15:53.5672420+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:15:53.5695270+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:15:53.5817180+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:15:53.5996260+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:15:53.8185640+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:15:53.8462270+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:15:54.0154750+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:15:54.0155790+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:15:54.0156990+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:15:54.0157350+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:15:54.0157540+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:16:02.3737550+07:00 0HM7O7LBSQAEE:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T21:16:02.7207290+07:00 0HM7O7LBSQAEE:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T21:16:02.7301720+07:00 0HM7O7LBSQAEE:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:16:02.7316330+07:00 0HM7O7LBSQAEE:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:16:02.7908460+07:00 0HM7O7LBSQAEE:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:16:03.0580540+07:00 0HM7O7LBSQAEE:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:16:03.2893310+07:00 0HM7O7LBSQAEE:00000002 [INF] Executed DbCommand ("26"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:16:03.5153930+07:00 0HM7O7LBSQAEE:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE [a].[Gender] = @__userParams_Gender_0" (0723d8ff)
2021-04-05T21:16:03.5528120+07:00 0HM7O7LBSQAEE:00000002 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-05T21:16:03.5884190+07:00 0HM7O7LBSQAEE:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Gender] = @__userParams_Gender_0
    ORDER BY [a].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:16:03.6176790+07:00 0HM7O7LBSQAEE:00000002 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15
2021-04-05T21:16:03.6290700+07:00 0HM7O7LBSQAEE:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 831.7013ms (afa2e885)
2021-04-05T21:16:03.6298530+07:00 0HM7O7LBSQAEE:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:16:03.6478880+07:00 0HM7O7LBSQAEE:00000002 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 61
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15
2021-04-05T21:16:03.6912340+07:00 0HM7O7LBSQAEE:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 1320.7683ms (791a596a)
2021-04-05T21:16:10.7789200+07:00 0HM7O7LBSQAEE:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?gender=male - - (ca22a1cb)
2021-04-05T21:16:10.7814180+07:00 0HM7O7LBSQAEE:00000003 [INF] Successfully validated the token. (60169667)
2021-04-05T21:16:10.7827820+07:00 0HM7O7LBSQAEE:00000003 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:16:10.7830960+07:00 0HM7O7LBSQAEE:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:16:10.7841450+07:00 0HM7O7LBSQAEE:00000003 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:16:10.8290640+07:00 0HM7O7LBSQAEE:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:16:10.8349870+07:00 0HM7O7LBSQAEE:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:16:10.8403090+07:00 0HM7O7LBSQAEE:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE [a].[Gender] = @__userParams_Gender_0" (0723d8ff)
2021-04-05T21:16:10.8468050+07:00 0HM7O7LBSQAEE:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Gender] = @__userParams_Gender_0
    ORDER BY [a].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:16:10.8488310+07:00 0HM7O7LBSQAEE:00000003 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15
2021-04-05T21:16:10.8500280+07:00 0HM7O7LBSQAEE:00000003 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 65.6782ms (afa2e885)
2021-04-05T21:16:10.8501870+07:00 0HM7O7LBSQAEE:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:16:10.8529850+07:00 0HM7O7LBSQAEE:00000003 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 61
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15
2021-04-05T21:16:10.8562320+07:00 0HM7O7LBSQAEE:00000003 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?gender=male - - - 500 - application/json 77.2305ms (791a596a)
2021-04-05T21:16:27.7735750+07:00 0HM7O7LBSQAEE:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - (ca22a1cb)
2021-04-05T21:16:27.7754780+07:00 0HM7O7LBSQAEE:00000004 [INF] Successfully validated the token. (60169667)
2021-04-05T21:16:27.7759550+07:00 0HM7O7LBSQAEE:00000004 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:16:27.7761020+07:00 0HM7O7LBSQAEE:00000004 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:16:27.7762180+07:00 0HM7O7LBSQAEE:00000004 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:16:27.7799480+07:00 0HM7O7LBSQAEE:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:16:27.7848320+07:00 0HM7O7LBSQAEE:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:16:27.7888470+07:00 0HM7O7LBSQAEE:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE [a].[Gender] = @__userParams_Gender_0" (0723d8ff)
2021-04-05T21:16:27.7936200+07:00 0HM7O7LBSQAEE:00000004 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-05T21:16:27.8261720+07:00 0HM7O7LBSQAEE:00000004 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Gender] = @__userParams_Gender_0
    ORDER BY [a].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:16:27.8446990+07:00 0HM7O7LBSQAEE:00000004 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T21:16:27.8787320+07:00 0HM7O7LBSQAEE:00000004 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 102.443ms (afa2e885)
2021-04-05T21:16:27.8787970+07:00 0HM7O7LBSQAEE:00000004 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:16:27.8789320+07:00 0HM7O7LBSQAEE:00000004 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - - 200 - application/json;+charset=utf-8 105.3663ms (791a596a)
2021-04-05T21:16:32.6587180+07:00 0HM7O7LBSQAEE:00000005 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T21:16:32.6590790+07:00 0HM7O7LBSQAEE:00000005 [INF] Successfully validated the token. (60169667)
2021-04-05T21:16:32.6591640+07:00 0HM7O7LBSQAEE:00000005 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:16:32.6591810+07:00 0HM7O7LBSQAEE:00000005 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:16:32.6592610+07:00 0HM7O7LBSQAEE:00000005 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:16:32.6597590+07:00 0HM7O7LBSQAEE:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:16:32.6685020+07:00 0HM7O7LBSQAEE:00000005 [INF] Executed DbCommand ("8"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:16:32.6743620+07:00 0HM7O7LBSQAEE:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE [a].[Gender] = @__userParams_Gender_0" (0723d8ff)
2021-04-05T21:16:32.6800080+07:00 0HM7O7LBSQAEE:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Gender] = @__userParams_Gender_0
    ORDER BY [a].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:16:32.6807970+07:00 0HM7O7LBSQAEE:00000005 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15
2021-04-05T21:16:32.6819300+07:00 0HM7O7LBSQAEE:00000005 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 22.6068ms (afa2e885)
2021-04-05T21:16:32.6823000+07:00 0HM7O7LBSQAEE:00000005 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:16:32.6847710+07:00 0HM7O7LBSQAEE:00000005 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 61
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:d98de496-2bba-4336-98dd-e14f04d0c621
Error Number:10742,State:1,Class:15
2021-04-05T21:16:32.6879120+07:00 0HM7O7LBSQAEE:00000005 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 29.1729ms (791a596a)
2021-04-05T21:16:38.3775650+07:00 0HM7O7LBSQAEE:00000006 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - (ca22a1cb)
2021-04-05T21:16:38.3779350+07:00 0HM7O7LBSQAEE:00000006 [INF] Successfully validated the token. (60169667)
2021-04-05T21:16:38.3783180+07:00 0HM7O7LBSQAEE:00000006 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:16:38.3784410+07:00 0HM7O7LBSQAEE:00000006 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:16:38.3786520+07:00 0HM7O7LBSQAEE:00000006 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:16:38.3795820+07:00 0HM7O7LBSQAEE:00000006 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:16:38.3833840+07:00 0HM7O7LBSQAEE:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:16:38.3889260+07:00 0HM7O7LBSQAEE:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE [a].[Gender] = @__userParams_Gender_0" (0723d8ff)
2021-04-05T21:16:38.3920950+07:00 0HM7O7LBSQAEE:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Gender] = @__userParams_Gender_0
    ORDER BY [a].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:16:38.3926820+07:00 0HM7O7LBSQAEE:00000006 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T21:16:38.3929880+07:00 0HM7O7LBSQAEE:00000006 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 14.2714ms (afa2e885)
2021-04-05T21:16:38.3930200+07:00 0HM7O7LBSQAEE:00000006 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:16:38.3931430+07:00 0HM7O7LBSQAEE:00000006 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - - 200 - application/json;+charset=utf-8 15.5664ms (791a596a)
2021-04-05T21:17:16.1131490+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:17:19.6171600+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:17:20.0067520+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:17:20.0512100+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:17:20.0582200+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:17:20.0605440+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:17:20.0744590+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:17:20.0930570+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:17:20.3128540+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:17:20.3343650+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:17:20.4832740+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:17:20.4833620+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:17:20.4835320+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:17:20.4835590+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:17:20.4835960+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:18:00.0700550+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:18:07.3060530+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:18:07.6702720+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:18:07.7109640+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:18:07.7169290+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:18:07.7190010+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:18:07.7311930+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:18:07.7489130+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:18:07.9516270+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:18:07.9723720+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:18:08.1272950+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:18:08.1277130+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:18:08.1281820+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:18:08.1289520+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:18:08.1290450+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:18:29.7932160+07:00 0HM7O7MNR01AE:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - (ca22a1cb)
2021-04-05T21:18:30.0559380+07:00 0HM7O7MNR01AE:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T21:18:30.0616870+07:00 0HM7O7MNR01AE:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:18:30.0625900+07:00 0HM7O7MNR01AE:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:18:30.1075000+07:00 0HM7O7MNR01AE:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:18:30.3397990+07:00 0HM7O7MNR01AE:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:18:30.5783720+07:00 0HM7O7MNR01AE:00000002 [INF] Executed DbCommand ("26"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:18:30.7870090+07:00 0HM7O7MNR01AE:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE [a].[Gender] = @__userParams_Gender_0" (0723d8ff)
2021-04-05T21:18:30.8153250+07:00 0HM7O7MNR01AE:00000002 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-05T21:18:30.8430690+07:00 0HM7O7MNR01AE:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Gender] = @__userParams_Gender_0
    ORDER BY [a].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:18:30.8798100+07:00 0HM7O7MNR01AE:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T21:18:30.9281840+07:00 0HM7O7MNR01AE:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 814.3888ms (afa2e885)
2021-04-05T21:18:30.9291750+07:00 0HM7O7MNR01AE:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:18:30.9393060+07:00 0HM7O7MNR01AE:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=4 - - - 200 - application/json;+charset=utf-8 1148.4129ms (791a596a)
2021-04-05T21:18:35.3391530+07:00 0HM7O7MNR01AE:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T21:18:35.3417590+07:00 0HM7O7MNR01AE:00000003 [INF] Successfully validated the token. (60169667)
2021-04-05T21:18:35.3426060+07:00 0HM7O7MNR01AE:00000003 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:18:35.3427580+07:00 0HM7O7MNR01AE:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:18:35.3431750+07:00 0HM7O7MNR01AE:00000003 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:18:35.3913130+07:00 0HM7O7MNR01AE:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:18:35.3984270+07:00 0HM7O7MNR01AE:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:18:35.4052980+07:00 0HM7O7MNR01AE:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE [a].[Gender] = @__userParams_Gender_0" (0723d8ff)
2021-04-05T21:18:35.4129290+07:00 0HM7O7MNR01AE:00000003 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-05T21:18:35.4331400+07:00 0HM7O7MNR01AE:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userParams_Gender_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Gender] = @__userParams_Gender_0
    ORDER BY [a].[Id]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:18:35.4613070+07:00 0HM7O7MNR01AE:00000003 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:ab584a1e-f140-4cd5-8d87-8575562feca4
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:ab584a1e-f140-4cd5-8d87-8575562feca4
Error Number:10742,State:1,Class:15
2021-04-05T21:18:35.4631690+07:00 0HM7O7MNR01AE:00000003 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 119.8042ms (afa2e885)
2021-04-05T21:18:35.4636710+07:00 0HM7O7MNR01AE:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:18:35.4841380+07:00 0HM7O7MNR01AE:00000003 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 61
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:ab584a1e-f140-4cd5-8d87-8575562feca4
Error Number:10742,State:1,Class:15
2021-04-05T21:18:35.4968090+07:00 0HM7O7MNR01AE:00000003 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 157.7465ms (791a596a)
2021-04-05T21:20:07.2107610+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:20:12.2551050+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:20:12.6911210+07:00  [INF] Executed DbCommand ("49"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:20:12.7406240+07:00  [INF] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:20:12.7471020+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:20:12.7501390+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:20:12.7623800+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:20:12.7810950+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:20:13.0026350+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:20:13.0216040+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:20:13.1743910+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:20:13.1744730+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:20:13.1745640+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:20:13.1745830+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:20:13.1745980+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:20:22.8943660+07:00 0HM7O7NPHJ8H2:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T21:20:23.1813910+07:00 0HM7O7NPHJ8H2:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T21:20:23.1859360+07:00 0HM7O7NPHJ8H2:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:20:23.1867020+07:00 0HM7O7NPHJ8H2:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:20:23.2251380+07:00 0HM7O7NPHJ8H2:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:20:23.4971600+07:00 0HM7O7NPHJ8H2:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:20:23.7327780+07:00 0HM7O7NPHJ8H2:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:20:23.9479890+07:00 0HM7O7NPHJ8H2:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T21:20:23.9828890+07:00 0HM7O7NPHJ8H2:00000002 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))' (74d62de4)
2021-04-05T21:20:24.0246760+07:00 0HM7O7NPHJ8H2:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:20:24.0496200+07:00 0HM7O7NPHJ8H2:00000002 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a27644f3-864f-453c-83fd-630525ab34ee
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a27644f3-864f-453c-83fd-630525ab34ee
Error Number:10742,State:1,Class:15
2021-04-05T21:20:24.0596430+07:00 0HM7O7NPHJ8H2:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 828.832ms (afa2e885)
2021-04-05T21:20:24.0602780+07:00 0HM7O7NPHJ8H2:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:20:24.0751830+07:00 0HM7O7NPHJ8H2:00000002 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 61
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:a27644f3-864f-453c-83fd-630525ab34ee
Error Number:10742,State:1,Class:15
2021-04-05T21:20:24.1216230+07:00 0HM7O7NPHJ8H2:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 1229.5093ms (791a596a)
2021-04-05T21:22:23.1565310+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:22:27.4371190+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:22:27.8753270+07:00  [INF] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:22:27.9261280+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:22:27.9328920+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:22:27.9365210+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:22:27.9517590+07:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:22:27.9715830+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:22:28.1915220+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:22:28.2198930+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:22:28.3846240+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:22:28.3846960+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:22:28.3848160+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:22:28.3848370+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:22:28.3848520+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:26:01.4560990+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:26:05.1169920+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:26:05.6033330+07:00  [INF] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:26:05.6570850+07:00  [INF] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:26:05.6648780+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:26:05.6679700+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:26:05.6835280+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:26:05.7051930+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:26:05.9387240+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:26:05.9647480+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:26:06.1250050+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:26:06.1251220+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:26:06.1252560+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:26:06.1252940+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:26:06.1253130+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:26:09.2177680+07:00 0HM7O7R0O7L4O:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T21:26:09.5085050+07:00 0HM7O7R0O7L4O:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T21:26:09.5139660+07:00 0HM7O7R0O7L4O:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:26:09.5146720+07:00 0HM7O7R0O7L4O:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:26:09.5519660+07:00 0HM7O7R0O7L4O:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:26:09.7980820+07:00 0HM7O7R0O7L4O:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:26:10.0589990+07:00 0HM7O7R0O7L4O:00000002 [INF] Executed DbCommand ("31"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:26:10.2756030+07:00 0HM7O7R0O7L4O:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T21:26:10.2892670+07:00 0HM7O7R0O7L4O:00000002 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. (96eb03fe)
2021-04-05T21:26:10.2899650+07:00 0HM7O7R0O7L4O:00000002 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. (96eb03fe)
2021-04-05T21:26:10.3506240+07:00 0HM7O7R0O7L4O:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:26:10.3808950+07:00 0HM7O7R0O7L4O:00000002 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b8514513-e3f0-462f-a669-1646267a1787
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b8514513-e3f0-462f-a669-1646267a1787
Error Number:10742,State:1,Class:15
2021-04-05T21:26:10.3905390+07:00 0HM7O7R0O7L4O:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 833.3038ms (afa2e885)
2021-04-05T21:26:10.3911760+07:00 0HM7O7R0O7L4O:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:26:10.4071140+07:00 0HM7O7R0O7L4O:00000002 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 62
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:b8514513-e3f0-462f-a669-1646267a1787
Error Number:10742,State:1,Class:15
2021-04-05T21:26:10.4416390+07:00 0HM7O7R0O7L4O:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 1226.7148ms (791a596a)
2021-04-05T21:26:21.6410400+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T21:26:25.5617910+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:26:25.9953390+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:26:26.0425990+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:26:26.0484230+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T21:26:26.0506730+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T21:26:26.0647670+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T21:26:26.0832210+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T21:26:26.2938970+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T21:26:26.3131740+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T21:26:26.4651750+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T21:26:26.4652530+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T21:26:26.4653650+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T21:26:26.4653940+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T21:26:26.4654290+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T21:26:28.7285590+07:00 0HM7O7R6IF5FQ:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T21:26:28.9386330+07:00 0HM7O7R6IF5FQ:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T21:26:28.9447910+07:00 0HM7O7R6IF5FQ:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T21:26:28.9468190+07:00 0HM7O7R6IF5FQ:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T21:26:28.9813260+07:00 0HM7O7R6IF5FQ:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T21:26:29.2022870+07:00 0HM7O7R6IF5FQ:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T21:26:29.4045010+07:00 0HM7O7R6IF5FQ:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T21:26:29.5772900+07:00 0HM7O7R6IF5FQ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T21:26:29.5942560+07:00 0HM7O7R6IF5FQ:00000002 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. (96eb03fe)
2021-04-05T21:26:29.5953760+07:00 0HM7O7R6IF5FQ:00000002 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. (96eb03fe)
2021-04-05T21:26:29.6383410+07:00 0HM7O7R6IF5FQ:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T21:26:29.6583390+07:00 0HM7O7R6IF5FQ:00000002 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:51e25f6f-a96a-4b9f-bdd1-2126dc3ccb70
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:51e25f6f-a96a-4b9f-bdd1-2126dc3ccb70
Error Number:10742,State:1,Class:15
2021-04-05T21:26:29.6720850+07:00 0HM7O7R6IF5FQ:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 683.7231ms (afa2e885)
2021-04-05T21:26:29.6732410+07:00 0HM7O7R6IF5FQ:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T21:26:29.6843500+07:00 0HM7O7R6IF5FQ:00000002 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 63
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:51e25f6f-a96a-4b9f-bdd1-2126dc3ccb70
Error Number:10742,State:1,Class:15
2021-04-05T21:26:29.7162740+07:00 0HM7O7R6IF5FQ:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 990.5325ms (791a596a)
2021-04-05T22:48:58.3872270+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:48:58.7647120+07:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T22:48:58.8090150+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T22:48:58.8152800+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T22:48:58.8177990+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T22:48:58.8326880+07:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T22:48:58.8519090+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T22:48:59.0431620+07:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T22:48:59.0622450+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T22:48:59.1990520+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T22:48:59.1991530+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T22:48:59.1993330+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T22:48:59.1993680+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T22:48:59.1994190+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T22:49:45.5662330+07:00 0HM7O99NO64JU:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T22:49:45.7891080+07:00 0HM7O99NO64JU:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T22:49:45.7963280+07:00 0HM7O99NO64JU:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:49:45.7973460+07:00 0HM7O99NO64JU:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:49:45.8322110+07:00 0HM7O99NO64JU:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:49:46.0028220+07:00 0HM7O99NO64JU:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:49:46.1956900+07:00 0HM7O99NO64JU:00000002 [INF] Executed DbCommand ("27"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:49:46.4266240+07:00 0HM7O99NO64JU:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T22:49:46.4721280+07:00 0HM7O99NO64JU:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:49:46.4911750+07:00 0HM7O99NO64JU:00000002 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1d0e7439-aa26-4c46-976b-e5e050949148
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1d0e7439-aa26-4c46-976b-e5e050949148
Error Number:10742,State:1,Class:15
2021-04-05T22:49:46.5051450+07:00 0HM7O99NO64JU:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 665.3137ms (afa2e885)
2021-04-05T22:49:46.5064830+07:00 0HM7O99NO64JU:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:49:46.5215900+07:00 0HM7O99NO64JU:00000002 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 61
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:1d0e7439-aa26-4c46-976b-e5e050949148
Error Number:10742,State:1,Class:15
2021-04-05T22:49:46.5538740+07:00 0HM7O99NO64JU:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 989.9107ms (791a596a)
2021-04-05T22:49:59.8249810+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T22:50:03.1613840+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:50:03.5293020+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T22:50:03.5738000+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T22:50:03.5818750+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T22:50:03.5848630+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T22:50:03.5987260+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T22:50:03.6176460+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T22:50:03.8090380+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T22:50:03.8284690+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T22:50:03.9601550+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T22:50:03.9602550+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T22:50:03.9604220+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T22:50:03.9604500+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T22:50:03.9604790+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T22:50:14.9918130+07:00 0HM7O9A0GPJ0G:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T22:50:15.1812910+07:00 0HM7O9A0GPJ0G:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T22:50:15.1871490+07:00 0HM7O9A0GPJ0G:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:50:15.1877550+07:00 0HM7O9A0GPJ0G:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:50:15.2193890+07:00 0HM7O9A0GPJ0G:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:50:15.4039860+07:00 0HM7O9A0GPJ0G:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:50:15.5806250+07:00 0HM7O9A0GPJ0G:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:50:15.7362660+07:00 0HM7O9A0GPJ0G:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T22:50:15.7799330+07:00 0HM7O9A0GPJ0G:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:50:15.7982240+07:00 0HM7O9A0GPJ0G:00000002 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:20ee8ab4-51cf-41c7-863c-fb00105a9066
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:20ee8ab4-51cf-41c7-863c-fb00105a9066
Error Number:10742,State:1,Class:15
2021-04-05T22:50:15.8078680+07:00 0HM7O9A0GPJ0G:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 583.5456ms (afa2e885)
2021-04-05T22:50:15.8088980+07:00 0HM7O9A0GPJ0G:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:50:15.8202680+07:00 0HM7O9A0GPJ0G:00000002 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 61
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:20ee8ab4-51cf-41c7-863c-fb00105a9066
Error Number:10742,State:1,Class:15
2021-04-05T22:50:15.8504200+07:00 0HM7O9A0GPJ0G:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 500 - application/json 860.7802ms (791a596a)
2021-04-05T22:51:07.2327800+07:00 0HM7O9A0GPJ0G:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageSize=5 - - (ca22a1cb)
2021-04-05T22:51:07.2347170+07:00 0HM7O9A0GPJ0G:00000003 [INF] Successfully validated the token. (60169667)
2021-04-05T22:51:07.2351340+07:00 0HM7O9A0GPJ0G:00000003 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:51:07.2352040+07:00 0HM7O9A0GPJ0G:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:51:07.2354370+07:00 0HM7O9A0GPJ0G:00000003 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:51:07.2699900+07:00 0HM7O9A0GPJ0G:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:51:07.2759920+07:00 0HM7O9A0GPJ0G:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:51:07.2813070+07:00 0HM7O9A0GPJ0G:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T22:51:07.2837610+07:00 0HM7O9A0GPJ0G:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:51:07.2846690+07:00 0HM7O9A0GPJ0G:00000003 [ERR] An exception occurred while iterating over the results of a query for context type '"api.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:20ee8ab4-51cf-41c7-863c-fb00105a9066
Error Number:10742,State:1,Class:15" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
ClientConnectionId:20ee8ab4-51cf-41c7-863c-fb00105a9066
Error Number:10742,State:1,Class:15
2021-04-05T22:51:07.2854700+07:00 0HM7O9A0GPJ0G:00000003 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 49.934ms (afa2e885)
2021-04-05T22:51:07.2856350+07:00 0HM7O9A0GPJ0G:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:51:07.2871750+07:00 0HM7O9A0GPJ0G:00000003 [ERR] The offset specified in a OFFSET clause may not be negative. (a466f7bc)
Microsoft.Data.SqlClient.SqlException (0x80131904): The offset specified in a OFFSET clause may not be negative.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](AAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at api.Helpers.PageList`1.CreateAsync(IQueryable`1 source, Int32 pageNumber, Int32 pageSize) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Helpers/PageList.cs:line 29
   at api.Data.UserRepository.GetUsersAsync(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Data/UserRepository.cs:line 61
   at api.Controllers.UsersController.GetUsers(UserParams userParams) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Controllers/UsersController.cs:line 51
   at lambda_method18(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at api.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in /Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api/Middleware/ExceptionMiddleware.cs:line 29
ClientConnectionId:20ee8ab4-51cf-41c7-863c-fb00105a9066
Error Number:10742,State:1,Class:15
2021-04-05T22:51:07.2890610+07:00 0HM7O9A0GPJ0G:00000003 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageSize=5 - - - 500 - application/json 56.3193ms (791a596a)
2021-04-05T22:51:10.9824780+07:00 0HM7O9A0GPJ0G:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=5 - - (ca22a1cb)
2021-04-05T22:51:10.9847360+07:00 0HM7O9A0GPJ0G:00000004 [INF] Successfully validated the token. (60169667)
2021-04-05T22:51:10.9852040+07:00 0HM7O9A0GPJ0G:00000004 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:51:10.9853150+07:00 0HM7O9A0GPJ0G:00000004 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:51:10.9854390+07:00 0HM7O9A0GPJ0G:00000004 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:51:10.9875930+07:00 0HM7O9A0GPJ0G:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:51:10.9906830+07:00 0HM7O9A0GPJ0G:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:51:10.9939750+07:00 0HM7O9A0GPJ0G:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T22:51:11.0247910+07:00 0HM7O9A0GPJ0G:00000004 [INF] Executed DbCommand ("12"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:51:11.0446990+07:00 0HM7O9A0GPJ0G:00000004 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T22:51:11.0722850+07:00 0HM7O9A0GPJ0G:00000004 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 86.7967ms (afa2e885)
2021-04-05T22:51:11.0723650+07:00 0HM7O9A0GPJ0G:00000004 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:51:11.0725390+07:00 0HM7O9A0GPJ0G:00000004 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2&pageSize=5 - - - 200 - application/json;+charset=utf-8 90.0647ms (791a596a)
2021-04-05T22:51:14.7453860+07:00 0HM7O9A0GPJ0G:00000005 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2 - - (ca22a1cb)
2021-04-05T22:51:14.7456980+07:00 0HM7O9A0GPJ0G:00000005 [INF] Successfully validated the token. (60169667)
2021-04-05T22:51:14.7457790+07:00 0HM7O9A0GPJ0G:00000005 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:51:14.7457980+07:00 0HM7O9A0GPJ0G:00000005 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:51:14.7458760+07:00 0HM7O9A0GPJ0G:00000005 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:51:14.7463260+07:00 0HM7O9A0GPJ0G:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:51:14.7506920+07:00 0HM7O9A0GPJ0G:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:51:14.7542560+07:00 0HM7O9A0GPJ0G:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T22:51:14.7575120+07:00 0HM7O9A0GPJ0G:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:51:14.7581760+07:00 0HM7O9A0GPJ0G:00000005 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T22:51:14.7591460+07:00 0HM7O9A0GPJ0G:00000005 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 13.222ms (afa2e885)
2021-04-05T22:51:14.7591930+07:00 0HM7O9A0GPJ0G:00000005 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:51:14.7593290+07:00 0HM7O9A0GPJ0G:00000005 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2 - - - 200 - application/json;+charset=utf-8 13.9342ms (791a596a)
2021-04-05T22:51:18.5512480+07:00 0HM7O9A0GPJ0G:00000006 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2 - - (ca22a1cb)
2021-04-05T22:51:18.5515470+07:00 0HM7O9A0GPJ0G:00000006 [INF] Successfully validated the token. (60169667)
2021-04-05T22:51:18.5516520+07:00 0HM7O9A0GPJ0G:00000006 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:51:18.5516760+07:00 0HM7O9A0GPJ0G:00000006 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:51:18.5517450+07:00 0HM7O9A0GPJ0G:00000006 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:51:18.5523150+07:00 0HM7O9A0GPJ0G:00000006 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:51:18.5552280+07:00 0HM7O9A0GPJ0G:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:51:18.5581950+07:00 0HM7O9A0GPJ0G:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T22:51:18.5609710+07:00 0HM7O9A0GPJ0G:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:51:18.5612910+07:00 0HM7O9A0GPJ0G:00000006 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T22:51:18.5614290+07:00 0HM7O9A0GPJ0G:00000006 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 9.6488ms (afa2e885)
2021-04-05T22:51:18.5615010+07:00 0HM7O9A0GPJ0G:00000006 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:51:18.5616040+07:00 0HM7O9A0GPJ0G:00000006 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?pageNumber=2 - - - 200 - application/json;+charset=utf-8 10.3536ms (791a596a)
2021-04-05T22:52:24.4975060+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T22:52:27.5966940+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:52:27.9812100+07:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T22:52:28.0231950+07:00  [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T22:52:28.0304400+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T22:52:28.0330570+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T22:52:28.0468320+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T22:52:28.0667990+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T22:52:28.2885640+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T22:52:28.3093610+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T22:52:28.4545330+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T22:52:28.4546030+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T22:52:28.4547640+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T22:52:28.4548010+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T22:52:28.4548210+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T22:52:32.5502820+07:00 0HM7O9B9GJ4JO:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T22:52:32.7586380+07:00 0HM7O9B9GJ4JO:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T22:52:32.7654810+07:00 0HM7O9B9GJ4JO:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:52:32.7663520+07:00 0HM7O9B9GJ4JO:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:52:32.7982110+07:00 0HM7O9B9GJ4JO:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:52:32.9895840+07:00 0HM7O9B9GJ4JO:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:52:33.1894550+07:00 0HM7O9B9GJ4JO:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:52:33.3733320+07:00 0HM7O9B9GJ4JO:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]" (0723d8ff)
2021-04-05T22:52:33.4195950+07:00 0HM7O9B9GJ4JO:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    ORDER BY [a].[Id]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:52:33.4523970+07:00 0HM7O9B9GJ4JO:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T22:52:33.4898040+07:00 0HM7O9B9GJ4JO:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 686.4731ms (afa2e885)
2021-04-05T22:52:33.4903780+07:00 0HM7O9B9GJ4JO:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:52:33.4985380+07:00 0HM7O9B9GJ4JO:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 950.7120ms (791a596a)
2021-04-05T22:54:15.5526700+07:00  [INF] Application is shutting down... (90f52c38)
2021-04-05T22:54:18.7193590+07:00  [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:54:19.1191540+07:00  [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T22:54:19.1645130+07:00  [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T22:54:19.1703400+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2021-04-05T22:54:19.1724360+07:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2021-04-05T22:54:19.1854480+07:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2021-04-05T22:54:19.2036750+07:00  [INF] No migrations were applied. The database is already up to date. (503cba9d)
2021-04-05T22:54:19.4219120+07:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END" (0723d8ff)
2021-04-05T22:54:19.4431170+07:00  [INF] User profile is available. Using '"/Users/ray/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest. (a162847e)
2021-04-05T22:54:19.5968040+07:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-04-05T22:54:19.5968690+07:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-04-05T22:54:19.5969860+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-04-05T22:54:19.5970050+07:00  [INF] Hosting environment: "Development" (c3307c92)
2021-04-05T22:54:19.5970220+07:00  [INF] Content root path: "/Users/ray/Dropbox/Projects/dotnetCore/DatingApp2/api" (b5d60022)
2021-04-05T22:54:22.1185020+07:00 0HM7O9CA5IFTS:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T22:54:22.3261830+07:00 0HM7O9CA5IFTS:00000002 [INF] Successfully validated the token. (60169667)
2021-04-05T22:54:22.3312170+07:00 0HM7O9CA5IFTS:00000002 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:54:22.3320030+07:00 0HM7O9CA5IFTS:00000002 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:54:22.3638080+07:00 0HM7O9CA5IFTS:00000002 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:54:22.5553210+07:00 0HM7O9CA5IFTS:00000002 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:54:22.7440450+07:00 0HM7O9CA5IFTS:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:54:22.9117750+07:00 0HM7O9CA5IFTS:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)" (0723d8ff)
2021-04-05T22:54:22.9669980+07:00 0HM7O9CA5IFTS:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)
    ORDER BY [a].[Id]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:54:22.9995200+07:00 0HM7O9CA5IFTS:00000002 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T22:54:23.0362170+07:00 0HM7O9CA5IFTS:00000002 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 666.4314ms (afa2e885)
2021-04-05T22:54:23.0366670+07:00 0HM7O9CA5IFTS:00000002 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:54:23.0430460+07:00 0HM7O9CA5IFTS:00000002 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 927.4192ms (791a596a)
2021-04-05T22:54:25.2439420+07:00 0HM7O9CA5IFTS:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?gender=male - - (ca22a1cb)
2021-04-05T22:54:25.2459490+07:00 0HM7O9CA5IFTS:00000003 [INF] Successfully validated the token. (60169667)
2021-04-05T22:54:25.2464420+07:00 0HM7O9CA5IFTS:00000003 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:54:25.2465420+07:00 0HM7O9CA5IFTS:00000003 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:54:25.2467760+07:00 0HM7O9CA5IFTS:00000003 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:54:25.2809660+07:00 0HM7O9CA5IFTS:00000003 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:54:25.2875500+07:00 0HM7O9CA5IFTS:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:54:25.2922900+07:00 0HM7O9CA5IFTS:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)" (0723d8ff)
2021-04-05T22:54:25.2949570+07:00 0HM7O9CA5IFTS:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)
    ORDER BY [a].[Id]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:54:25.2961690+07:00 0HM7O9CA5IFTS:00000003 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T22:54:25.2970460+07:00 0HM7O9CA5IFTS:00000003 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 50.227ms (afa2e885)
2021-04-05T22:54:25.2971000+07:00 0HM7O9CA5IFTS:00000003 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:54:25.2973310+07:00 0HM7O9CA5IFTS:00000003 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?gender=male - - - 200 - application/json;+charset=utf-8 53.4214ms (791a596a)
2021-04-05T22:54:43.8864750+07:00 0HM7O9CA5IFTS:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users - - (ca22a1cb)
2021-04-05T22:54:43.8895540+07:00 0HM7O9CA5IFTS:00000004 [INF] Successfully validated the token. (60169667)
2021-04-05T22:54:43.8901260+07:00 0HM7O9CA5IFTS:00000004 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:54:43.8902860+07:00 0HM7O9CA5IFTS:00000004 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:54:43.8903840+07:00 0HM7O9CA5IFTS:00000004 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:54:43.8924160+07:00 0HM7O9CA5IFTS:00000004 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:54:43.8961590+07:00 0HM7O9CA5IFTS:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:54:43.9042830+07:00 0HM7O9CA5IFTS:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)" (0723d8ff)
2021-04-05T22:54:43.9093880+07:00 0HM7O9CA5IFTS:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)
    ORDER BY [a].[Id]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:54:43.9102350+07:00 0HM7O9CA5IFTS:00000004 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T22:54:43.9104920+07:00 0HM7O9CA5IFTS:00000004 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 20.078ms (afa2e885)
2021-04-05T22:54:43.9105260+07:00 0HM7O9CA5IFTS:00000004 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:54:43.9106570+07:00 0HM7O9CA5IFTS:00000004 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users - - - 200 - application/json;+charset=utf-8 24.1897ms (791a596a)
2021-04-05T22:54:59.5242580+07:00 0HM7O9CA5IFTS:00000005 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/users?gender=male - - (ca22a1cb)
2021-04-05T22:54:59.5246050+07:00 0HM7O9CA5IFTS:00000005 [INF] Successfully validated the token. (60169667)
2021-04-05T22:54:59.5247460+07:00 0HM7O9CA5IFTS:00000005 [INF] Authorization was successful. (0d575a54)
2021-04-05T22:54:59.5248370+07:00 0HM7O9CA5IFTS:00000005 [INF] Executing endpoint '"api.Controllers.UsersController.GetUsers (api)"' (500cc934)
2021-04-05T22:54:59.5250030+07:00 0HM7O9CA5IFTS:00000005 [INF] Route matched with "{action = \"GetUsers\", controller = \"Users\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[api.DTO.MemberDto]]] GetUsers(api.Helpers.UserParams)" on controller "api.Controllers.UsersController" ("api"). (122b2fdf)
2021-04-05T22:54:59.5257250+07:00 0HM7O9CA5IFTS:00000005 [INF] Entity Framework Core "5.0.3" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2021-04-05T22:54:59.5294540+07:00 0HM7O9CA5IFTS:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__username_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [p].[Id], [p].[AppUsersId], [p].[IsMain], [p].[PublicId], [p].[Url]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[UserName] = @__username_0
) AS [t]
LEFT JOIN [Photos] AS [p] ON [t].[Id] = [p].[AppUsersId]
ORDER BY [t].[Id], [p].[Id]" (0723d8ff)
2021-04-05T22:54:59.5341070+07:00 0HM7O9CA5IFTS:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)" (0723d8ff)
2021-04-05T22:54:59.5377620+07:00 0HM7O9CA5IFTS:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userParams_CurrentUsername_0='?' (Size = 256), @__userParams_Gender_1='?' (Size = 4000), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[UserName], [t].[c], [t].[AccessFailedCount], [t].[City], [t].[ConcurrencyStamp], [t].[Country], [t].[Created], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[Gender], [t].[Interests], [t].[Introduction], [t].[KnownAs], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[LookingFor], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [p0].[Id], [p0].[AppUsersId], [p0].[IsMain], [p0].[PublicId], [p0].[Url], [p1].[Id], [p1].[Url], [p1].[IsMain]
FROM (
    SELECT [a].[Id], [a].[UserName], (
        SELECT TOP(1) [p].[Url]
        FROM [Photos] AS [p]
        WHERE ([a].[Id] = [p].[AppUsersId]) AND ([p].[IsMain] = CAST(1 AS bit))) AS [c], [a].[AccessFailedCount], [a].[City], [a].[ConcurrencyStamp], [a].[Country], [a].[Created], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[Gender], [a].[Interests], [a].[Introduction], [a].[KnownAs], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LookingFor], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled]
    FROM [AspNetUsers] AS [a]
    WHERE (([a].[UserName] <> @__userParams_CurrentUsername_0) OR [a].[UserName] IS NULL) AND ([a].[Gender] = @__userParams_Gender_1)
    ORDER BY [a].[Id]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
LEFT JOIN [Photos] AS [p0] ON [t].[Id] = [p0].[AppUsersId]
LEFT JOIN [Photos] AS [p1] ON [t].[Id] = [p1].[AppUsersId]
ORDER BY [t].[Id], [p0].[Id], [p1].[Id]" (0723d8ff)
2021-04-05T22:54:59.5384070+07:00 0HM7O9CA5IFTS:00000005 [INF] Executing "OkObjectResult", writing value of type '"api.Helpers.PageList`1[[api.DTO.MemberDto, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2021-04-05T22:54:59.5386780+07:00 0HM7O9CA5IFTS:00000005 [INF] Executed action "api.Controllers.UsersController.GetUsers (api)" in 13.5667ms (afa2e885)
2021-04-05T22:54:59.5387510+07:00 0HM7O9CA5IFTS:00000005 [INF] Executed endpoint '"api.Controllers.UsersController.GetUsers (api)"' (99874f2b)
2021-04-05T22:54:59.5389540+07:00 0HM7O9CA5IFTS:00000005 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/users?gender=male - - - 200 - application/json;+charset=utf-8 14.6652ms (791a596a)
